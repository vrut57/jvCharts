{"version":3,"sources":["webpack:///webpack/bootstrap ed16647c185f025a7a8c","webpack:///./src/jvCharts.js","webpack:///./src/jvComment.js","webpack:///./src/jvEdit.js","webpack:///./src/jvBrush.js","webpack:///./src/jvTip.js","webpack:///./src/visuals/jvLine.js","webpack:///./src/jv.js","webpack:///./src/jvVars.js","webpack:///./src/jvEvents.js","webpack:///./src/editOptionsTemplate.js","webpack:///./src/visuals/jvBar.js","webpack:///./src/visuals/jvPie.js","webpack:///./src/visuals/jvScatter.js","webpack:///./src/visuals/jvArea.js","webpack:///./src/visuals/jvGantt.js","webpack:///./src/visuals/jvHeatmap.js","webpack:///./src/visuals/jvPack.js","webpack:///./src/visuals/jvRadial.js","webpack:///./src/visuals/jvSankey.js","webpack:///./src/visuals/jvSingleAxis.js","webpack:///./src/visuals/jvSunburst.js","webpack:///./src/visuals/jvTreemap.js","webpack:///./src/visuals/jvWordCloud.js","webpack:///./src/visuals/jvBoxWhisker.js","webpack:///./src/visuals/jvBubble.js","webpack:///./src/visuals/jvClustergram.js","webpack:///./src/jvSelect.js"],"names":["jvCharts","configObj","chart","type","toLowerCase","chartDiv","options","cleanToolData","editOptions","_vars","getDefaultOptions","mode","config","createTooltip","setData","paint","transitionTime","tip","tipConfig","data","chartData","dataTableKeys","cleanDataTableKeys","headers","setAlignAndKeys","colors","call","dataTableAlign","i","len","keyMapping","keys","length","hasOwnProperty","model","name","dataTable","newKeys","key","push","varKey","alias","vizType","dimensions","node","getBoundingClientRect","height","width","console","log","annimation","checkDimensions","initializeModes","highlight","tempHighlight","convertedData","col","replace","highlightFromEventData","axis","axisData","label","maxStack","dataType","error","chartEle","undefined","count","getDataTypeFromKeys","stack","k","indexOf","max","min","temp","tempMin","tempMax","stackToggle","Math","apply","xMin","xMax","yMin","yMax","unshift","parseInt","dataLabel","xAxisData","flippedData","flippedDataTable","valueCount","filteredDataTableArray","flippedObject","setAxisData","yAxisData","legendData","setBarLineLegendData","sortParam","sortType","organizedData","sortLabel","isValidSortLabel","operation","calculatedBy","sort","a","b","Date","isNaN","parseFloat","reverse","d","currentData","color","title","item","group","start","end","difference","numPairs","floor","Object","j","getTime","ceil","outerRadius","value","yAxisName","xAxisName","tooltip","yTemp","y_path","split","yTempString","xTemp","x_path","xTempString","y_category","x_category","source","slice","target","customMarginParam","customSizeParam","margin","container","customMargins","customSize","textWidth","top","right","left","bottom","toggleLegend","getMaxWidthForAxisData","leftLabels","rightLabels","heatmapYmargin","heatmapXmargin","values","dummyObj","heatData","heatWidth","xLabelFontSize","svg","select","remove","append","attr","sizeWidth","rightLeaves","sizeHeight","leftLeaves","backgroundColor","colorBackground","ticks","xAxis","xAxisScale","getAxisScale","containerHeight","containerWidth","xAxisClass","tickSize","axisHeight","xContent","xAxisGroup","formatValueType","selectAll","d3","axisTop","axisBottom","jvFormatValueType","axisColor","strokeWidth","stroke","fontColor","style","fontSize","text","rotateAxis","jvFormatValue","dataLength","recursion","showAxisLabels","xAxisLength","axisValues","enter","returnVal","each","thisWidth","getComputedTextLength","textEle","generateXAxis","formatXAxisLabels","yAxisScale","yAxisClass","maxYAxisLabelWidth","numberOfTicks","yAxis","yContent","yAxisGroup","forceFormatTypeTo","ylabel","reduce","NaN","axisLeft","scale","tickPadding","hideValues","tickFormat","displayYAxisLabel","maxLength","current","substring","getBBox","yLabelWidth","drawFunc","legendElements","generateLegendElements","attachClickEventsToLegend","thresholds","thesholdLegend","generateThresholdLegend","paintFunc","generateVerticalLegendElements","containerName","threshold","Number","x","y","thresholdColor","legendOptions","cleanedChartData","JSON","parse","stringify","posCalc","displayValuesGroup","seriesFlipped","flippedLegendOptions","displayValues","legendEle","toggle","element","val","getDisplayValuesElement","getPosCalculations","translate","paddingOuter","step","returnText","round","displayValuesStackAsPercent","total","index","__data__","displayValuesStackTotal","stackCounter","yLength","xLength","indexMax","scaleData","gridLineHeight","gridLineStrokeWidth","gridLineWidth","dataObj","items","tag","highlightIndex","highlightUri","pieBorder","filter","highlightBorderColor","highlightBorderWidth","input","formatType","formatNumber","format","p","precisionFixed","expression","abs","valueArray","range","incrememnt","option","precisionPrefix","formatPrefix","dataHeaders","legendToggleArray","getLegendElementToggleArray","newData","toggleKey","selectedHeaders","allHeaders","header","legend","legendRow","legendColumn","legendDataLength","legendElementToggleArray","legendRectangles","legendText","legendIndex","legendIndexMax","legendMax","legendHeaders","flippedLegendHeaders","legendPos","gridSize","getColors","elementName","createCarousel","legendWidth","legendElement","ele","attributes","opacity","legendPolygon","legendArrowColor","on","display","legendPolygonWidth","objectData","objDataNew","objEle","scaleFactor","size","positionFunctions","startx","starty","startwidth","startheight","bandwidth","increment","colorObj","paramIndex","cleanedColors","Array","isArray","whichAxis","paddingType","leftPadding","rightPadding","axisScale","minDate","maxDate","scaleTime","domain","rangeRound","scaleBand","paddingInner","xReversed","yReversed","axisType","scaleLog","base","scaleLinear","defaultType","toUpperCase","legendArray","toolData","defaultColorArray","usedColors","unaccountedLegendElements","toolDataAsArray","createColorsWithDefault","mappedColors","yLabelFontSize","yLabelFormat","maxAxisText","dummySVG","axisDummy","maxString","axisValue","currentStr","toString","xLabelFormat","labelFormat","getFormatExpression","object","valuesArray","zAxisData","zAxisScale","NODE_MIN_SIZE","NODE_MAX_SIZE","nice","chartContainer","barData","dataToPlot","getPlotData","eventGroups","dataEle","getViewForValue","String","colorLegendData","gLegend","thresholdName","offset","horz","vert","selectedRect","_groups","updateDataFromLegend","applyEditMode","emptyLegendSquare","createVerticalCarousel","lastNodeAsValue","allHash","list","rootMap","currentMap","tableHeaders","currentValue","nextMap","makeTree","children","map","childSet","childMap","dataMap","childExists","getOwnPropertyNames","numericCheck","addedHeaderMap","childrenArray","seriesIndex","series","Parent","jvComment","showComments","comments","setCommentsList","disabled","drawCommentNodes","onSaveCallback","getMode","commentNode","commentObj","timeMouseDown","timeMouseMove","mouse","mouseOnChartDiv","resizeNode","moved","clientWidth","clientHeight","nodeName","nodeToUpdate","nodeId","id","comment","binding","getAttribute","showAsMarker","event","commentHeight","commentWidth","position","overlayDivPosition","commentType","html","document","getElementById","focus","removeComment","commentText","checked","newCommentObj","maxId","drawComment","chartAreaWidth","chartAreaHeight","styleString","resize","doubleClick","parent","rescale","baseVal","currentComment","divWidth","divHeight","mouseX","mouseY","editObj","newComments","childNodes","child","jvEdit","vizOptions","editDiv","prototype","displayEdit","changeFontSize","submitEditMode","applyAllEdits","removeEdit","optionValues","itemToChange","editOptionElement","editHeight","editWidth","populateSelectionsEditMode","fontSizeIncrement","increaseFontSize","bind","decreaseFontSize","fontIncrement","maxSize","fontDecrement","minSize","updateFont","thisDiv","newSize","textSize","setAttribute","window","getComputedStyle","getPropertyValue","selectedObject","possibleItemToChange","defaultBtnClicked","optionArray","selectedEditOptions","editValue","selectedObj","objectGroups","objectTagName","tagName","transition","jvBrush","brushObj","jvChart","onBrushCallback","brushType","brushX","extent","brushEnd","leftTreeWidth","topTreeHeight","brush","brushElement","newEvent","Event","pageX","clientX","pageY","clientY","view","dispatchEvent","xScale","yScale","filteredXAxisLabels","filteredYAxisLabels","shouldReset","e","selection","returnObj","filteredLabels","filteredConcepts","filterCol","filteredLabelsX","filteredLabelsY","cleanDataFlag","invert","calculateBrushAreaOrdinal","filteredAxisLabels","calculateBrushAreaLinear","calculateHeatmapBrush","calculateClustergramBrush","filterColX","filterColY","reset","clean","removeBrush","mousePosMin","mousePosMax","padding","minIndex","maxIndex","paddingDistance","axisLabel","dataElement","startDate","endDate","mouseXmin","mouseYmin","mouseXmax","mouseYmax","xBucketMax","heatGridSize","yBucketMax","xBucketMin","yBucketMin","clustergramGridWidth","clustergramGridHeight","xLevels","yLevels","parentCountX","match","xFields","parentCountY","yFields","jvTip","defaultConfig","showTip","hideTip","generateSimpleTip","transitionDuration","leftOfMouse","topOfMouse","tooltipHeight","toolTip","tooltipWidth","t","duration","ease","easeLinear","jvHr","getValueContent","colorTile","valueString","colorTileString","getTitleTemplate","getColorTile","tooltipHtml","viz","generateSingleColorHTML","generatePieHTML","generatePackHTML","generateHeatmapHTML","generateSankeyHTML","generateBubbleHTML","generateBoxHTML","generateClustergramHTML","generateGanttHTML","generateSimpleHTML","tooltipText","tipData","formatValue","tooltipColor","showColorCircle","colorCircle","xAxisCat","yAxisCat","startValue","endValue","durationValue","valueName","line","getEventData","generateLine","setLineThresholdData","organizeChartData","setFlippedSeries","setChartColors","setSeriesData","classList","getRawForValue","cssClass","labelList","add","newEntry","addToLegend","entry","getBarDataFromOptions","generateSVG","generateYAxis","generateLegend","lineData","lines","lineDataNew","getToggledData","fillArea","generateLineGroups","generateEventGroups","showToolTip","setTipData","generateClipPath","generateLineThreshold","lineContainer","lineLength","legendLength","xTranslate","yTranslate","uniqueXAxisData","curves","curveLinear","curveStep","curveStepBefore","curveStepAfter","curveBasis","curveCardinal","curveMonotoneX","curveCatmullRom","valueline","circles","lineColors","thresholding","curve","lineCurveType","defined","colorChart","colorLine","thresholdPercents","thresholdLength","zero","percent","z","pCent","thresholdData","gradientOne","gradientTwo","last","module","exports","jvSelect","assign","TypeError","to","arguments","nextSource","nextKey","userOptions","GRAY","WHITE","BLACK","SMALL_STROKE_WIDTH","light","thresholdLegend","gridLineColor","axisWidth","buckets","colorLabel","domainArray","quantiles","heatLegendSpacing","clusterColors","pieBorderWidth","pieTextColor","toggleZ","lineGuide","singleAxisFillHoverColor","createDefaultMode","createCommentMode","createEditMode","createBrushMode","createSelectMode","toggleModes","toggleDefaultMode","toggleCommentMode","toggleEditMode","toggleBrushMode","toggleSelectMode","addBrushEvents","callbacks","camelCaseMode","charAt","editMode","defaultMode","onBrush","brushMode","commentMode","onSave","callbackParam","callback","selectMode","entireSvg","onDoubleClick","getEventObj","onClick","onHover","offHover","prevEventData","newEventData","eventType","onKeyUp","keyCode","onKeyDown","mousedown","addBrushMousedown","mouseup","registerClickEvents","currentEvent","removeHighlight","makeComment","createMoveListener","updatePosition","classText","classed","brushStarted","brushContainer","containerBox","startBrush","down","clickedSpot","tolerance","clickTimer","CLICK_TIMER","clickTimerStarted","registerHoverEvents","onClickEvent","dist","clearTimeout","setTimeout","hoverData","hoverTimer","hoverTimerStarted","HOVER_TIMER","prevEvent","fakeHoverTimer","offHoverEvent","sameNode","onHoverEvent","m","node1","node2","response","sqrt","pow","bar","generateBarThreshold","generateBars","labelArray","thresholdRects","xAxisThreshold","tipLineX","tipLineWidth","tipLineHeight","tipLineY","bars","barDataNew","generateBarGroups","mouseItem","barGroups","externalCounterForJ","filteredKeys","legendVal","thresholdDir","setThreshold","easePolyOut","pie","generatePie","other","categorizedData","setPieLegendData","generateVerticalLegend","pieData","w","h","r","pieDataNew","vis","arc","arcs","obj","innerRadius","centroid","scatterplot","generateScatter","createLineGuide","setScatterLegendData","setScatterAxisData","insideContainer","scatterLabel","num","calculateMean","mean","xMean","yMean","lineGroup","scatterData","scatterDataFiltered","getZScale","area","zoomEvent","y0","y1","x1","x0","datum","gantt","generateGanttBars","setGanttLegendData","setGanttAxisData","numBars","valueContainer","ii","xAxisFormatting","yAxisFormatting","drawGridlines","ganttData","ganttDataNew","sampleData","ganttBars","startDates","endDates","typeVal","delay","externalCounterForJJ","currentDate","dateData","STROKE_WIDTH","today","dd","getDate","mm","getMonth","yyyy","getFullYear","heatmap","generateHeatMap","quantized","bucketCount","sectionValue","quantizedArray","axisNames","setHeatAxisNames","processedData","setProcessedData","setHeatmapLegendData","organizeColors","heatScores","colorScale","scaleQuantile","concat","colorSelectedBucket","sValue","newColors","bucketMapper","c","xAxisArray","yAxisArray","heat","dataArray","customMargin","heatMapData","legendSpacing","yAxisTitle","exit","yAxisSection","str","paintBool","selectedX","xAxisTitle","xAxisSection","vLine","hLine","heatMap","getQuantizedColor","clicked","ri","legendContainer","black","circlepack","generatePack","setPackLegendData","convertTableToTree","packMargins","diameter","root","pack","circle","scaleOrdinal","rgb","hierarchy","sum","descendants","depth","zoom","stopPropagation","zoomTo","altKey","tween","interpolateZoom","v","radial","generateRadial","setRadialLegendData","radialMargins","radialData","tickNumber","barHeight","radialDataNew","radialDataFiltered","barScale","segments","axisGroup","startAngle","PI","endAngle","easeElastic","attrTween","interpolate","sankey","generateSankey","sankeyData","links","nodes","nodeList","nodeGroup","nodeListForLabel","potentialNode","addToList","linkGroups","linkGroup","nodeMap","aggregateSankeyLinks","currentLink","addToAggregate","schemeCategory20","nodeWidth","nodePadding","path","link","scaleExtent","layout","dy","drag","subject","sourceEvent","parentNode","appendChild","dragmove","darker","dx","relayout","transform","singleaxis","getSingleAxisData","getSingleAxisZ","generatePoints","isEmpty","splitData","numVizzes","facet","splitDataKeys","splitOptionName","addToKeys","yLevel","pointColor","coloredPoint","currentAxisHeight","simulation","cell","SPLIT_CLUSTER_HEIGHT","TRANSLATE_SPLIT_CLUSTER","forceSimulation","alphaDecay","force","forceX","strength","forceY","forceCollide","norm","forceManyBody","stop","tick","voronoi","polygons","colorDataCategory","colorDataInstance","sunburst","generateSunburst","sunburstMargins","radius","scaleSqrt","partition","click","computeTextRotation","xd","yd","yr","arcText","treemap","generateTreeMap","convertTableToTreemap","setTreeMapLegendData","childEle","treeMapMargins","treeMapData","relationMap","treeMapDataFiltered","treemapFunc","textNode","show","leaves","white","bbox","cloud","generateCloud","setCloudLegendData","smallerFontRepaint","fontSizeMax","cloudMargins","cloudData","allFilterList","categories","nest","scalePow","exponent","timeInterval","words","rotate","font","repaintWithSmallerFont","spiral","draw","wordcloud","box","boxwhisker","generateBoxes","getBoxDataFromOptions","csv","Infinity","yAxisLabel","xAxisLabel","keys2","unique","ar","uniqueEle","tempData","boxData","boxChart","whiskers","iqr","showLabels","flipped","hideLabelsOnOverlap","numSpacesBetween","totalBoxWidth","widthOfSpaces","xAxisLabelLengthLimit","q1","quartiles","q3","boxWhiskers","boxQuartiles","curBar","g","ascending","n","outlierLabel","quartileData","whiskerIndices","whiskerData","outlierIndices","__chart__","outlier","insert","Outlier","Label","Quartiles","Whiskers","center","hoverArea","medianLine","whisker","boxTick","whiskerTick","timerFlush","constant","quantile","bubble","generateBubble","bubbleMargins","setBubbleLegendData","bubbleData","valueKey","labelKey","bubbleDataNew","splice","emptySpace","clustergram","generateClustergram","leftTreeData","rightTreeData","leftEle","rightEle","getLeafNodes","result","returnData","gridData","leftG","bottomG","heatG","newWidth","newHeight","leftChildCount","rightChildCount","buildTree","buildHeat","zoomed","findPath","childNode","gEle","sideOfTree","childCount","cluster","gridHeight","gridWidth","scaleThreshold","x_index","y_index","selectObj","singleClickCallback","doubleClickCallback","singleClick","dblclick"],"mappings":"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","file":"jvcharts.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ed16647c185f025a7a8c","'use strict';\r\n/***  jvCharts ***/\r\nimport jvTip from 'jvTip.js';\r\n\r\n/**Create a jvCharts object\r\n * @constructor\r\n * @param {Object} configObj - Configuration object passed into jvCharts constructor\r\n * @param {string} configObj.type - The type of chart\r\n * @param {string} configObj.name - The name of the chart\r\n * @param {Object} configObj.container - The container of the chart\r\n * @param {Object} configObj.userOptions - UI options for the chart\r\n * @param {Object} configObj.tipConfig - Configuration object for jvTooltip\r\n * @param {Object} configObj.chartDiv - A div wrapper for the chart and other jv features\r\n */\r\nclass jvCharts {\r\n    constructor(configObj) {\r\n        let chart = this;\r\n        configObj.type = configObj.type.toLowerCase();\r\n        chart.chartDiv = configObj.chartDiv;\r\n        configObj.options = jvCharts.cleanToolData(configObj.options, configObj.editOptions);\r\n        chart._vars = chart.getDefaultOptions(configObj.options);\r\n        chart.mode = configObj.mode || 'default-mode';\r\n\r\n        //remove pieces from config that have been copied somewhere else\r\n        delete configObj.chartDiv;\r\n        delete configObj.options;\r\n        delete configObj.mode;\r\n\r\n        chart.config = configObj;\r\n\r\n        //Start painting the jv Chart\r\n        chart.createTooltip();\r\n        chart.setData();\r\n        chart.paint(chart._vars.transitionTime);\r\n    }\r\n\r\n    createTooltip() {\r\n        let chart = this;\r\n        chart.tip = new jvTip({\r\n            config: chart.config.tipConfig,\r\n            chartDiv: chart.chartDiv\r\n        });\r\n    }\r\n\r\n    setData() {\r\n        let chart = this;\r\n        if (chart.config.setData) {\r\n            chart.data = chart.config.setData;\r\n            //refer to main data as chartData to keep naming separate and understandable\r\n            chart.data.chartData = chart.config.setData.data;\r\n            delete chart.data.data;\r\n            if (chart.data.dataTableKeys) {\r\n                chart.cleanDataTableKeys();\r\n            }\r\n\r\n            if (chart.data.headers) {\r\n                chart.setAlignAndKeys();\r\n            }\r\n\r\n            chart.colors = chart.config.setData.colors;\r\n            chart[chart.config.type].setData.call(chart);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @name updateDataTableAlign\r\n    * @param {array} currentKeys - array of objects to describe how to build the visual\r\n    * @return {object} dataTableAlign - key:value mapping of current alignment\r\n    */\r\n    setAlignAndKeys() {\r\n        var chart = this,\r\n            dataTableAlign = {},\r\n            i,\r\n            len,\r\n            keyMapping = {},\r\n            keys = chart.data.headers;\r\n\r\n        //iterate over current keys to create new object with key:value mapping instead of key:array mapping\r\n        for (i = 0, len = keys.length; i < len; i++) {\r\n            if (!keyMapping.hasOwnProperty(keys[i].model)) {\r\n                keyMapping[keys[i].model] = 0;\r\n                dataTableAlign[keys[i].model] = keys[i].name;\r\n            } else {\r\n                dataTableAlign[keys[i].model + ' ' + i] = keys[i].name;\r\n            }\r\n        }\r\n        chart.data.dataTableKeys = chart.data.headers;\r\n        chart.data.dataTable = dataTableAlign;\r\n    }\r\n\r\n    cleanDataTableKeys() {\r\n        let chart = this,\r\n            newKeys = [];\r\n        for (let key of chart.data.dataTableKeys) {\r\n            newKeys.push({\r\n                name: key.varKey || key.alias || key.name,\r\n                model: key.vizType || key.model,\r\n                type: key.type\r\n            });\r\n        }\r\n        chart.data.dataTableKeys = newKeys;\r\n    }\r\n\r\n    checkDimensions() {\r\n        let chart = this,\r\n            dimensions = chart.chartDiv.node().getBoundingClientRect();\r\n        if (dimensions.height > 50 && dimensions.width > 120) {\r\n            return true;\r\n        }\r\n        console.log('Chart container is too small to paint');\r\n        return false;\r\n    }\r\n\r\n    paint(annimation) {\r\n        let chart = this;\r\n        if (chart.checkDimensions()) {\r\n            if (chart.data && typeof chart[chart.config.type] === 'object' && typeof chart[chart.config.type].paint === 'function') {\r\n                chart[chart.config.type].paint.call(chart, annimation);\r\n                chart.initializeModes();\r\n\r\n                if (chart._vars.highlight) {\r\n                    /*******************************/\r\n                    //TODO fix this when Jon is back\r\n                    var tempHighlight = {}, convertedData = [];\r\n                    for (var col in chart._vars.highlight.data) {\r\n                        for (var i = 0; i < chart._vars.highlight.data[col].length; i++) {\r\n                            convertedData.push(chart._vars.highlight.data[col][i].replace(/_/g, ' '));\r\n                        }\r\n                        tempHighlight[col.replace(/_/g, ' ')] = convertedData;\r\n                    }\r\n\r\n                    chart._vars.highlight.data = tempHighlight;\r\n                    /*******************************/\r\n\r\n                    chart[chart.config.type].highlightFromEventData.call(chart, chart._vars.highlight);\r\n                }\r\n            } else {\r\n                console.log('no paint function for: ' + chart.config.type);\r\n            }\r\n        }\r\n    }\r\n\r\n    setAxisData(axis, data, keys) {\r\n        let chart = this,\r\n            axisData = [],\r\n            chartData = data.chartData,\r\n            label = '',\r\n            maxStack = 0,\r\n            dataTableKeys = data.dataTableKeys,\r\n            dataType;\r\n\r\n        if (!dataTableKeys) {\r\n            dataTableKeys = keys;\r\n        }\r\n\r\n        //Step 1: find out what the label is for the axis\r\n        if (axis === 'x') {\r\n            if (data.dataTable) {\r\n                if (data.dataTable.hasOwnProperty('label')) {\r\n                    label = data.dataTable.label;\r\n                } else {\r\n                    console.error(\"Label doesn't exist in dataTable\");\r\n                }\r\n            } else {\r\n                console.log('DataTable does not exist');\r\n            }\r\n\r\n            dataType = 'STRING';\r\n\r\n            //Replace underscores with spaces\r\n            label = label.replace(/_/g, ' ');\r\n\r\n            //loop through data to populate axisData\r\n            for (let chartEle of chartData) {\r\n                if (chartEle[label] === null) {\r\n                    axisData.push('NULL_VALUE');\r\n                } else if (chartEle[label] === '') {\r\n                    axisData.push('EMPTY_STRING');\r\n                } else if (chartEle[label] || chartEle[label] === 0) {\r\n                    axisData.push(chartEle[label]);\r\n                }\r\n            }\r\n        } else {\r\n            if (dataTableKeys === undefined) {\r\n                console.error('dataTableKeys do not exist');\r\n            }\r\n            //Find the max value for Y Data\r\n            let count = 0;\r\n\r\n            for (let key of dataTableKeys) {\r\n                if (key.model !== 'label' && key.model !== 'tooltip' && key.model !== 'series') {\r\n                    label = key.name;\r\n                    count++;\r\n                }\r\n            }\r\n            dataType = jvCharts.getDataTypeFromKeys(label, dataTableKeys, 'NUMBER');\r\n\r\n            //Add all values that are on yaxis to axis data\r\n            for (let chartEle of chartData) {\r\n                let stack = 0; //Keeps track of the maximum size of stacked data so that axis can be scaled to fit max size\r\n                for (let k in data.dataTable) {\r\n                    if (chartEle.hasOwnProperty(data.dataTable[k]) && k !== 'label' && k.indexOf('tooltip') === -1 && k !== 'series') {\r\n                        stack += chartEle[data.dataTable[k]];\r\n                        axisData.push(chartEle[data.dataTable[k]]);\r\n                    }\r\n                }\r\n                if (stack > maxStack) {\r\n                    maxStack = stack;\r\n                }\r\n            }\r\n\r\n            //If there are multiple values on the yAxis, don't specify a label\r\n            if (count > 1) {\r\n                label = '';\r\n            }\r\n            label = label.replace(/_/g, ' ');\r\n        }\r\n\r\n        //Find the min and max of numeric data for building axes and add it to the returned object\r\n        if (dataType === 'NUMBER') {\r\n            let max,\r\n                min,\r\n                temp,\r\n                tempMin,\r\n                tempMax;\r\n            if (chart._vars.stackToggle) {\r\n                max = maxStack;\r\n            } else {\r\n                max = Math.max.apply(null, axisData);\r\n            }\r\n\r\n            min = Math.min.apply(null, axisData);\r\n            min = Math.min(0, min);\r\n\r\n            //Check if there's an axis min/max set\r\n            if (axis === 'x') {\r\n                if (chart._vars.xMin != null && chart._vars.xMin !== 'none') {\r\n                    min = chart._vars.xMin;\r\n                }\r\n                if (chart._vars.xMax != null && chart._vars.xMax !== 'none') {\r\n                    max = chart._vars.xMax;\r\n                }\r\n            } else if (axis === 'y') {\r\n                if (chart._vars.yMin != null && chart._vars.yMin !== 'none') {\r\n                    min = chart._vars.yMin;\r\n                }\r\n                if (chart._vars.yMax != null && chart._vars.yMax !== 'none') {\r\n                    max = chart._vars.yMax;\r\n                }\r\n            }\r\n\r\n            if (dataType === 'NUMBER' && axisData.length === 1) {\r\n                if (axisData[0] >= 0) {\r\n                    axisData.unshift(0);\r\n                } else {\r\n                    axisData.push(0);\r\n                }\r\n            }\r\n\r\n            tempMin = parseInt(min, 10);\r\n            tempMax = parseInt(max, 10);\r\n            //Make sure that axis min and max don't get flipped\r\n            if (tempMin > tempMax) {\r\n                temp = min;\r\n                min = max;\r\n                max = temp;\r\n            }\r\n\r\n            return {\r\n                'label': label,\r\n                'values': axisData,\r\n                'dataType': dataType,\r\n                'min': min,\r\n                'max': max\r\n            };\r\n        }\r\n\r\n        return {\r\n            'label': label,\r\n            'values': axisData,\r\n            'dataType': dataType\r\n        };\r\n    }\r\n\r\n\r\n    /**setFlippedSeries\r\n     *  flips series and returns flipped data\r\n     *\r\n     * @params chartData, dataTable, dataLabel\r\n     * @returns Object of data and table for flipped series\r\n     */\r\n    setFlippedSeries(dataTableKeys) {\r\n        let chart = this,\r\n            chartData = chart.data.chartData,\r\n            dataTable = chart.data.dataTable,\r\n            dataLabel = chart.data.xAxisData.label,\r\n            flippedData = [],\r\n            flippedDataTable = {},\r\n            valueCount = 1,\r\n            filteredDataTableArray = [];\r\n\r\n        for (let k in dataTable) {\r\n            if (dataTable.hasOwnProperty(k)) {\r\n                let flippedObject = {};\r\n                if (dataTable[k] !== dataLabel) {\r\n                    flippedObject[dataLabel] = dataTable[k];\r\n                    for (let chartEle of chartData) {\r\n                        flippedObject[chartEle[dataLabel]] = chartEle[dataTable[k]];\r\n                        if (filteredDataTableArray.indexOf(chartEle[dataLabel]) === -1) {\r\n                            flippedDataTable['value ' + valueCount] = chartEle[dataLabel];\r\n                            valueCount++;\r\n                            filteredDataTableArray.push(chartEle[dataLabel]);\r\n                        }\r\n                    }\r\n                    flippedData.push(flippedObject);\r\n                }\r\n            }\r\n        }\r\n        flippedDataTable.label = dataLabel;\r\n        chart.flippedData = { chartData: flippedData, dataTable: flippedDataTable };\r\n\r\n        if (chart.config.type === 'bar' || chart.config.type === 'line' || chart.config.type === 'area') {\r\n            chart.flippedData.xAxisData = chart.setAxisData('x', chart.flippedData, dataTableKeys);\r\n            chart.flippedData.yAxisData = chart.setAxisData('y', chart.flippedData, dataTableKeys);\r\n            chart.flippedData.legendData = jvCharts.setBarLineLegendData(chart.flippedData);\r\n        } else {\r\n            console.log('Add additional chart type to set flipped series');\r\n        }\r\n    }\r\n\r\n    /**organizeChartData\r\n     *  reorders all data based on the sortLabel and sortType\r\n     *  -Only for chartData, does not work with flipped data\r\n     *\r\n     * @params sortLabel , sortType\r\n     * @returns [] sorted data\r\n     */\r\n    organizeChartData(sortParam, sortType) {\r\n        let chart = this,\r\n            organizedData,\r\n            dataType,\r\n            dataTableKeys = chart.data.dataTableKeys,\r\n            sortLabel = sortParam;\r\n\r\n        //If sortLabel doesn't exist, sort on the x axis label by default\r\n        if (sortLabel === 'none') {\r\n            for (let key of dataTableKeys) {\r\n                if (key.model === 'label') {\r\n                    sortLabel = key.name;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        //Remove underscores from sortLabel\r\n        if (sortLabel) {\r\n            sortLabel = sortLabel.replace(/_/g, ' ');\r\n        }\r\n\r\n        if (!chart.data.chartData[0][sortLabel]) {\r\n            //Check if the sort label is a calculatedBy field\r\n            let isValidSortLabel = false;\r\n            for (let key of dataTableKeys) {\r\n                if (key.operation.hasOwnProperty('calculatedBy') && key.operation.calculatedBy[0] === sortLabel) {\r\n                    sortLabel = key.name.replace(/_/g, ' ');\r\n                    isValidSortLabel = true;\r\n                    break;\r\n                }\r\n            }\r\n            //If it's not a valid sort label, return and don't sort the data\r\n            if (!isValidSortLabel) {\r\n                console.error('Not a valid sort');\r\n                //throw new Error('Not a valid sort');\r\n            }\r\n        }\r\n\r\n        //Check the data type to determine which logic to flow through\r\n        for (let key of dataTableKeys) {\r\n            //Loop through dataTableKeys to find sortLabel\r\n            if (key.name.replace(/_/g, ' ') === sortLabel) {\r\n                dataType = key.type;\r\n                break;\r\n            }\r\n        }\r\n\r\n        //Date sorting\r\n        if (dataType != null && dataType === 'DATE') {\r\n            organizedData = chart.data.chartData.sort((a, b) => {\r\n                return new Date(a[sortLabel]) - new Date(b[sortLabel]);\r\n            });\r\n        } else if (dataType != null && dataType === 'NUMBER') {\r\n            organizedData = chart.data.chartData.sort((a, b) => {\r\n                if (!isNaN(a[sortLabel]) && !isNaN(b[sortLabel])) {\r\n                    return a[sortLabel] - b[sortLabel];\r\n                }\r\n            });\r\n        } else {\r\n            organizedData = chart.data.chartData.sort((a, b) => {\r\n                if (!isNaN(a[sortLabel]) && !isNaN(b[sortLabel])) {\r\n                    if (parseFloat(a[sortLabel]) < parseFloat(b[sortLabel])) { //sort string ascending\r\n                        return -1;\r\n                    }\r\n                    if (parseFloat(a[sortLabel]) > parseFloat(b[sortLabel])) {\r\n                        return 1;\r\n                    }\r\n                    return 0;\r\n                }\r\n                if (a[sortLabel].toLowerCase() < b[sortLabel].toLowerCase()) { //sort string ascending\r\n                    return -1;\r\n                }\r\n                if (a[sortLabel].toLowerCase() > b[sortLabel].toLowerCase()) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n        }\r\n\r\n        switch (sortType) {\r\n            case 'sortAscending':\r\n            case 'ascending':\r\n                chart.data.chartData = organizedData;\r\n                break;\r\n            case 'sortDescending':\r\n            case 'descending':\r\n                chart.data.chartData = organizedData.reverse();\r\n                break;\r\n            default:\r\n                chart.data.chartData = organizedData;\r\n        }\r\n    }\r\n\r\n    /**setTipData\r\n     *\r\n     * creates data object to display in tooltip\r\n     * @params\r\n     * @returns {{}}\r\n     */\r\n    setTipData(d, i) {\r\n        let chart = this,\r\n            data = chart.currentData.chartData,\r\n            //Get Color from chartData and add to object\r\n            color = chart._vars.color,\r\n            title = d[chart.data.dataTable.label],\r\n            dataTable = {};\r\n\r\n        if (chart.config.type === 'treemap') {\r\n            for (let item in d) {\r\n                if (item !== chart.data.dataTable.label && item !== 'Parent') {\r\n                    dataTable[item] = d[item];\r\n                }\r\n            }\r\n        } else if (chart.config.type === 'bar' || chart.config.type === 'line' || chart.config.type === 'area') {\r\n            title = data[i][chart.data.dataTable.label];\r\n            for (let item in data[i]) {\r\n                if (item !== chart.data.dataTable.label) {\r\n                    dataTable[item] = data[i][item];\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n        } else if (chart.config.type === 'gantt') {\r\n            //Calculate length of dates\r\n            for (let item in data[i]) {\r\n                if (data[i].hasOwnProperty(item) && item !== chart.data.dataTable.group) {\r\n                    dataTable[item] = data[i][item];\r\n                }\r\n            }\r\n\r\n            let start,\r\n                end,\r\n                difference,\r\n                //Calculting duration of date ranges to add to tooltip\r\n                numPairs = Math.floor(Object.keys(chart.data.dataTable).length / 2);\r\n\r\n            for (let j = 1; j <= numPairs; j++) {\r\n                start = new Date(data[i][chart.data.dataTable['start ' + j]]);\r\n                end = new Date(data[i][chart.data.dataTable['end ' + j]]);\r\n                difference = end.getTime() - start.getTime();\r\n                dataTable['Duration ' + j] = Math.ceil(difference / (1000 * 60 * 60 * 24)) + ' days';\r\n            }\r\n\r\n            title = data[i][chart.data.dataTable.group];\r\n        } else if (chart.config.type === 'pie' || chart.config.type === 'radial') {\r\n            title = d.label;\r\n            for (let item in d) {\r\n                if (item !== 'label') {\r\n                    dataTable[item] = d[item];\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n            delete dataTable.outerRadius;\r\n        } else if (chart.config.type === 'circlepack' || chart.config.type === 'sunburst') {\r\n            title = d.data.name;\r\n            dataTable[chart.data.dataTable.value] = d.value;\r\n        } else if (chart.config.type === 'cloud') {\r\n            title = d[chart.data.dataTable.label];\r\n            dataTable[chart.data.dataTable.value] = d[chart.data.dataTable.value];\r\n            if (typeof d[chart.data.dataTable['tooltip 1']] !== 'undefined') {\r\n                dataTable[chart.data.dataTable['tooltip 1']] = d[chart.data.dataTable['tooltip 1']];\r\n            }\r\n        } else if (chart.config.type === 'heatmap') {\r\n            title = d.yAxisName + ' to ' + d.xAxisName;\r\n            if (d.hasOwnProperty('value')) {\r\n                dataTable.value = d.value;\r\n            }\r\n            for (let tooltip in d) {\r\n                if (tooltip.indexOf('tooltip') > -1) {\r\n                    dataTable[chart.data.dataTable[tooltip]] = d[tooltip];\r\n                }\r\n            }\r\n        } else if (chart.config.type === 'clustergram') {\r\n            //title = d.y_path.replace(/\\./g, '') + '</br>' + d.x_path.replace(/\\./g, '');\r\n            //Build strings for tooltip\r\n            let yTemp = d.y_path.split('.'),\r\n                yTempString = '',\r\n                xTemp = d.x_path.split('.'),\r\n                xTempString = '';\r\n\r\n            for (let k = 0; k < yTemp.length; k++) {\r\n                if (chart.data.dataTable['y_category ' + (k + 1)]) {\r\n                    yTempString += yTemp[k] += ' (' + chart.data.dataTable['y_category ' + (k + 1)] + ')';\r\n                } else {\r\n                    yTempString += yTemp[k] += ' (' + chart.data.dataTable.y_category + ')';\r\n                }\r\n\r\n                if (k !== yTemp.length - 1) {\r\n                    yTempString += '  ';\r\n                }\r\n            }\r\n            for (let k = 0; k < xTemp.length; k++) {\r\n                if (chart.data.dataTable['x_category ' + (k + 1)]) {\r\n                    xTempString += xTemp[k] += ' (' + chart.data.dataTable['x_category ' + (k + 1)] + ')';\r\n                } else {\r\n                    xTempString += xTemp[k] += ' (' + chart.data.dataTable.x_category + ')';\r\n                }\r\n\r\n                if (k !== xTemp.length - 1) {\r\n                    xTempString += '  ';\r\n                }\r\n            }\r\n\r\n            title = 'Y > ' + yTempString + '<br>' + 'X > ' + xTempString;\r\n            if (d.hasOwnProperty('value')) {\r\n                dataTable.value = d.value;\r\n            }\r\n            for (let tooltip in d) {\r\n                if (tooltip.indexOf('tooltip') > -1) {\r\n                    dataTable[chart.data.dataTable[tooltip]] = d[tooltip];\r\n                }\r\n            }\r\n        } else if (chart.config.type === 'sankey') {\r\n            title = d.source.name.slice(0, -2) + ' to ' + d.target.name.slice(0, -2);\r\n\r\n            if (d.hasOwnProperty('value')) {\r\n                dataTable.value = d.value;\r\n            }\r\n        } else if (chart.config.type === 'singleaxis') {\r\n            title = d.data[chart.data.dataTable.label];\r\n\r\n            for (let item in chart.data.dataTable) {\r\n                if (item !== 'label') {\r\n                    dataTable[chart.data.dataTable[item]] = d.data[chart.data.dataTable[item]];\r\n                }\r\n            }\r\n        } else {\r\n            for (let item in d) {\r\n                if (item !== chart.data.dataTable.label) {\r\n                    dataTable[item] = d[item];\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        return { 'data': d, 'tipData': dataTable, 'index': i, 'title': title, 'color': color, 'viz': chart.config.type };\r\n    }\r\n\r\n    /************************************************ Draw functions ******************************************************/\r\n\r\n    /**generateSVG\r\n     *creates an SVG element on the panel\r\n     *\r\n     * @params container, margin, name\r\n     *\r\n     */\r\n    generateSVG(legendData, customMarginParam, customSizeParam) {\r\n        let chart = this,\r\n            margin = {},\r\n            container = {},\r\n            dimensions = chart.chartDiv.node().getBoundingClientRect(),\r\n            customMargins = customMarginParam,\r\n            customSize = customSizeParam,\r\n            textWidth;\r\n\r\n        if (chart._vars.customMargins) {\r\n            customMargins = chart._vars.customMargins;\r\n        }\r\n\r\n        //set margins\r\n        if (!customMargins) {\r\n            //declare margins if they arent passed in\r\n            margin = {\r\n                top: 55,\r\n                right: 50,\r\n                left: 100,\r\n                bottom: 70\r\n            };\r\n            if (legendData != null) {\r\n                if (legendData.length <= 3) {\r\n                    margin.bottom = 70;\r\n                } else if (legendData.length <= 6) {\r\n                    margin.bottom = 85;\r\n                } else {\r\n                    margin.bottom = 130;\r\n                }\r\n            }\r\n        } else {\r\n            margin = customMargins;\r\n        }\r\n\r\n        //reduce margins if legend is toggled off\r\n        //TODO make this better\r\n        if (chart._vars.toggleLegend === false) {\r\n            if (chart.config.type === 'pie' || chart.config.type === 'radial' || chart.config.type === 'circlepack' || chart.config.type === 'heatmap') {\r\n                margin.left = 40;\r\n            } else if (chart.config.type === 'treemap' || chart.config.type === 'bar' || chart.config.type === 'gantt' || chart.config.type === 'scatter' || chart.config.type === 'line') {\r\n                margin.bottom = 40;\r\n            }\r\n        }\r\n\r\n        if (chart.config.type === 'clustergram') {\r\n            textWidth = jvCharts.getMaxWidthForAxisData('y', chart.leftLabels, chart._vars, dimensions, margin, chart.chartDiv, chart.config.type);\r\n            margin.left = Math.ceil(textWidth);\r\n            if (margin.left < 30) {\r\n                margin.left = 30;\r\n            }\r\n\r\n            textWidth = jvCharts.getMaxWidthForAxisData('y', chart.rightLabels, chart._vars, dimensions, margin, chart.chartDiv, chart.config.type);\r\n            margin.top = Math.ceil(textWidth);\r\n            if (margin.top < 30) {\r\n                margin.top = 30;\r\n            }\r\n        }\r\n\r\n        //set yAxis margins\r\n        if (chart.currentData && chart.currentData.yAxisData) {\r\n            textWidth = jvCharts.getMaxWidthForAxisData('y', chart.currentData.yAxisData, chart._vars, dimensions, margin, chart.chartDiv, chart.config.type);\r\n            if (textWidth > 100 && chart.config.type === 'heatmap') {\r\n                textWidth = 100;\r\n            }\r\n            chart._vars.heatmapYmargin = textWidth;\r\n            margin.left = Math.ceil(textWidth) + 30;\r\n        }\r\n\r\n        //set xAxis top margins\r\n        if (chart.config.type === 'heatmap' && chart.currentData && chart.currentData.xAxisData) {\r\n            textWidth = jvCharts.getMaxWidthForAxisData('x', chart.currentData.xAxisData, chart._vars, dimensions, margin, chart.chartDiv, chart.config.type);\r\n            //subtract space for tilt\r\n            textWidth = Math.ceil(textWidth);\r\n            if (textWidth > 100) {\r\n                textWidth = 100;\r\n            }\r\n            //specific to heatmap\r\n            //if (chart.config.type === 'heatmap') {\r\n            if (textWidth > 100) {\r\n                textWidth = 100;\r\n            } else if (textWidth < 80) {\r\n                textWidth = 80;\r\n            }\r\n            //}\r\n            chart._vars.heatmapXmargin = textWidth;\r\n            margin.top = textWidth;\r\n            customSize = {};\r\n            //set container\r\n            customSize.width = chart.currentData.xAxisData.values.length * 20;\r\n            customSize.height = chart.currentData.yAxisData.values.length * 20;\r\n\r\n            if (chart._vars.toggleLegend) {\r\n                let dummyObj = {};\r\n                dummyObj.values = chart.data.heatData;\r\n                dummyObj.values.sort((a, b) => a - b);\r\n                dummyObj.label = '';\r\n                dummyObj.min = dummyObj.values[0];\r\n                dummyObj.max = dummyObj.values[dummyObj.values.length - 1];\r\n\r\n                textWidth = jvCharts.getMaxWidthForAxisData('y', dummyObj, chart._vars, dimensions, margin, chart.chartDiv, chart.config.type);\r\n                chart.config.heatWidth = Math.ceil(textWidth) + 30;\r\n                margin.left = margin.left + chart.config.heatWidth;\r\n            }\r\n\r\n            if (customSize.width + margin.left + margin.right < dimensions.width) {\r\n                margin.right = parseInt(dimensions.width, 10) - margin.left - customSize.width - 20;\r\n            }\r\n            if (customSize.height + margin.top + margin.bottom < dimensions.height) {\r\n                margin.bottom = parseInt(dimensions.height, 10) - margin.top - customSize.height - 10;\r\n            }\r\n            customSize.width += margin.right + margin.left;\r\n            customSize.height += margin.top + margin.bottom;\r\n        }\r\n\r\n        //set container attributes\r\n        //Set svg size based on calculation margins or custom size if specified\r\n        if (customSize && customSize.hasOwnProperty('height')) {\r\n            container.height = customSize.height - margin.top - margin.bottom;\r\n        } else {\r\n            container.height = parseInt(dimensions.height, 10) - margin.top - margin.bottom;\r\n            if (container.height <= 50) {\r\n                margin.top = 10;\r\n                margin.bottom = 10;\r\n                container.height = parseInt(dimensions.height, 10) - margin.top - margin.bottom;\r\n                chart._vars.xLabelFontSize = 0;\r\n            }\r\n        }\r\n\r\n        if (customSize && customSize.hasOwnProperty('width')) {\r\n            container.width = customSize.width - margin.left - margin.right;\r\n        } else {\r\n            container.width = parseInt(dimensions.width, 10) - margin.left - margin.right;\r\n        }\r\n\r\n        //add margin and container to chart config object\r\n        chart.config.margin = margin;\r\n        chart.config.container = container;\r\n\r\n        //remove old svg if it exists\r\n        chart.svg = chart.chartDiv.select('svg').remove();\r\n\r\n        //svg layer\r\n        if (chart.config.type === 'heatmap' || chart.config.type === 'singleaxis') {\r\n            chart.svg = chart.chartDiv.append('svg')\r\n                .attr('class', 'editable-svg')\r\n                .attr('width', container.width + margin.left + margin.right)\r\n                .attr('height', container.height + margin.top + margin.bottom)\r\n                .append('g')\r\n                .attr('class', 'container')\r\n                .attr('transform', 'translate(' + margin.left + ',' + (margin.top) + ')');\r\n        } else if (chart.config.type === 'clustergram') {\r\n            var sizeWidth = chart.rightLeaves.length * 20;\r\n            if (sizeWidth < container.width) {\r\n                sizeWidth = container.width;\r\n            }\r\n\r\n            var sizeHeight = chart.leftLeaves.length * 20;\r\n            if (sizeHeight < container.height) {\r\n                sizeHeight = container.height;\r\n            }\r\n\r\n            chart.svg = chart.chartDiv.append('svg')\r\n                .attr('class', 'editable-svg')\r\n                .attr('width', sizeWidth + margin.left + margin.right)\r\n                .attr('height', sizeHeight + margin.top + margin.bottom)\r\n                .append('g')\r\n                .attr('transform', 'translate(' + margin.left + ',' + (margin.top) + ')');\r\n        } else {\r\n            chart.svg = chart.chartDiv.append('svg')\r\n                .attr('class', 'editable-svg')\r\n                .attr('width', container.width + margin.left + margin.right)\r\n                .attr('height', container.height + margin.top + margin.bottom)\r\n                .append('g')\r\n                .attr('transform', 'translate(' + margin.left + ',' + (margin.top) + ')');\r\n        }\r\n\r\n        //TODO move to edit mode\r\n        if (chart._vars.backgroundColor !== 'none') {\r\n            chart.colorBackground(chart._vars.backgroundColor);\r\n        }\r\n    }\r\n\r\n    /**generateXAxis\r\n     * creates x axis on the svg\r\n     *\r\n     * @params xAxisData\r\n     */\r\n    generateXAxis(xAxisData, ticks) {\r\n        //declare variables\r\n        let chart = this,\r\n            xAxis,\r\n            //Need to getXAxisScale each time so that axis updates on resize\r\n            xAxisScale = jvCharts.getAxisScale('x', xAxisData, chart.config.container, chart._vars),\r\n            containerHeight = chart.config.container.height,\r\n            containerWidth = chart.config.container.width,\r\n            xAxisClass = 'xAxisLabels editable editable-xAxis editable-text',\r\n            tickSize = 0,\r\n            axisHeight = containerHeight,\r\n            xContent,\r\n            xAxisGroup,\r\n            formatValueType;\r\n\r\n        //assign css class for edit mode\r\n        //if the axis is numbers add editable-num\r\n        if (xAxisData.dataType === 'NUMBER') {\r\n            xAxisClass += ' editable-num';\r\n        }\r\n\r\n        //remove previous xAxis container if its there\r\n        chart.svg.selectAll('.xAxisContainer').remove();\r\n\r\n        //Save the axis scale to chart object\r\n        chart.currentData.xAxisScale = xAxisScale;\r\n\r\n        if (chart.currentData.xAxisData.dataType === 'NUMBER') {\r\n            tickSize = 5;\r\n        }\r\n\r\n        //create xAxis drawing function\r\n        if (chart.config.type === 'singleaxis') {\r\n            xAxis = d3.axisTop(xAxisScale)\r\n                .tickSize(tickSize);\r\n        } else {\r\n            xAxis = d3.axisBottom(xAxisScale)\r\n                .tickSize(tickSize);\r\n        }\r\n\r\n        if (ticks) {\r\n            xAxis.ticks(ticks);\r\n        }\r\n\r\n        if (chart.config.type === 'singleaxis') {//For any axes that are on top of the data\r\n            axisHeight = 0;\r\n        }\r\n\r\n        xContent = chart.svg.append('g')\r\n            .attr('class', 'xAxisContainer')\r\n            .attr('transform', 'translate(0,' + (axisHeight) + ')');\r\n\r\n        xAxisGroup = xContent.append('g')\r\n            .attr('class', 'xAxis')\r\n            .call(xAxis);\r\n\r\n        formatValueType = jvCharts.jvFormatValueType(xAxisData.values);\r\n\r\n        //Styling the axis\r\n        xAxisGroup.select('path')\r\n            .attr('stroke', chart._vars.axisColor)\r\n            .attr('stroke-width', chart._vars.strokeWidth);\r\n\r\n        //Styling for ticks\r\n        xAxisGroup.selectAll('line')\r\n            .attr('stroke', chart._vars.axisColor)\r\n            .attr('stroke-width', chart._vars.stroke);\r\n\r\n        //Styling the labels for each piece of data\r\n        xAxisGroup.selectAll('text')\r\n            .attr('fill', chart._vars.fontColor)//Customize the color of axis labels\r\n            .attr('class', xAxisClass)\r\n            .style('text-anchor', 'middle')\r\n            .attr('font-size', chart._vars.fontSize)\r\n            .attr('transform', 'translate(0, 3)')\r\n            .text((d) => {\r\n                if (xAxisData.dataType === 'NUMBER' || chart._vars.rotateAxis) {\r\n                    return jvCharts.jvFormatValue(d, formatValueType);\r\n                }\r\n                return d;\r\n            });\r\n\r\n        //Styling the label for the entire axis\r\n        xContent.append('g')\r\n            .attr('class', 'xLabel')\r\n            .append('text')\r\n            .attr('class', 'xLabel editable editable-text editable-content')\r\n            .attr('text-anchor', 'middle')\r\n            .attr('font-size', chart._vars.fontSize)\r\n            .text(() => {\r\n                if (xAxisData.dataType === 'DATE') {\r\n                    return '';\r\n                }\r\n                return xAxisData.label;\r\n            })\r\n            .attr('transform', 'translate(' + containerWidth / 2 + ', 33)');\r\n    }\r\n\r\n    /**FormatXAxisLabels\r\n     *\r\n     * If x-axis labels are too long/overlapping, they will be hidden/shortened\r\n     */\r\n    formatXAxisLabels(dataLength, recursion) {\r\n        let chart = this,\r\n            showAxisLabels = true,\r\n            xAxisLength = chart.config.container.width,\r\n            textWidth = [],\r\n            formatValueType = null,\r\n            dataType = chart.currentData.xAxisData.dataType,\r\n            axisValues = chart.currentData.xAxisData.values;\r\n\r\n        if (dataType === 'NUMBER') {\r\n            formatValueType = jvCharts.jvFormatValueType(axisValues);\r\n        }\r\n\r\n        //create dummy text to determine computed text length for the axis labels\r\n        //necessary to do this because axis labels getBBox() is returning 0 since they do not seem to be drawn yet\r\n        chart.svg.append('g')\r\n            .selectAll('.dummyText')\r\n            .data(axisValues)\r\n            .enter()\r\n            .append('text')\r\n            .attr('font-family', 'sans-serif')\r\n            .attr('font-size', chart._vars.fontSize)\r\n            .text((d) => {\r\n                let returnVal = d;\r\n                if (dataType === 'NUMBER') {\r\n                    returnVal = jvCharts.jvFormatValue(d, formatValueType);\r\n                }\r\n                return returnVal;\r\n            })\r\n            .each(function () {\r\n                //adding 10px buffer\r\n                let thisWidth = this.getComputedTextLength() + 10;\r\n                textWidth.push(thisWidth);\r\n                this.remove(); //remove them just after displaying them\r\n            });\r\n\r\n        for (let textEle of textWidth) {\r\n            if (textEle > xAxisLength / dataLength) {\r\n                showAxisLabels = false;\r\n            }\r\n        }\r\n\r\n        if (showAxisLabels) {\r\n            if (recursion) {\r\n                chart.generateXAxis(chart.currentData.xAxisData, dataLength);\r\n            }\r\n            chart.svg.selectAll('.xAxisLabels').style('display', 'block');\r\n        } else if (dataLength > 1 && chart.currentData.xAxisData.dataType === 'NUMBER') {\r\n            //recursively keep decreasing to figure out ticks length to repaint the xAxis if its numeric\r\n            chart.formatXAxisLabels((dataLength - 1), true);\r\n        } else {\r\n            chart.svg.selectAll('.xAxis').selectAll('text').style('display', 'none');\r\n        }\r\n    }\r\n\r\n    /**generateYAxis\r\n     * creates y axis on the svg\r\n     *\r\n     * @params generateYAxis\r\n     */\r\n    generateYAxis(yAxisData) {\r\n        let chart = this,\r\n            yAxisScale = jvCharts.getAxisScale('y', yAxisData, chart.config.container, chart._vars),\r\n            yAxisClass = 'yAxisLabels editable editable-yAxis editable-text',\r\n            maxYAxisLabelWidth,\r\n            numberOfTicks = Math.floor(chart.config.container.height / 14),\r\n            yAxis,\r\n            yContent,\r\n            yAxisGroup,\r\n            forceFormatTypeTo = null,\r\n            ylabel = '';\r\n\r\n        //assign css class for edit mode\r\n        //if the axis is numbers add editable-num\r\n        if (yAxisData.dataType === 'NUMBER') {\r\n            yAxisClass += ' editable-num';\r\n        }\r\n\r\n        //Save y axis scale to chart object\r\n        chart.currentData.yAxisScale = yAxisScale;\r\n\r\n        //remove previous svg elements\r\n        chart.svg.selectAll('.yAxisContainer').remove();\r\n        chart.svg.selectAll('text.yLabel').remove();\r\n\r\n        if (numberOfTicks > 10) {\r\n            if (numberOfTicks < 20) {\r\n                numberOfTicks = 10;\r\n            } else if (numberOfTicks < 30) {\r\n                numberOfTicks /= 2;\r\n            } else {\r\n                numberOfTicks = 15;\r\n            }\r\n        }\r\n\r\n        //If all y-axis values are the same, only show a tick for that value. If value is 1, don't show any decimal places\r\n        if (yAxisData.values.length > 0 && !!yAxisData.values.reduce((a, b) => a === b ? a : NaN)) {\r\n            numberOfTicks = 1;\r\n            if (yAxisData.values[0] === 1) {\r\n                forceFormatTypeTo = 'nodecimals';\r\n            }\r\n        }\r\n        yAxis = d3.axisLeft()\r\n            .ticks(numberOfTicks)//Link to D3.svg.axis options: https://github.com/mbostock/d3/wiki/SVG-Axes\r\n            .scale(yAxisScale)//Sets the scale to use in the axis\r\n            .tickSize(5)//Sets the thickness of the axis line\r\n            .tickPadding(5);\r\n\r\n        //Hide Axis values if necessary\r\n        if (yAxisData.hideValues) {\r\n            yAxis.tickFormat('');\r\n        }\r\n        if (chart._vars.displayYAxisLabel) {\r\n            ylabel = yAxisData.label;\r\n        }\r\n\r\n        yContent = chart.svg.append('g')\r\n            .attr('class', 'yAxisContainer');\r\n\r\n        yContent.append('g')\r\n            .attr('class', 'yLabel')\r\n            .append('text')\r\n            .attr('class', 'yLabel editable editable-text editable-content')\r\n            .attr('text-anchor', 'start')\r\n            .attr('font-size', chart._vars.fontSize)\r\n            .attr('x', 0)\r\n            .attr('y', 0)\r\n            .attr('transform', 'translate(' + (-chart.config.margin.left + 10) + ', -10)')\r\n            .text(ylabel)\r\n            .attr('fill-opacity', 1);\r\n\r\n        yAxisGroup = yContent.append('g')\r\n            .attr('class', 'yAxis');\r\n\r\n\r\n        yAxisGroup\r\n            .call(yAxis);\r\n\r\n        //Styling for Axis\r\n        yAxisGroup.select('path')\r\n            .attr('stroke', chart._vars.axisColor)\r\n            .attr('stroke-width', chart._vars.strokeWidth);\r\n\r\n        maxYAxisLabelWidth = 0;\r\n\r\n        if (yAxisData.hideValues) {\r\n            //Styling for ticks\r\n            yAxisGroup.selectAll('line')\r\n                .attr('stroke-width', 0);\r\n        } else {\r\n            let formatValueType = jvCharts.jvFormatValueType(yAxisData.values);\r\n            //Styling for ticks\r\n            yAxisGroup.selectAll('line')\r\n                .attr('stroke', chart._vars.axisColor)\r\n                .attr('stroke-width', chart._vars.stroke);\r\n            //Styling for data labels on axis\r\n            yAxisGroup.selectAll('text')\r\n                .attr('fill', chart._vars.fontColor)//Customize the color of axis labels\r\n                .attr('class', yAxisClass)\r\n                .attr('transform', 'rotate(0)')//Add logic to rotate axis based on size of title\r\n                .attr('font-size', chart._vars.fontSize)\r\n                .append('svg:title');\r\n\r\n            yAxisGroup.selectAll('text')\r\n                .text((d) => {\r\n                    if (chart._vars.rotateAxis) {\r\n                        return d;\r\n                    }\r\n                    let maxLength = 13,\r\n                        current = '';\r\n                    if (d.length > maxLength) {\r\n                        current = d.substring(0, maxLength) + '...';\r\n                    } else {\r\n                        current = d;\r\n                    }\r\n\r\n                    if (forceFormatTypeTo !== null) {\r\n                        formatValueType = forceFormatTypeTo;\r\n                    }\r\n                    return jvCharts.jvFormatValue(current, formatValueType);\r\n                })\r\n                .each((d, i, j) => {\r\n                    if (j[0].getBBox().width > maxYAxisLabelWidth) {\r\n                        maxYAxisLabelWidth = j[0].getBBox().width;\r\n                    }\r\n                });\r\n            if (maxYAxisLabelWidth > 0) {\r\n                chart._vars.yLabelWidth = Math.ceil(maxYAxisLabelWidth) + 20;\r\n            }\r\n        }\r\n    }\r\n    /************************************************ Legend functions ******************************************************/\r\n\r\n    generateLegend(legendData, drawFunc) {\r\n        let chart = this,\r\n            svg = chart.svg,\r\n            legendElements;\r\n\r\n        if (!chart._vars.toggleLegend) {\r\n            return;\r\n        }\r\n        svg.selectAll('.legend').remove();\r\n\r\n        legendElements = jvCharts.generateLegendElements(chart, legendData, drawFunc);\r\n\r\n        //Returns the legend rectangles that are toggled on/off\r\n        if (drawFunc) {\r\n            jvCharts.attachClickEventsToLegend(chart, legendElements, drawFunc, legendData);\r\n        }\r\n\r\n        if (chart._vars.thresholds !== 'none' && chart._vars.thesholdLegend === true) {\r\n            if (chart.config.type === 'bar' || chart.config.type === 'area' || chart.config.type === 'line') {\r\n                if (chart.config.container.height > 300 && chart.config.container.width > 300) {\r\n                    jvCharts.generateThresholdLegend(chart);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**generateVerticalLegend\r\n     *\r\n     * creates and draws a vertical legend on the svg element\r\n     * @params svg, legendData, options, container, chartData, xAxisData, yAxisData, chartType\r\n     * @returns {{}}\r\n     */\r\n    generateVerticalLegend(paintFunc) {\r\n        let chart = this,\r\n            svg = chart.svg,\r\n            legendData = chart.currentData.legendData,\r\n            legendElements;\r\n\r\n        if (!chart._vars.toggleLegend) {\r\n            return;\r\n        }\r\n\r\n        svg.selectAll('.legend').remove();\r\n        legendElements = jvCharts.generateVerticalLegendElements(chart, legendData, paintFunc);\r\n\r\n        //Returns the legend rectangles that are toggled on/off\r\n        if (paintFunc !== 'generatePack') {\r\n            jvCharts.attachClickEventsToLegend(chart, legendElements, paintFunc, legendData);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * Generates a clip path that contains the contents of the chart area to the view of the chart area container\r\n     * i.e - don't want bars going below the x axis\r\n     */\r\n    generateClipPath() {\r\n        let chart = this,\r\n            svg = chart.svg,\r\n            type = chart.config.type,\r\n            containerName = '.' + type + '-container';\r\n\r\n        svg\r\n            .append('clipPath')\r\n            .attr('id', 'clip')\r\n            .append('rect')\r\n            .attr('x', 0)\r\n            .attr('y', 0)\r\n            .attr('width', chart.config.container.width)\r\n            .attr('height', chart.config.container.height);\r\n\r\n        //Break this out into logic for all other vizzes that have overflow issues\r\n        svg\r\n            .select(containerName)\r\n            .attr('clip-path', 'url(#clip)');\r\n    }\r\n\r\n    setThreshold(data) {\r\n        let chart = this,\r\n            thresholds = chart._vars.thresholds,\r\n            length = thresholds ? Object.keys(thresholds).length : 0;\r\n\r\n        if (thresholds !== 'none') {\r\n            for (let i = length - 1; i >= 0; i--) {\r\n                let threshold = thresholds[i];\r\n                //console.log(typeof data == \"date\");\r\n                if (data >= Number(threshold.threshold)) {\r\n                    return 'rect-' + i;\r\n                }\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n\r\n    generateLineThreshold() {\r\n        let chart = this,\r\n            svg = chart.svg,\r\n            width = chart.config.container.width,\r\n            height = chart.config.container.height,\r\n            thresholds = chart._vars.thresholds,\r\n            length = Object.keys(chart._vars.thresholds).length,\r\n            x = chart.currentData.xAxisScale,\r\n            y = chart.currentData.yAxisScale;\r\n\r\n        if (thresholds !== 'none') {\r\n            for (let i = 0; i < length; i++) {\r\n                let threshold = thresholds[i];\r\n                if (chart._vars.rotateAxis) {\r\n                    svg.append('line')\r\n                        .style('stroke', threshold.thresholdColor)\r\n                        .attr('x1', x(threshold.threshold))\r\n                        .attr('y1', 0)\r\n                        .attr('x2', x(threshold.threshold))\r\n                        .attr('y2', height)\r\n                        .attr('stroke-dasharray', ('3, 3'));\r\n                } else {\r\n                    svg.append('line')\r\n                        .style('stroke', threshold.thresholdColor)\r\n                        .attr('x1', 0)\r\n                        .attr('y1', y(threshold.threshold))\r\n                        .attr('x2', width)\r\n                        .attr('y2', y(threshold.threshold))\r\n                        .attr('stroke-dasharray', ('3, 3'));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    colorBackground(color) {\r\n        let chart = this;\r\n        chart._vars.backgroundColor = color;\r\n        chart.chartDiv.style('background-color', '' + color);\r\n    }\r\n\r\n\r\n    /**displayValues\r\n     *\r\n     * toggles data values that are displayed on the specific type of chart on the svg\r\n     * @params svg, barData, options, xAxisData, yAxisData, container\r\n     * @returns {{}}\r\n     */\r\n    displayValues() {\r\n        var chart = this,\r\n            svg = chart.svg,\r\n            container = chart.config.container,\r\n            chartData = chart.data.chartData,\r\n            xAxisData = chart.currentData.xAxisData,\r\n            yAxisData = chart.currentData.yAxisData,\r\n            legendOptions = chart._vars.legendOptions,\r\n            cleanedChartData = JSON.parse(JSON.stringify(chartData)),\r\n            data = [], //Only stores values\r\n            posCalc,\r\n            x,\r\n            y,\r\n            displayValuesGroup;\r\n\r\n        //If series is flipped, use flipped data; initialize with the full data set\r\n        if (chart._vars.seriesFlipped) {\r\n            chartData = chart.flippedData.chartData;\r\n            legendOptions = chart._vars.flippedLegendOptions;\r\n        }\r\n\r\n        if (chart._vars.displayValues === true) {\r\n            svg.selectAll('.displayValueContainer').remove();\r\n            if (legendOptions) {//Checking which legend elements are toggled on resize\r\n                for (let chartEle of cleanedChartData) {\r\n                    for (let legendEle of legendOptions) {\r\n                        if (legendEle.toggle === false) {\r\n                            delete chartEle[legendEle.element];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (let chartEle of cleanedChartData) {\r\n                let val = jvCharts.getDisplayValuesElement(chartEle, chart.currentData.dataTable, chart.config.type);\r\n                data.push(val);\r\n            }\r\n\r\n            posCalc = jvCharts.getPosCalculations(cleanedChartData, chart._vars, xAxisData, yAxisData, container, chart);\r\n            x = jvCharts.getAxisScale('x', xAxisData, container, chart._vars);\r\n            y = jvCharts.getAxisScale('y', yAxisData, container, chart._vars);\r\n\r\n            if (chart._vars.rotateAxis) {\r\n                //Add a container for display values over each bar group\r\n                displayValuesGroup =\r\n                    svg\r\n                        .append('g')\r\n                        .attr('class', 'displayValuesGroup')\r\n                        .selectAll('g')\r\n                        .data(data)\r\n                        .enter()\r\n                        .append('g')\r\n                        .attr('class', 'displayValuesGroup')\r\n                        .attr('transform', (d, i) => {\r\n                            let translate = (y.paddingOuter() * y.step()) + (y.step() * i);\r\n                            return 'translate(0,' + translate + ')';\r\n                        });\r\n\r\n                displayValuesGroup.selectAll('text')\r\n                    .data(d => d)\r\n                    .enter()\r\n                    .append('text')\r\n                    .attr('class', 'displayValue')\r\n                    .attr('x', (d, i, j) => { //sets the x position of the bar)\r\n                        return posCalc.width(d, i, j) + posCalc.x(d, i, j);\r\n                    })\r\n                    .attr('y', (d, i, j) => { //sets the y position of the bar\r\n                        return posCalc.y(d, i, j) + (posCalc.height(d, i, j) / 2);\r\n                    })\r\n                    .attr('dy', '.35em')\r\n                    .attr('text-anchor', 'start')\r\n                    .attr('fill', chart._vars.fontColor)\r\n                    .text((d) => {\r\n                        let returnText = Math.round(d * 100) / 100;//round to 2 decimals\r\n                        return jvCharts.jvFormatValue(returnText);\r\n                    })\r\n                    .attr('font-size', chart._vars.fontSize);\r\n            } else {\r\n                //Add a display values container over each bar group\r\n                displayValuesGroup = svg.append('g')\r\n                    .attr('class', 'displayValuesGroup')\r\n                    .selectAll('g')\r\n                    .data(data)\r\n                    .enter()\r\n                    .append('g')\r\n                    .attr('class', 'displayValuesGroup')\r\n                    .attr('transform', (d, i) => {\r\n                        let translate = (x.paddingOuter() * x.step()) + (x.step() * i);\r\n                        return 'translate(' + translate + ',0)';\r\n                    });\r\n                displayValuesGroup.selectAll('text')\r\n                    .data(d => d)\r\n                    .enter()\r\n                    .append('text')\r\n                    .attr('class', 'displayValue')\r\n                    .attr('x', (d, i, j) => { //sets the x position of the bar)\r\n                        return Math.round((posCalc.x(d, i, j) + (posCalc.width(d, i, j) / 2)));\r\n                    })\r\n                    .attr('y', (d, i, j) => { //sets the y position of the bar\r\n                        return Math.round(posCalc.y(d, i, j)) - 3;//+ posCalc.height(d, i, j) - 5);\r\n                    })\r\n                    .attr('text-anchor', 'middle')\r\n                    .attr('fill', chart._vars.fontColor)\r\n                    .text((d, i, j) => {\r\n                        if (chart._vars.stackToggle && chart._vars.displayValuesStackAsPercent) {\r\n                            let total = 0;\r\n                            for (let index = 0; index < j.length; index++) {\r\n                                total += j[index].__data__;\r\n                            }\r\n                            return jvCharts.jvFormatValue(d / total, 'percent');\r\n                        }\r\n\r\n                        return jvCharts.jvFormatValue(d);\r\n                    })\r\n                    .attr('font-size', chart._vars.fontSize);\r\n\r\n                if (chart._vars.stackToggle && chart._vars.displayValuesStackTotal) {\r\n                    let stackCounter = 0;\r\n                    svg.append('g')\r\n                        .attr('class', 'displayStackTotal')\r\n                        .selectAll('g')\r\n                        .data(data)\r\n                        .enter()\r\n                        .append('g')\r\n                        .attr('transform', (d, i) => {\r\n                            let translate = (x.paddingOuter() * x.step()) + (x.step() * i);\r\n                            return 'translate(' + translate + ',0)';\r\n                        })\r\n                        .selectAll('text')\r\n                        .data(d => d)\r\n                        .enter()\r\n                        .append('text')\r\n                        .attr('x', (d, i, j) => { //sets the x position of the bar)\r\n                            return Math.round((posCalc.x(d, i, j) + (posCalc.width(d, i, j) / 2)));\r\n                        })\r\n                        .attr('y', (d, i, j) => { //sets the y position of the bar\r\n                            return Math.round(posCalc.y(d, i, j)) - 18;//+ posCalc.height(d, i, j) - 5);\r\n                        })\r\n                        .attr('text-anchor', 'middle')\r\n                        .attr('fill', chart._vars.fontColor)\r\n                        .text((d, i, j) => {\r\n                            let yLength = chart.currentData.yAxisData.values.length,\r\n                                xLength = chart.currentData.xAxisData.values.length,\r\n                                indexMax = yLength / xLength,\r\n                                stack = 0;\r\n                            if ((i + 1) === indexMax) {\r\n                                for (let k = 0; j < indexMax; k++) {\r\n                                    stack += chart.currentData.yAxisData.values[indexMax * stackCounter + k];\r\n                                }\r\n                                stackCounter++;\r\n                                return jvCharts.jvFormatValue(stack);\r\n                            }\r\n                            return '';\r\n                        })\r\n                        .attr('font-size', chart._vars.fontSize);\r\n                }\r\n            }\r\n        } else {\r\n            svg.selectAll('.displayValueContainer').remove();\r\n        }\r\n    }\r\n\r\n    drawGridlines(axisData) {\r\n        let chart = this,\r\n            scaleData;\r\n\r\n        chart.svg.selectAll('g.gridLines').remove();\r\n        chart.svg.append('g')\r\n            .attr('class', 'gridLines');\r\n\r\n        //Determine if gridlines are horizontal or vertical based on rotateAxis\r\n        if (chart._vars.rotateAxis === true || chart.config.type === 'gantt' || chart.config.type === 'singleaxis') {\r\n            let gridLineHeight = chart.config.container.height,\r\n                xAxisScale = jvCharts.getAxisScale('x', axisData, chart.config.container, chart._vars);\r\n\r\n            if (axisData.dataType === 'STRING') {\r\n                scaleData = axisData.values;\r\n            } else if (axisData.dataType === 'NUMBER' || axisData.dataType === 'DATE') {\r\n                scaleData = xAxisScale.ticks(10);\r\n            }\r\n\r\n            chart.svg.select('.gridLines').selectAll('.horizontalGrid')\r\n                .data(scaleData)\r\n                .enter()\r\n                .append('line')\r\n                .attr('class', 'horizontalGrid')\r\n                .attr('x1', (d, i) => i > 0 ? xAxisScale(d) : 0)\r\n                .attr('x2', (d, i) => i > 0 ? xAxisScale(d) : 0)\r\n                .attr('y1', 0)\r\n                .attr('y2', (d, i) => i > 0 ? gridLineHeight : 0)\r\n                .attr('fill', 'none')\r\n                .attr('shape-rendering', 'crispEdges')\r\n                .attr('stroke', chart._vars.axisColor)\r\n                .attr('stroke-width', chart._vars.gridLineStrokeWidth);\r\n        } else {\r\n            let gridLineWidth = chart.config.container.width,\r\n                yAxisScale = jvCharts.getAxisScale('y', axisData, chart.config.container, chart._vars);\r\n\r\n            if (axisData.dataType === 'STRING') {\r\n                scaleData = axisData.values;\r\n            } else if (axisData.dataType === 'NUMBER' || axisData.dataType === 'DATE') {\r\n                scaleData = yAxisScale.ticks(10);\r\n            }\r\n\r\n            chart.svg.select('.gridLines').selectAll('.horizontalGrid').data(scaleData).enter()\r\n                .append('line')\r\n                .attr('class', 'horizontalGrid')\r\n                .attr('x1', 0)\r\n                .attr('x2', (d, i) => i > 0 ? gridLineWidth : 0)\r\n                .attr('y1', (d, i) => i > 0 ? yAxisScale(d) : 0)\r\n                .attr('y2', (d, i) => i > 0 ? yAxisScale(d) : 0)\r\n                .attr('fill', 'none')\r\n                .attr('shape-rendering', 'crispEdges')\r\n                .attr('stroke', chart._vars.axisColor)\r\n                .attr('stroke-width', chart._vars.gridLineStrokeWidth);\r\n        }\r\n    }\r\n\r\n    /**getBarDataFromOptions\r\n    * ^^ not just a bar function, line and area also use it\r\n    *\r\n    * Assigns the correct chart data to current data using the chart.options\r\n    */\r\n    getBarDataFromOptions() {\r\n        let chart = this,\r\n            dataObj = {},\r\n            data = chart.data;\r\n\r\n        //set flipped data if necessary\r\n        if (chart._vars.seriesFlipped) {\r\n            data = chart.flippedData;\r\n        }\r\n\r\n        dataObj.chartData = data.chartData;\r\n        dataObj.legendData = data.legendData;\r\n        dataObj.dataTable = data.dataTable;\r\n        chart._vars.color = data.color;\r\n        if (chart._vars.rotateAxis === true) {\r\n            dataObj.xAxisData = data.yAxisData;\r\n            dataObj.yAxisData = data.xAxisData;\r\n        } else {\r\n            dataObj.xAxisData = data.xAxisData;\r\n            dataObj.yAxisData = data.yAxisData;\r\n        }\r\n\r\n        return dataObj;\r\n    }\r\n\r\n    /************************************************ Utility functions ******************************************************/\r\n\r\n    /**highlightItems\r\n     *\r\n     * highlights items on the svg element\r\n     * @params items, svg\r\n     * @returns {{}}\r\n     */\r\n    highlightItem(items, tag, highlightIndex, highlightUri) {\r\n        let chart = this,\r\n            svg = chart.svg;\r\n\r\n        //TODO remove if statements\r\n        if (highlightIndex >= 0) {\r\n            if (chart.config.type === 'pie') {\r\n                //set all circles stroke width to 0\r\n                svg.select('.pie-container').selectAll(tag)\r\n                    .attr('stroke', chart._vars.pieBorder)\r\n                    .attr('stroke-width', 1);\r\n                //highlight necessary pie slices\r\n                svg.select('.pie-container')\r\n                    .selectAll(tag)\r\n                    .filter('.highlight-class-' + highlightIndex)\r\n                    .attr('stroke', chart._vars.highlightBorderColor)\r\n                    .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n            }\r\n            if (chart.config.type === 'scatterplot') {\r\n                //set all circles stroke width to 0\r\n                svg.select('.scatter-container').selectAll(tag)\r\n                    .attr('stroke-width', 0);\r\n                //highlight necessary scatter dots\r\n                svg.select('.scatter-container').selectAll(tag).filter('.scatter-circle-' + highlightIndex)\r\n                    .attr('stroke', chart._vars.highlightBorderColor)\r\n                    .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n            }\r\n        } else if (highlightUri) {\r\n            if (chart.config.type === 'bar') {\r\n                //set all bars stroke width to 0\r\n                svg.select('.bar-container').selectAll(tag)\r\n                    .attr('stroke', 0)\r\n                    .attr('stroke-width', 0);\r\n                //highlight necessary bars\r\n                svg.select('.bar-container').selectAll('.highlight-class-' + highlightUri)\r\n                    .attr('stroke', chart._vars.highlightBorderColor)\r\n                    .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n            }\r\n            if (chart.config.type === 'line' || chart.config.type === 'area') {\r\n                //set all circles stroke width to 0\r\n                svg.select('.line-container').selectAll(tag)\r\n                    .attr('stroke', 0)\r\n                    .attr('stroke-width', 0);\r\n                //highlight necessary cirlces\r\n                svg.select('.line-container').selectAll(tag).filter('.highlight-class-' + highlightUri)\r\n                    .attr('stroke', chart._vars.highlightBorderColor)\r\n                    .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n            }\r\n        } else {\r\n            console.log('need to pass highlight index to highlight item');\r\n        }\r\n    }\r\n\r\n    /**\r\n    *@desc Removes highlights that were applied with related insights\r\n    *\r\n    */\r\n    removeHighlight() {\r\n        let chart = this,\r\n            svg = chart.svg;\r\n        if (chart.config.type === 'pie') {\r\n            //set all circles stroke width to 0\r\n            svg.select('.pie-container').selectAll('path')\r\n                .attr('stroke', chart._vars.pieBorder)\r\n                .attr('stroke-width', 0);\r\n        }\r\n        if (chart.config.type === 'scatterplot') {\r\n            svg.select('.scatter-container').selectAll('circle')\r\n                .attr('stroke-width', 0);\r\n        }\r\n        if (chart.config.type === 'bar') {\r\n            svg.select('.bar-container').selectAll('rect')\r\n                .attr('stroke', 0)\r\n                .attr('stroke-width', 0);\r\n        }\r\n        if (chart.config.type === 'line' || chart.config.type === 'area') {\r\n            svg.select('.line-container').selectAll('circle')\r\n                .attr('stroke', 0)\r\n                .attr('stroke-width', 0);\r\n        }\r\n    }\r\n\r\n    static getViewForValue(input) {\r\n        return input.replace(/\\s/g, '_')\r\n            .replace(/\\./g, '__period__')\r\n            .replace(/:/g, '__colon__')\r\n            .replace(/~/g, '__tilde__')\r\n            .replace(/!/g, '__exclamation__')\r\n            .replace(/@/g, '__atsign__')\r\n            .replace(/#/g, '__numbersign__')\r\n            .replace(/\\$/g, '__dollarsign__')\r\n            .replace(/%/g, '__percentsign__')\r\n            .replace(/\\^/g, '__caret__')\r\n            .replace(/&/g, '__ampersand__')\r\n            .replace(/\\*/g, '__asterisk__')\r\n            .replace(/\\(/g, '__openparentheses__')\r\n            .replace(/\\)/g, '__closeparentheses__')\r\n            .replace(/;/g, '__semicolon__')\r\n            .replace(/'/g, '__apostrophe__')\r\n            .replace(/\"/g, '__quote__')\r\n            .replace(/\\?/g, '__questionmark__')\r\n            .replace(/</g, '__lessthansign__')\r\n            .replace(/>/g, '__greaterthansign__')\r\n            .replace(/\\[/g, '__openbracket__')\r\n            .replace(/]/g, '__closebracket__')\r\n            .replace(/\\\\/g, '__backslash__')\r\n            .replace(/\\//g, '__forwardslash__')\r\n            .replace(/{/g, '__opencurlybrace__')\r\n            .replace(/}/g, '__closecurlybrace__')\r\n            .replace(/\\|/g, '__pipe__')\r\n            .replace(/`/g, '__grave__')\r\n            .replace(/\\+/g, '__plussign__')\r\n            .replace(/\\=/g, '__equalssign__')\r\n            .replace(/,/g, '__comma__');\r\n    }\r\n\r\n    static getRawForValue(input) {\r\n        return input.replace(/_/g, ' ')\r\n            .replace(/__period__/g, '.')\r\n            .replace(/__colon__/g, ':')\r\n            .replace(/__tilde__/g, '~')\r\n            .replace(/__exclamation__/g, '!')\r\n            .replace(/__atsign__/g, '@')\r\n            .replace(/__numbersign__/g, '#')\r\n            .replace(/__dollarsign__/g, '$')\r\n            .replace(/__percentsign__/g, '%')\r\n            .replace(/__caret__/g, '^')\r\n            .replace(/__ampersand__/g, '&')\r\n            .replace(/__asterisk__/g, '*')\r\n            .replace(/__openparentheses__/g, '(')\r\n            .replace(/__closeparentheses__/g, ')')\r\n            .replace(/__semicolon__/g, ';')\r\n            .replace(/__apostrophe__/g, \"'\")\r\n            .replace(/__quote__/g, '\"')\r\n            .replace(/__questionmark__/g, '?')\r\n            .replace(/__lessthansign__/g, '<')\r\n            .replace(/__greaterthansign__/g, '>')\r\n            .replace(/__openbracket__/g, '[')\r\n            .replace(/__closebracket__/g, ']')\r\n            .replace(/__backslash__/g, '\\\\')\r\n            .replace(/__forwardslash__/g, '/')\r\n            .replace(/__opencurlybrace__/g, '{')\r\n            .replace(/__closecurlybrace__/g, '}')\r\n            .replace(/__pipe__/g, '|')\r\n            .replace(/__grave__/g, '`')\r\n            .replace(/__plussign__/g, '+')\r\n            .replace(/__equalssign__/g, '=')\r\n            .replace(/__comma__/g, ',');\r\n    }\r\n\r\n    static jvFormatValue(val, formatType) {\r\n        if (!isNaN(val)) {\r\n            let formatNumber = d3.format('.0f');\r\n\r\n            if (formatType === 'billions') {\r\n                return formatNumber(val / 1e9) + 'B';\r\n            } else if (formatType === 'millions') {\r\n                return formatNumber(val / 1e6) + 'M';\r\n            } else if (formatType === 'thousands') {\r\n                return formatNumber(val / 1e3) + 'K';\r\n            } else if (formatType === 'decimals') {\r\n                formatNumber = d3.format('.2f');\r\n                return formatNumber(val);\r\n            } else if (formatType === 'nodecimals') {\r\n                return formatNumber(val);\r\n            } else if (formatType === 'percent') {\r\n                let p = Math.max(0, d3.precisionFixed(0.05) - 2),\r\n                    expression = d3.format('.' + p + '%');\r\n                return expression(val);\r\n            } else if (formatType === '') {\r\n                return val;\r\n            }\r\n\r\n            if (val === 0) {\r\n                return 0;\r\n            }\r\n\r\n            if (Math.abs(val) >= 1000000000) {\r\n                //Billions\r\n                return formatNumber(val / 1e9) + 'B';\r\n            } else if (Math.abs(val) >= 1000000) {\r\n                //Millions\r\n                return formatNumber(val / 1e6) + 'M';\r\n            } else if (Math.abs(val) >= 1000) {\r\n                //Thousands\r\n                return formatNumber(val / 1e3) + 'K';\r\n            } else if (Math.abs(val) <= 10) {\r\n                //2 decimals\r\n                formatNumber = d3.format('.2f');\r\n            }\r\n            return formatNumber(val);\r\n        }\r\n        return val;\r\n    }\r\n\r\n    /**\r\n     * @param the set of values that you want to format uniformly\r\n     * @return '' the level of formatting for the group of data\r\n     * Problem with jvFormatValue function is that if you pass in values 10, 20... 90, 100, 1120, 120\r\n     * you will get the formats 10.00, 20.00 .... 100, 110, 120 when you want 10, 20, ... 100, 110\r\n     * --Format the value based off of the highest number in the group\r\n     */\r\n    static jvFormatValueType(valueArray, dataType) {\r\n        if (valueArray != null && dataType !== 'STRING') {\r\n            let max = Math.max.apply(null, valueArray),\r\n                //After getting the max, check the min\r\n                min = Math.min.apply(null, valueArray),\r\n                range = max - min,\r\n                incrememnt = Math.abs(Math.round(range / 10));//10 being the number of axis labels to show\r\n\r\n            if (Math.abs(incrememnt) >= 1000000000) {\r\n                return 'billions';\r\n            } else if (Math.abs(incrememnt) >= 1000000) {\r\n                return 'millions';\r\n            } else if (Math.abs(incrememnt) >= 1000) {\r\n                return 'thousands';\r\n            } else if (Math.abs(incrememnt) <= 10) {\r\n                return 'decimals';\r\n            } else if (Math.abs(incrememnt) >= 10) {\r\n                return 'nodecimals';\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n\r\n    /**getFormatExpression\r\n     *\r\n     * @desc returns the d3 format expression for a given option\r\n     * @params option\r\n     * @returns string expression\r\n     */\r\n    static getFormatExpression(option) {\r\n        let expression = '',\r\n            p;\r\n        if (option === 'currency') {\r\n            expression = d3.format('$,');\r\n        }\r\n        if (option === 'fixedCurrency') {\r\n            expression = d3.format('($.2f');\r\n        }\r\n        if (option === 'percent') {\r\n            p = Math.max(0, d3.precisionFixed(0.05) - 2);\r\n            expression = d3.format('.' + p + '%');\r\n        }\r\n        if (option === 'millions') {\r\n            p = d3.precisionPrefix(1e5, 1.3e6);\r\n            expression = d3.formatPrefix('.' + p, 1.3e6);\r\n        }\r\n        if (option === 'commas') {\r\n            expression = d3.format(',.0f');\r\n        }\r\n        if (option === 'none' || option === '') {\r\n            expression = d3.format('');\r\n        }\r\n        if (option === 'displayValues') {\r\n            expression = d3.format(',.2f');\r\n        }\r\n\r\n        return expression;\r\n    }\r\n\r\n    /**getToggledData\r\n     *\r\n     * Gets the headers of the data to be drawn and filters the data based on that\r\n     * @params chartData, dataHeaders\r\n     */\r\n    static getToggledData(data, dataHeaders) {\r\n        let legendToggleArray = this.getLegendElementToggleArray(dataHeaders, data.legendData),\r\n            newData = JSON.parse(JSON.stringify(data.chartData));\r\n        if (legendToggleArray) {\r\n            for (let i = 0; i < data.chartData.length; i++) {\r\n                for (let toggleKey of legendToggleArray) {\r\n                    if (toggleKey.toggle === false) {\r\n                        delete newData[i][toggleKey.element];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return newData;\r\n    }\r\n\r\n    /**\r\n     * @name getLegendElementToggleArray\r\n     * @desc Gets an array of legend elements with true/false tags for if toggled\r\n     * @param {any} selectedHeaders - headers selected by user\r\n     * @param {any} allHeaders - all available headers in the visual\r\n     * @returns {array} - array of legend elements\r\n     */\r\n    static getLegendElementToggleArray(selectedHeaders, allHeaders) {\r\n        let legendToggleArray = [];\r\n        for (let header of allHeaders) {\r\n            legendToggleArray.push({ element: header });\r\n        }\r\n\r\n        for (let toggleKey of legendToggleArray) {\r\n            for (let header of selectedHeaders) {\r\n                if (toggleKey.element === header) {\r\n                    toggleKey.toggle = true;\r\n                    continue;\r\n                }\r\n            }\r\n            if (toggleKey.toggle !== true) {\r\n                toggleKey.toggle = false;\r\n            }\r\n        }\r\n        return legendToggleArray;\r\n    }\r\n\r\n    /**\r\n     * generateLegendElements\r\n     *\r\n     * @param {any} chart - chart object\r\n     * @param {any} legendData -legend data for visual\r\n     * @param {any} drawFunc - redraw function for visual\r\n     * @returns {object} - legend rectangles\r\n     */\r\n    static generateLegendElements(chart, legendData, drawFunc) {\r\n        let svg = chart.svg,\r\n            container = chart.config.container,\r\n            legend,\r\n            legendRow = 0,\r\n            legendColumn = 0,\r\n            legendDataLength = legendData.length,\r\n            legendElementToggleArray,\r\n            legendRectangles,\r\n            legendText;\r\n\r\n        if (!chart._vars.legendIndex) {\r\n            chart._vars.legendIndex = 0;\r\n        }\r\n\r\n        if (!chart._vars.legendIndexMax) {\r\n            chart._vars.legendIndexMax = Math.floor(legendDataLength / chart._vars.legendMax - 0.01);\r\n        }\r\n\r\n        //if legend headers don't exist, set them equal to legend data\r\n        if (!chart._vars.legendHeaders && !chart._vars.seriesFlipped) {\r\n            chart._vars.legendHeaders = JSON.parse(JSON.stringify(legendData));\r\n        } else if (!chart._vars.flippedLegendHeaders && chart._vars.seriesFlipped) {\r\n            chart._vars.flippedLegendHeaders = JSON.parse(JSON.stringify(legendData));\r\n        }\r\n        //Set legend element toggle array based on if series is flipped\r\n        if (!chart._vars.seriesFlipped) {\r\n            legendElementToggleArray = this.getLegendElementToggleArray(chart._vars.legendHeaders, legendData);\r\n        } else {\r\n            legendElementToggleArray = this.getLegendElementToggleArray(chart._vars.flippedLegendHeaders, legendData);\r\n        }\r\n\r\n        legend = svg.append('g')\r\n            .attr('class', 'legend');\r\n\r\n        //Adding colored rectangles to the legend\r\n        legendRectangles = legend.selectAll('rect')\r\n            .data(legendData)\r\n            .enter()\r\n            .append('rect')\r\n            .attr('class', 'legendRect')\r\n            .attr('x', (d, i) => {\r\n                let legendPos;\r\n                if (i % (chart._vars.legendMax / 3) === 0 && i > 0) {\r\n                    legendColumn = 0;\r\n                }\r\n                legendPos = 200 * legendColumn;\r\n                legendColumn++;\r\n                return legendPos;\r\n            })\r\n            .attr('y', (d, i) => {\r\n                if (i % (chart._vars.legendMax / 3) === 0 && i > 0) {\r\n                    legendRow++;\r\n                }\r\n                if (i % chart._vars.legendMax === 0 && i > 0) {\r\n                    legendRow = 0;\r\n                }\r\n                return (container.height + 10) + (15 * (legendRow + 1)) - 5; //Increment row when column limit is reached\r\n            })\r\n            .attr('width', chart._vars.gridSize)\r\n            .attr('height', chart._vars.gridSize)\r\n            .attr('fill', (d, i) => this.getColors(chart._vars.color, i, legendData[i]))\r\n            .attr('display', (d, i) => {\r\n                if (i >= (chart._vars.legendIndex * chart._vars.legendMax) && i <= ((chart._vars.legendIndex * chart._vars.legendMax) + (chart._vars.legendMax - 1))) {\r\n                    return 'all';\r\n                }\r\n                return 'none';\r\n            })\r\n            .attr('opacity', (d, i) => {\r\n                if (!legendElementToggleArray) {\r\n                    return '1';\r\n                }\r\n                if (legendElementToggleArray[i].toggle === true) {\r\n                    return '1';\r\n                }\r\n                return '0.2';\r\n            });\r\n\r\n        legendRow = 0;\r\n        legendColumn = 0;\r\n\r\n        //Adding text labels for each rectangle in legend\r\n        legendText = legend.selectAll('text')\r\n            .data(legendData)\r\n            .enter()\r\n            .append('text')\r\n            .attr('class', (d, i) => 'legendText editable editable-text editable-content editable-legend-' + i)\r\n            .attr('x', (d, i) => {\r\n                if (i % (chart._vars.legendMax / 3) === 0 && i > 0) {\r\n                    legendColumn = 0;\r\n                }\r\n                let legendPos = 200 * legendColumn;\r\n                legendColumn++;\r\n                return legendPos + 17;\r\n            })\r\n            .attr('y', (d, i) => {\r\n                if (i % (chart._vars.legendMax / 3) === 0 && i > 0) {\r\n                    legendRow++;\r\n                }\r\n                if (i % chart._vars.legendMax === 0 && i > 0) {\r\n                    legendRow = 0;\r\n                }\r\n                return (container.height + 10) + (15 * (legendRow + 1)); //Increment row when column limit is reached\r\n            })\r\n            .attr('text-anchor', 'start')\r\n            .attr('dy', '0.35em') //Vertically align with node\r\n            .attr('fill', chart._vars.fontColor)\r\n            .attr('font-size', chart._vars.fontSize)\r\n            .attr('display', (d, i) => {\r\n                if (i >= (chart._vars.legendIndex * chart._vars.legendMax) && i <= ((chart._vars.legendIndex * chart._vars.legendMax) + (chart._vars.legendMax - 1))) {\r\n                    return 'all';\r\n                }\r\n                return 'none';\r\n            })\r\n            .text((d, i) => {\r\n                let elementName = legendData[i];\r\n                if (chart.config.type === 'gantt') {\r\n                    elementName = legendData[i].slice(0, -5);//Removing last 5 characters of legend label---i.e plannedSTART -> planned\r\n                }\r\n                if (elementName.length > 20) {\r\n                    return elementName.substring(0, 19) + '...';\r\n                }\r\n                return elementName;\r\n            });\r\n\r\n        //Adding info box to legend elements when hovering over\r\n        legendText\r\n            .data(legendData)\r\n            .append('svg:title')\r\n            .text(d => d);\r\n\r\n\r\n        //Only create carousel if the number of elements exceeds one legend \"page\"\r\n        if (chart._vars.legendIndexMax > 0) {\r\n            this.createCarousel(chart, legendData, drawFunc);\r\n        }\r\n        //Centers the legend in the panel\r\n        if (legend) {\r\n            let legendWidth = legend.node().getBBox().width;\r\n            legend.attr('transform', 'translate(' + ((container.width - legendWidth) / 2) + ', 30)');\r\n        }\r\n\r\n        return legendRectangles;\r\n    }\r\n\r\n    /**updateDataFromLegend\r\n     *\r\n     * Returns a list of data headers that should be displayed in viz\r\n     * based off what is toggled on/off in legend\r\n     * @params legendData\r\n     */\r\n    static updateDataFromLegend(legendData) {\r\n        let data = [],\r\n            legendElement = legendData[0];\r\n        for (let ele of legendElement) {\r\n            if (ele.attributes.opacity.value !== '0.2') {\r\n                //If not white, add it to the updated data array\r\n                data.push(ele.__data__);\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /**createCarousel\r\n     *\r\n     * Draws the horizontal legend carousel\r\n     * @params chart, legendData, drawFunc\r\n     */\r\n    static createCarousel(chart, legendData, drawFunc) {\r\n        let svg = chart.svg,\r\n            container = chart.config.container,\r\n            legendPolygon;\r\n\r\n        //Adding carousel to legend\r\n        svg.selectAll('.legend-carousel').remove();\r\n        svg.selectAll('#legend-text-index').remove();\r\n\r\n        legendPolygon = svg.append('g')\r\n            .attr('class', 'legend-carousel');\r\n\r\n        //Creates left navigation arrow for carousel\r\n        legendPolygon.append('polygon')\r\n            .attr('id', 'leftChevron')\r\n            .attr('class', 'pointer-cursor')\r\n            .style('fill', chart._vars.legendArrowColor)\r\n            .attr('transform', 'translate(0,0)')\r\n            .attr('points', '0,7.5, 15,0, 15,15')\r\n            .on('click', () => {\r\n                if (chart._vars.legendIndex >= 1) {\r\n                    chart._vars.legendIndex--;\r\n                }\r\n                svg.selectAll('.legend').remove();\r\n                let legendElements = this.generateLegendElements(chart, legendData, drawFunc);\r\n                this.attachClickEventsToLegend(chart, legendElements, drawFunc, legendData);\r\n            })\r\n            .attr({\r\n                display: () => {\r\n                    if (chart._vars.legendIndex === 0) {\r\n                        return 'none';\r\n                    }\r\n                    return 'all';\r\n                }\r\n            });\r\n\r\n        //Creates page number for carousel navigation\r\n        legendPolygon.append('text')\r\n            .attr('id', 'legend-text-index')\r\n            .attr('x', 35)\r\n            .attr('y', 12.5)\r\n            .style('text-anchor', 'start')\r\n            .style('font-size', chart._vars.fontSize)\r\n            .text(() => (chart._vars.legendIndex + 1) + ' / ' + (chart._vars.legendIndexMax + 1))\r\n            .attr({\r\n                display: () => {\r\n                    if (chart._vars.legendIndexMax === 0) {\r\n                        return 'none';\r\n                    }\r\n                    return 'all';\r\n                }\r\n            });\r\n\r\n        //Creates right navigation arrow for carousel\r\n        legendPolygon.append('polygon')\r\n            .attr('id', 'rightChevron')\r\n            .attr('class', 'pointer-cursor')\r\n            .style('fill', chart._vars.legendArrowColor)\r\n            .attr('transform', 'translate(85,0)')\r\n            .attr('points', '15,7.5, 0,0, 0,15')\r\n            .on('click', () => {\r\n                if (chart._vars.legendIndex < chart._vars.legendIndexMax) {\r\n                    chart._vars.legendIndex++;\r\n                }\r\n                svg.selectAll('.legend').remove();\r\n                let legendElements = this.generateLegendElements(chart, legendData, drawFunc);\r\n                this.attachClickEventsToLegend(chart, legendElements, drawFunc, legendData);\r\n            })\r\n            .attr({\r\n                display: () => {\r\n                    if (chart._vars.legendIndex === chart._vars.legendIndexMax) {\r\n                        return 'none';\r\n                    }\r\n                    return 'all';\r\n                }\r\n            });\r\n\r\n        //Centers the legend polygons in the panel\r\n        if (legendPolygon) {\r\n            let legendPolygonWidth = legendPolygon.node().getBBox().width;\r\n            legendPolygon.attr('transform', 'translate(' + ((container.width - legendPolygonWidth) / 2) + ',' + (container.height + 105) + ')');\r\n        }\r\n    }\r\n\r\n\r\n    /**getPlotData\r\n     *\r\n     * Returns only data values to be plotted; input is the data object\r\n     * @params objectData, chart\r\n     */\r\n    static getPlotData(objectData, chart) {\r\n        let data = [],\r\n            objDataNew = JSON.parse(JSON.stringify(objectData));//Copy of barData\r\n        for (let objEle of objDataNew) {\r\n            let group = [];\r\n            for (let legendEle of chart.currentData.legendData) {\r\n                if (typeof objEle[legendEle] !== 'undefined') {\r\n                    group.push(objEle[legendEle]);\r\n                }\r\n            }\r\n            data.push(group);\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /**getPosCalculations\r\n     *Holds the logic for positioning all bars on a bar chart (depends on toolData)\r\n     *\r\n     * @params svg, chartData, options, xAxisData, yAxisData, container\r\n     * @returns {{}}\r\n     */\r\n    static getPosCalculations(chartData, _vars, xAxisData, yAxisData, container, chart) {\r\n        let x = jvCharts.getAxisScale('x', xAxisData, container, _vars),\r\n            y = jvCharts.getAxisScale('y', yAxisData, container, _vars),\r\n            scaleFactor = 1,\r\n            data = [],\r\n            size = 0,\r\n            positionFunctions = {};\r\n\r\n        for (let item in chart.currentData.dataTable) {\r\n            if (item !== 'label' && item.indexOf('tooltip') === -1) {\r\n                size++;\r\n            }\r\n        }\r\n\r\n        for (let chartEle of chartData) {\r\n            let val = [];\r\n            for (let key in chartEle) {\r\n                if (chartEle.hasOwnProperty(key)) {\r\n                    val.push(chartEle[key]);\r\n                }\r\n            }\r\n            data.push(val.slice(1, chartEle.length));\r\n        }\r\n\r\n        if (_vars.rotateAxis === true && _vars.stackToggle === true) {\r\n            positionFunctions.startx = () => 0;\r\n            positionFunctions.starty = () => 0;\r\n            positionFunctions.startwidth = () => 0;\r\n            positionFunctions.startheight = () => y.bandwidth() * 0.95;\r\n            positionFunctions.x = (d, i, j) => {\r\n                let increment = 0;//Move the x up by the values that come before it\r\n                for (let k = i - 1; k >= 0; k--) {\r\n                    if (!isNaN(j[k].__data__)) {\r\n                        increment += j[k].__data__;\r\n                    }\r\n                }\r\n                return x(increment) === 0 ? 1 : x(increment);\r\n            };\r\n            positionFunctions.y = () => 0;\r\n            positionFunctions.width = d => Math.abs(x(0) - x(d));\r\n            positionFunctions.height = () => y.bandwidth() * 0.95;\r\n        } else if (_vars.rotateAxis === true && _vars.stackToggle === false) {\r\n            positionFunctions.startx = () => 0;\r\n            positionFunctions.starty = (d, i) => y.bandwidth() / size * i;\r\n            positionFunctions.startwidth = () => 0;\r\n            positionFunctions.startheight = () => (y.bandwidth() / size * 0.95) * scaleFactor;\r\n            positionFunctions.x = d => x(0) - x(d) > 0 ? x(d) : x(0);\r\n            positionFunctions.y = (d, i) => y.bandwidth() / size * i;\r\n            positionFunctions.width = d => Math.abs(x(0) - x(d));\r\n            positionFunctions.height = () => (y.bandwidth() / size * 0.95) * scaleFactor;\r\n        } else if (_vars.rotateAxis === false && _vars.stackToggle === true) {\r\n            positionFunctions.startx = () => 0;\r\n            positionFunctions.starty = () => container.height;\r\n            positionFunctions.startwidth = () => (x.bandwidth() * 0.95) * scaleFactor;\r\n            positionFunctions.startheight = () => 0;\r\n            positionFunctions.x = () => 0;\r\n            positionFunctions.y = (d, i, j) => {\r\n                let increment = 0;//Move the y up by the values that come before it\r\n                for (let k = i - 1; k >= 0; k--) {\r\n                    if (!isNaN(j[k].__data__)) {\r\n                        increment += j[k].__data__;\r\n                    }\r\n                }\r\n                return y(parseFloat(d) + increment);\r\n            };\r\n            positionFunctions.width = () => (x.bandwidth() * 0.95) * scaleFactor;\r\n            positionFunctions.height = d => container.height - y(d);\r\n        } else if (_vars.rotateAxis === false && _vars.stackToggle === false) {\r\n            positionFunctions.startx = (d, i) => x.bandwidth() / size * i;\r\n            positionFunctions.starty = () => container.height;\r\n            positionFunctions.startwidth = () => x.bandwidth() / size * 0.95;\r\n            positionFunctions.startheight = () => 0;\r\n            positionFunctions.x = (d, i) => x.bandwidth() / size * i;\r\n            positionFunctions.y = d => y(0) - y(d) > 0 ? y(d) : y(0);\r\n            positionFunctions.width = () => x.bandwidth() / size * 0.95;\r\n            positionFunctions.height = d => Math.abs(y(0) - y(d));\r\n        }\r\n        return positionFunctions;\r\n    }\r\n\r\n    /**getColors\r\n     *\r\n     * gets the colors to apply to the specific chart\r\n     * @params colorObj, index, label\r\n     * @returns {{}}\r\n     */\r\n    static getColors(colorObj, paramIndex, label) {\r\n        let index = paramIndex,\r\n            cleanedColors;\r\n\r\n        //logic to return the color if the colorObj passed in\r\n        //is an object with the label being the key\r\n        if (typeof label !== 'undefined' && colorObj.hasOwnProperty(label) && colorObj[label]) {\r\n            return colorObj[label];\r\n        }\r\n\r\n        if (!Array.isArray(colorObj)) {\r\n            cleanedColors = [];\r\n            for (let k in colorObj) {\r\n                if (colorObj.hasOwnProperty(k)) {\r\n                    if (colorObj[k]) {\r\n                        cleanedColors.push(colorObj[k]);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            cleanedColors = colorObj;\r\n        }\r\n\r\n        //logic to return a repeating set of colors assuming that\r\n        //the user changed data (ex: flip series on bar chart)\r\n        if (!cleanedColors[index]) {\r\n            while (index > cleanedColors.length - 1) {\r\n                index = index - cleanedColors.length;\r\n            }\r\n        }\r\n        return cleanedColors[index];\r\n    }\r\n\r\n\r\n    static getAxisScale(whichAxis, axisData, container, _vars, paddingType) {\r\n        let leftPadding = 0.4,\r\n            rightPadding = 0.2,\r\n            axisScale,\r\n            axis,\r\n            minDate,\r\n            maxDate;\r\n\r\n        if (paddingType === 'no-padding') {\r\n            leftPadding = 0;\r\n            rightPadding = 0;\r\n        }\r\n\r\n        whichAxis === 'x' ? axis = container.width : axis = container.height;\r\n\r\n        if (axisData.dataType === 'DATE') {\r\n            for (let i = 0; i < axisData.values.length; i++) {\r\n                axisData.values[i] = new Date(axisData.values[i]);\r\n            }\r\n\r\n            maxDate = Math.max.apply(null, axisData.values);\r\n            minDate = Math.min.apply(null, axisData.values);\r\n\r\n            axisScale = d3.scaleTime().domain([new Date(minDate), new Date(maxDate)]).rangeRound([0, axis]);\r\n        } else if (axisData.dataType === 'STRING') {\r\n            axisScale = d3.scaleBand()\r\n                .domain(axisData.values)\r\n                .range([0, axis])\r\n                .paddingInner(leftPadding)\r\n                .paddingOuter(rightPadding);\r\n        } else if (axisData.dataType === 'NUMBER') {\r\n            let domain;\r\n            if (_vars.xReversed || _vars.yReversed) {\r\n                if ((_vars.xReversed && whichAxis === 'x') || (whichAxis === 'y' && !_vars.yReversed)) {\r\n                    domain = [axisData.max, axisData.min];\r\n                }\r\n                if ((_vars.yReversed && whichAxis === 'y') || (whichAxis === 'x' && !_vars.xReversed)) {\r\n                    domain = [axisData.min, axisData.max];\r\n                }\r\n            } else {\r\n                whichAxis === 'x' ? domain = [axisData.min, axisData.max] : domain = [axisData.max, axisData.min];\r\n            }\r\n\r\n            if (_vars.hasOwnProperty('axisType') && _vars.axisType === 'Logarithmic') {\r\n                domain[1] = 0.1;\r\n                axisScale = d3.scaleLog().base(10).domain(domain).rangeRound([0, axis]);\r\n            } else {\r\n                axisScale = d3.scaleLinear().domain(domain).rangeRound([0, axis]);\r\n            }\r\n        } else {\r\n            console.error('Axis is not a valid data type');\r\n            //throw new Error('Axis is not a valid data type');\r\n        }\r\n        return axisScale;\r\n    }\r\n\r\n    /************************************************ Data functions ******************************************************/\r\n\r\n    /**\r\n     * @function\r\n     * @param {string} label - The field that is checked for type\r\n     * @param {Object} dataTableKeys - Object that contains the data type for each column of data\r\n     */\r\n    static getDataTypeFromKeys(label, dataTableKeys, defaultType = 'STRING') {\r\n        let type = defaultType;\r\n\r\n        for (let key of dataTableKeys) {\r\n            //Replace underscores with spaces\r\n            if (key.name.replace(/_/g, ' ') === label.replace(/_/g, ' ')) {\r\n                if (key.hasOwnProperty('type')) {\r\n                    type = (key.type + '').toUpperCase();\r\n                    if (type === 'STRING') {\r\n                        type = 'STRING';\r\n                    } else if (type === 'DATE') {\r\n                        type = 'DATE';\r\n                    } else if (type === 'NUMBER') {\r\n                        type = 'NUMBER';\r\n                    } else {\r\n                        type = 'NUMBER';\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return type;\r\n    }\r\n\r\n    /**setBarLineLegendData\r\n     *  gets legend info from chart Data\r\n     *\r\n     * @params data, type\r\n     * @returns [] of legend text\r\n     */\r\n    static setBarLineLegendData(data) {\r\n        let legendArray = [];\r\n        for (let item in data.dataTable) {\r\n            if (data.dataTable.hasOwnProperty(item)) {\r\n                if (item !== 'label') {\r\n                    legendArray.push(data.dataTable[item]);\r\n                }\r\n            }\r\n        }\r\n        return legendArray;\r\n    }\r\n\r\n    /**setChartColors\r\n     *  cleans incoming colors for consistency\r\n     *\r\n     * @params colorArray, legendData\r\n     * @returns object with colors\r\n     */\r\n\r\n    static setChartColors(toolData, legendData, defaultColorArray) {\r\n        //function handles 3 color inputs\r\n        //toolData as an array in toolData\r\n        //toolData as an object\r\n        //toolData as 'none'\r\n        //any other case will result in using defaultColorArray\r\n\r\n        let colors = {},\r\n            usedColors = [],\r\n            unaccountedLegendElements = [],\r\n            toolDataAsArray;\r\n\r\n        //toolData is array\r\n        if (Array.isArray(toolData)) {\r\n            if (toolData.length > 0) {\r\n                colors = this.createColorsWithDefault(legendData, toolData);\r\n            } else {\r\n                colors = this.createColorsWithDefault(legendData, defaultColorArray);\r\n            }\r\n        } else if (toolData === Object(toolData)) {\r\n            for (let legendEle of legendData) {\r\n                if (toolData.hasOwnProperty(legendEle)) {\r\n                    usedColors.push(toolData[legendEle]);\r\n                } else {\r\n                    unaccountedLegendElements.push(legendEle);\r\n                }\r\n            }\r\n            //check if object has desired keys\r\n            if (usedColors.length === legendData.length) {\r\n                colors = toolData;\r\n            } else if (usedColors.length > 0) {\r\n                toolDataAsArray = Object.values(toolData);\r\n                if (toolDataAsArray.length > legendData.length) {\r\n                    colors = this.createColorsWithDefault(legendData, toolDataAsArray);\r\n                } else {\r\n                    colors = this.createColorsWithDefault(legendData, defaultColorArray);\r\n                }\r\n            } else {\r\n                toolDataAsArray = Object.values(toolData);\r\n                if (toolDataAsArray.length > legendData.length) {\r\n                    colors = this.createColorsWithDefault(legendData, toolDataAsArray);\r\n                } else {\r\n                    colors = this.createColorsWithDefault(legendData, defaultColorArray);\r\n                }\r\n            }\r\n        } else {\r\n            colors = this.createColorsWithDefault(legendData, defaultColorArray);\r\n        }\r\n\r\n        return colors;\r\n    }\r\n\r\n    static createColorsWithDefault(legendData, colors) {\r\n        let mappedColors = {},\r\n            count = 0;\r\n        for (let legendEle of legendData) {\r\n            if (count > colors.length - 1) {\r\n                count = 0;\r\n            }\r\n            mappedColors[legendEle] = colors[count];\r\n            count++;\r\n        }\r\n        return mappedColors;\r\n    }\r\n\r\n    /**cleanToolData\r\n     *  cleans incoming toolData for consistency\r\n     *\r\n     * @param toolData\r\n     * @returns object with tooldata\r\n     */\r\n    static cleanToolData(options = {}, editOptions = {}) {\r\n        let data = options || {};\r\n\r\n        if (!data.hasOwnProperty('rotateAxis')) {\r\n            data.rotateAxis = false;\r\n        }\r\n        if (data.hasOwnProperty('stackToggle')) {\r\n            if (data.stackToggle === 'stack-data' || data.stackToggle === true) {\r\n                data.stackToggle = true;\r\n            } else {\r\n                data.stackToggle = false;\r\n            }\r\n        } else {\r\n            data.stackToggle = false;\r\n        }\r\n        if (data.hasOwnProperty('colors')) {\r\n            data.color = data.colors;\r\n        }\r\n        if (!data.hasOwnProperty('thresholds')) {\r\n            data.thresholds = [];\r\n        }\r\n\r\n        //These are used in setting dynamic margins on the y Axis in jvCharts\r\n        if (editOptions && editOptions.hasOwnProperty('yAxis') && editOptions.yAxis.hasOwnProperty('editable-text-size')) {\r\n            data.yLabelFontSize = editOptions.yAxis['editable-text-size'];\r\n            data.yLabelFormat = editOptions.yAxis['editable-num-format'];\r\n        }\r\n        return data;\r\n    }\r\n\r\n    static getMaxWidthForAxisData(axis, axisData, _vars, dimensions, margin, chartDiv) {\r\n        let maxAxisText = '',\r\n            formatType,\r\n            dummySVG,\r\n            axisDummy,\r\n            width;\r\n        //Dynamic left margin for charts with y axis\r\n        if (_vars.rotateAxis) {\r\n            //get length of longest text label and make the axis based off that\r\n            let maxString = '',\r\n                height = parseInt(dimensions.height, 10) - margin.top - margin.bottom;\r\n\r\n            //check if labels should be shown\r\n            if (height !== 0 && height / axisData.values.length < parseInt(_vars.fontSize, 10)) {\r\n                axisData.hideValues = true;\r\n            } else {\r\n                for (let axisValue of axisData.values) {\r\n                    let currentStr = axisValue.toString();\r\n                    if (currentStr.length > maxString.length) {\r\n                        maxString = currentStr;\r\n                    }\r\n                }\r\n                maxAxisText = maxString;\r\n            }\r\n        } else if (!!_vars.yLabelFormat || !!_vars.xLabelFormat) {\r\n            let labelFormat = _vars.yLabelFormat,\r\n                expression;\r\n            if (axis === 'x') {\r\n                labelFormat = _vars.xLabelFormat;\r\n            }\r\n\r\n            formatType = this.jvFormatValueType(axisData.values);\r\n            expression = this.getFormatExpression(labelFormat);\r\n\r\n            if (expression !== '') {\r\n                maxAxisText = expression(axisData.max);\r\n            } else {\r\n                maxAxisText = this.jvFormatValue(axisData.max);\r\n            }\r\n        } else {\r\n            formatType = this.jvFormatValueType(axisData.values);\r\n            if (!axisData.hasOwnProperty('max')) {\r\n                let maxLength = 0;\r\n                for (let axisValue of axisData.values) {\r\n                    if (axisValue && axisValue.length > maxLength) {\r\n                        maxLength = axisValue.length;\r\n                        maxAxisText = axisValue;\r\n                    }\r\n                }\r\n            } else {\r\n                maxAxisText = this.jvFormatValue(axisData.max, formatType);\r\n            }\r\n        }\r\n\r\n        //if (type === 'heatmap') {\r\n        ////also need to check width of label\r\n        //if (maxAxisText.length < axisData.label.length + 5) {\r\n        ////need added space\r\n        //if (axis === 'x') {\r\n        //maxAxisText = axisData.label;\r\n        //} else {\r\n        //maxAxisText = axisData.label + 'Extra';\r\n        //}\r\n        //}\r\n        //}\r\n\r\n        //Create dummy svg to place max sized text element on\r\n        dummySVG = chartDiv.append('svg').attr('class', 'dummy-svg');\r\n\r\n        //Create dummy text element\r\n        axisDummy = dummySVG\r\n            .append('text')\r\n            .attr('font-size', () => {\r\n                if (axis === 'y' && _vars.yLabelFontSize !== 'none') {\r\n                    return _vars.yLabelFontSize;\r\n                }\r\n                if (axis === 'x' && _vars.xLabelFontSize !== 'none') {\r\n                    return _vars.xLabelFontSize;\r\n                }\r\n                return _vars.fontSize;\r\n            })\r\n            .attr('x', 0)\r\n            .attr('y', 0)\r\n            .text(maxAxisText);\r\n\r\n        //Calculate the width of the dummy text\r\n        width = axisDummy.node().getBBox().width;\r\n        //Remove the svg and text element\r\n        chartDiv.select('.dummy-svg').remove();\r\n        return width;\r\n    }\r\n\r\n    static getDisplayValuesElement(object, dataTableAlign, type) {\r\n        let valuesArray = [];\r\n\r\n        if (type === 'bar' || type === 'pie' || type === 'line' || type === 'area') {\r\n            for (let key in dataTableAlign) {\r\n                if (dataTableAlign.hasOwnProperty(key)) {\r\n                    if (key.indexOf('value') > -1) {\r\n                        valuesArray.push(object[dataTableAlign[key]]);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (let key in object) {\r\n                if (object.hasOwnProperty(key)) {\r\n                    valuesArray.push(object[key]);\r\n                }\r\n            }\r\n        }\r\n        return valuesArray;\r\n    }\r\n\r\n    /**getZScale\r\n     *\r\n     * gets the scale for the z axis\r\n     * @params zAxisData, container, padding\r\n     * @returns {{}}\r\n     */\r\n    static getZScale(zAxisData, container, _vars) {\r\n        let zAxisScale = d3.scaleLinear()\r\n            .domain([d3.min(zAxisData.values), d3.max(zAxisData.values)])\r\n            .rangeRound([_vars.NODE_MIN_SIZE, _vars.NODE_MAX_SIZE])\r\n            .nice();\r\n        return zAxisScale;\r\n    }\r\n\r\n    /**generateEventGroups\r\n     *\r\n     *\r\n     * @params chartContainer, barData, chart\r\n     */\r\n    static generateEventGroups(chartContainer, barData, chart) {\r\n        let container = chart.config.container,\r\n            dataToPlot = jvCharts.getPlotData(barData, chart),\r\n            eventGroups;\r\n\r\n        //Invisible rectangles on screen that represent bar groups. Used to show/hide tool tips on hover\r\n        eventGroups = chartContainer\r\n            .data(dataToPlot)\r\n            .enter()\r\n            .append('rect')\r\n            .attr('class', 'event-rect')\r\n            //sets the x position of the bar\r\n            .attr('x', (d, i) => chart._vars.rotateAxis ? 0 : (container.width / barData.length * i))\r\n            //sets the y position of the bar\r\n            .attr('y', (d, i) => chart._vars.rotateAxis ? (container.height / barData.length * i) : 0)\r\n            //sets the width position of the bar\r\n            .attr('width', () => chart._vars.rotateAxis ? container.width : (container.width / barData.length))\r\n            //sets the height position of the bar\r\n            .attr('height', () => chart._vars.rotateAxis ? (container.height / barData.length) : container.height)\r\n            .attr('fill', 'transparent')\r\n            .attr('class', (d, i) => {\r\n                let dataEle = jvCharts.getViewForValue(String(barData[i][chart.currentData.dataTable.label]));\r\n                return 'event-rect editable-bar bar-col-' + dataEle\r\n            });\r\n\r\n        return eventGroups;\r\n    }\r\n\r\n    static generateThresholdLegend(chart) {\r\n        let svg = chart.svg,\r\n            colorLegendData = [],\r\n            gLegend,\r\n            legend;\r\n        if (chart._vars.thresholds !== 'none') {\r\n            for (let j = 0; j < Object.keys(chart._vars.thresholds).length; j++) {\r\n                colorLegendData.push(chart._vars.thresholds[j].thresholdName);\r\n            }\r\n        }\r\n\r\n        gLegend = svg.append('g')\r\n            .attr('class', 'thresholdLegendContainer');\r\n\r\n        legend = gLegend.selectAll('.thresholdLegend')\r\n            .data(colorLegendData)\r\n            .enter()\r\n            .append('g')\r\n            .attr('class', 'thresholdLegend')\r\n            .attr('transform', (d, i) => {\r\n                let height = 19,\r\n                    offset = 19 * colorLegendData.length / 2,\r\n                    horz = -2 * 12,\r\n                    vert = i * height - offset;\r\n                return 'translate(' + horz + ',' + vert + ')';\r\n            });\r\n\r\n        legend.append('rect')\r\n            .attr('width', 12)\r\n            .attr('height', 12)\r\n            .style('fill', (d, i) => chart._vars.thresholds[i].thresholdColor);\r\n\r\n        legend.append('text')\r\n            .attr('x', 24)\r\n            .attr('y', 8)\r\n            .attr('font-size', '.75em')\r\n            .text(d => d);\r\n\r\n        //Centers the legend in the panel\r\n        if (gLegend) {\r\n            let legendWidth = gLegend.node().getBBox().width;\r\n            gLegend.attr('transform', 'translate(' + (chart.config.container.width - legendWidth) + ',' + (10 * colorLegendData.length) + ')');\r\n        }\r\n    }\r\n\r\n    static attachClickEventsToLegend(chart, legendElements, drawFunc) {\r\n        //Adding the click event to legend rectangles for toggling on/off\r\n        legendElements\r\n            .on('click', function () {\r\n                let selectedRect = d3.select(this),\r\n                    dataHeaders;\r\n\r\n                if (selectedRect._groups[0][0].attributes.opacity.value !== '0.2') {\r\n                    selectedRect\r\n                        .attr('opacity', '0.2');\r\n                } else {\r\n                    selectedRect\r\n                        .attr('opacity', '1');\r\n                }\r\n\r\n                //Gets the headers of the data to be drawn\r\n                dataHeaders = this.updateDataFromLegend(legendElements._groups);\r\n                //Sets the legendData to the updated headers\r\n                if (chart._vars.seriesFlipped) {\r\n                    chart._vars.flippedLegendHeaders = dataHeaders;\r\n                } else {\r\n                    chart._vars.legendHeaders = dataHeaders;\r\n                }\r\n\r\n                //Plots the data\r\n                chart._vars.transitionTime = 800;//Keep transition for toggling legend elements\r\n                if (chart._vars.seriesFlipped) {\r\n                    chart[drawFunc](chart.flippedData);\r\n                } else {\r\n                    chart[drawFunc](chart.data);\r\n                }\r\n                if (chart.applyEditMode) {\r\n                    chart.applyEditMode();\r\n                }\r\n            });\r\n    }\r\n\r\n    /**generateVerticalLegendElements\r\n     *\r\n     * Creates the legend elements--rectangles and labels\r\n     * @params chart, legendData, drawFunc\r\n     */\r\n    static generateVerticalLegendElements(chart, legendData, drawFunc) {\r\n        let svg = chart.svg,\r\n            legend,\r\n            legendDataLength = legendData.length,\r\n            legendElementToggleArray,\r\n            legendRectangles,\r\n            legendText;\r\n\r\n        chart._vars.gridSize = 20;\r\n\r\n        if (!chart._vars.legendIndex) {\r\n            chart._vars.legendIndex = 0;\r\n        }\r\n\r\n        if (!chart._vars.legendIndexMax) {\r\n            chart._vars.legendIndexMax = Math.floor(legendDataLength / chart._vars.legendMax - 0.01);\r\n        }\r\n\r\n        //Check to see if legend element toggle array needs to be set\r\n        if (chart._vars.legendIndexMax >= 0) {\r\n            if (!chart._vars.legendHeaders) {\r\n                chart._vars.legendHeaders = JSON.parse(JSON.stringify(legendData));\r\n            }\r\n\r\n            legendElementToggleArray = this.getLegendElementToggleArray(chart._vars.legendHeaders, legendData);\r\n        }\r\n\r\n        legend = svg.append('g')\r\n            .attr('class', 'legend')\r\n            .attr('transform', 'translate(' + 18 + ',' + 20 + ')');\r\n\r\n        //Adding colored rectangles to the legend\r\n        legendRectangles = legend.selectAll('rect')\r\n            .data(legendData)\r\n            .enter()\r\n            .append('rect')\r\n            .attr('class', 'legendRect')\r\n            .attr('x', '3')\r\n            .attr('y', (d, i) => (chart._vars.gridSize) * (i % chart._vars.legendMax) * 1.1)\r\n            .attr('width', chart._vars.gridSize)\r\n            .attr('height', chart._vars.gridSize)\r\n            .attr('fill', (d, i) => {\r\n                if ((!legendElementToggleArray && !chart._vars.seriesFlipped) || (chart._vars.seriesFlipped && !legendElementToggleArray)) {\r\n                    return this.getColors(chart._vars.color, i, legendData[i]);\r\n                }\r\n                if ((!chart._vars.seriesFlipped && legendElementToggleArray[i].toggle === true) ||\r\n                    (chart._vars.seriesFlipped && legendElementToggleArray[i].toggle === true)) {\r\n                    return this.getColors(chart._vars.color, i, legendData[i]);\r\n                }\r\n                return chart._vars.emptyLegendSquare;\r\n            })\r\n            .attr('display', (d, i) => {\r\n                if (i >= (chart._vars.legendIndex * chart._vars.legendMax) && i <= ((chart._vars.legendIndex * chart._vars.legendMax) + (chart._vars.legendMax - 1))) {\r\n                    return 'all';\r\n                }\r\n                return 'none';\r\n            })\r\n            .attr('opacity', '1');\r\n\r\n        //Adding text labels for each rectangle in legend\r\n        legendText = legend.selectAll('text')\r\n            .data(legendData)\r\n            .enter()\r\n            .append('text')\r\n            .attr('class', (d, i) => 'legendText editable editable-text editable-content editable-legend-' + i)\r\n            .attr('x', chart._vars.gridSize + 7)\r\n            .attr('y', (d, i) => (chart._vars.gridSize) * (i % chart._vars.legendMax) * 1.1 + 10)\r\n            .attr('text-anchor', 'start')\r\n            .attr('dy', '0.35em') //Vertically align with node\r\n            .attr('fill', chart._vars.fontColor)\r\n            .attr('font-size', chart._vars.fontSize)\r\n            .attr('display', (d, i) => {\r\n                if (i >= (chart._vars.legendIndex * chart._vars.legendMax) && i <= ((chart._vars.legendIndex * chart._vars.legendMax) + (chart._vars.legendMax - 1))) {\r\n                    return 'all';\r\n                }\r\n                return 'none';\r\n            })\r\n            .text((d, i) => {\r\n                let elementName = legendData[i];\r\n                if (elementName.length > 20) {\r\n                    return elementName.substring(0, 19) + '...';\r\n                }\r\n                return elementName;\r\n            });\r\n\r\n        //Adding info box to legend elements when hovering over\r\n        legendText\r\n            .data(legendData)\r\n            .append('svg:title')\r\n            .text(d => d);\r\n\r\n        //Only create carousel if the number of elements exceeds one legend \"page\"\r\n        if (chart._vars.legendIndexMax > 0) {\r\n            this.createVerticalCarousel(chart, legendData, drawFunc);\r\n        }\r\n\r\n        return legendRectangles;\r\n    }\r\n\r\n    /**createVerticalCarousel\r\n     *\r\n     * Draws the vertical legend carousel\r\n     * @params chart, legendData, drawFunc\r\n     */\r\n    static createVerticalCarousel(chart, legendData, drawFunc) {\r\n        let svg = chart.svg,\r\n            legendPolygon;\r\n\r\n        //Adding carousel to legend\r\n        svg.selectAll('.legend-carousel').remove();\r\n        svg.selectAll('#legend-text-index').remove();\r\n\r\n        legendPolygon = svg.append('g')\r\n            .attr('class', 'legend-carousel');\r\n\r\n        //Creates left navigation arrow for carousel\r\n        legendPolygon.append('polygon')\r\n            .attr('id', 'leftChevron')\r\n            .attr('class', 'pointer-cursor')\r\n            .style('fill', chart._vars.legendArrowColor)\r\n            .attr('transform', 'translate(0,' + ((chart._vars.legendMax * chart._vars.gridSize) + 50) + ')')\r\n            .attr('points', '0,7.5, 15,0, 15,15')\r\n            .on('click', () => {\r\n                if (chart._vars.legendIndex >= 1) {\r\n                    chart._vars.legendIndex--;\r\n                }\r\n                svg.selectAll('.legend').remove();\r\n                let legendElements = this.generateVerticalLegendElements(chart, legendData, drawFunc);\r\n                this.attachClickEventsToLegend(chart, legendElements, drawFunc, legendData);\r\n            })\r\n            .attr({\r\n                display: () => {\r\n                    if (chart._vars.legendIndex === 0) {\r\n                        return 'none';\r\n                    }\r\n                    return 'all';\r\n                }\r\n            });\r\n\r\n        //Creates page number for carousel navigation\r\n        legendPolygon.append('text')\r\n            .attr('id', 'legend-text-index')\r\n            .attr('x', 35)\r\n            .attr('y', 242.5)\r\n            .style('text-anchor', 'start')\r\n            .style('font-size', chart._vars.fontSize)\r\n            .text(() => (chart._vars.legendIndex + 1) + ' / ' + (chart._vars.legendIndexMax + 1))\r\n            .attr({\r\n                display: () => {\r\n                    if (chart._vars.legendIndexMax === 0) {\r\n                        return 'none';\r\n                    }\r\n                    return 'all';\r\n                }\r\n            });\r\n\r\n        //Creates right navigation arrow for carousel\r\n        legendPolygon.append('polygon')\r\n            .attr('id', 'rightChevron')\r\n            .attr('class', 'pointer-cursor')\r\n            .style('fill', chart._vars.legendArrowColor)\r\n            .attr('transform', 'translate(85,' + ((chart._vars.legendMax * chart._vars.gridSize) + 50) + ')')\r\n            .attr('points', '15,7.5, 0,0, 0,15')\r\n            .on('click', () => {\r\n                if (chart._vars.legendIndex < chart._vars.legendIndexMax) {\r\n                    chart._vars.legendIndex++;\r\n                }\r\n                svg.selectAll('.legend').remove();\r\n                let legendElements = this.generateVerticalLegendElements(chart, legendData, drawFunc);\r\n                this.attachClickEventsToLegend(chart, legendElements, drawFunc, legendData);\r\n            })\r\n            .attr({\r\n                display: () => {\r\n                    if (chart._vars.legendIndex === chart._vars.legendIndexMax) {\r\n                        return 'none';\r\n                    }\r\n                    return 'all';\r\n                }\r\n            });\r\n    }\r\n\r\n    /**convertTableToTree\r\n     *\r\n     * Converts table data to tree structure\r\n     * @params data, dataTable, numericCheck\r\n     */\r\n    static convertTableToTree(data, dataTable, lastNodeAsValue) {\r\n        var allHash = {},\r\n            list = [],\r\n            rootMap = {},\r\n            currentMap = {},\r\n            tableHeaders = [],\r\n            count;\r\n        if (dataTable) {\r\n            for (let header in dataTable) {\r\n                if (header !== 'value' && header.indexOf('tooltip') === -1) {\r\n                    tableHeaders.push(dataTable[header]);\r\n                }\r\n            }\r\n            if (dataTable.value) {\r\n                tableHeaders.push(dataTable.value);\r\n            }\r\n        }\r\n\r\n        for (let dataEle of data) { //all of this is to change it to a tree structure and then call makeTree to structure the data appropriately for this viz\r\n            count = 0;\r\n            for (let header of tableHeaders) {\r\n                if (header !== '') {\r\n                    if (!dataEle[header.replace(/[_]/g, ' ')]) {\r\n                        dataEle[header.replace(/[_]/g, ' ')] = 'NULL_VALUE';\r\n                    }\r\n                    let currentValue = dataEle[header.replace(/[_]/g, ' ')].toString().replace(/[\"]/g, ''),\r\n                        nextMap = {};\r\n\r\n                    if (count === 0) { //will take care of the first level and put into rootmap if it doesnt already exist in rootmap\r\n                        currentMap = rootMap[currentValue];\r\n                        if (!currentMap) {\r\n                            currentMap = {};\r\n                            rootMap[currentValue] = currentMap;\r\n                        }\r\n                        nextMap = currentMap;\r\n                        count++;\r\n                    } else {\r\n                        nextMap = currentMap[currentValue];\r\n                        if (!nextMap) {\r\n                            nextMap = {};\r\n                            currentMap[currentValue] = nextMap;\r\n                        }\r\n                        currentMap = nextMap;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.makeTree(rootMap, list, lastNodeAsValue);\r\n        allHash.name = 'root';\r\n        allHash.children = list;\r\n        return allHash;\r\n    }\r\n\r\n    /**makeTree\r\n     *\r\n     * Recurive function to build tree\r\n     * @params map, list, isNumeric\r\n     */\r\n    static makeTree(map, list, lastNodeAsValue) {\r\n        var childSet = [];\r\n        for (let key in map) {\r\n            if (map.hasOwnProperty(key)) {\r\n                let childMap = map[key],\r\n                    dataMap = {},\r\n                    childExists = childMap && Object.getOwnPropertyNames(childMap).length > 0,\r\n                    numericCheck = lastNodeAsValue && Object.keys(childMap).length === 1 && !isNaN(Object.keys(childMap)[0]);\r\n                dataMap.name = key;\r\n                if (!childExists || numericCheck) {\r\n                    dataMap.value = Object.keys(childMap)[0];\r\n                    list.push(dataMap);\r\n                } else {\r\n                    dataMap.children = childSet;\r\n                    list.push(dataMap);\r\n                    this.makeTree(childMap, childSet, lastNodeAsValue);\r\n                    childSet = [];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**convertTableToTreemap\r\n     *\r\n     * Loop through data to organize into treemap form\r\n     * @params data, dataTableAlgin\r\n     */\r\n    static convertTableToTreemap(data, dataTableAlign) {\r\n        var addedHeaderMap = {},\r\n            childrenArray = [],\r\n            seriesIndex;\r\n\r\n        for (let dataEle of data) {\r\n            let series = dataEle[dataTableAlign.series];\r\n            seriesIndex = addedHeaderMap[series];\r\n            dataEle.Parent = series;\r\n            if (seriesIndex) {\r\n                childrenArray[seriesIndex].children.push(dataEle);\r\n            } else {\r\n                addedHeaderMap[series] = childrenArray.length;\r\n                childrenArray.push({\r\n                    [dataTableAlign.series]: series,\r\n                    Parent: 'Top Level',\r\n                    children: [dataEle]\r\n                });\r\n            }\r\n        }\r\n\r\n        return {\r\n            [dataTableAlign.series]: 'Top Level',\r\n            children: childrenArray\r\n        };\r\n    }\r\n}\r\n\r\nexport default jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/jvCharts.js","/***  jvComment ***/\r\n'use-strict';\r\n/**\r\n* @name jvComment\r\n* @desc Constructor for JV Comment - creates comments for a jv visualization and executes a callback for the comments to be saved\r\n* @param {object} configObj - constructor object containing the jvChart and other options\r\n*/\r\nexport default class jvComment {\r\n    constructor(configObj) {\r\n        this.chartDiv = configObj.chartDiv;\r\n        this.showComments = false;\r\n        this.comments = jvComment.setCommentsList(configObj.comments);\r\n        this.disabled = false;\r\n        this.drawCommentNodes();\r\n        this.onSaveCallback = configObj.onSaveCallback;\r\n        this.getMode = configObj.getMode;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n    * @name createMoveListener\r\n    * @desc creates the mousemove listener to determine if the user moves or resizes a comment\r\n    * @param {object} commentNode - comment that the user clicked on\r\n    * @return {undefined} - no return\r\n    */\r\n    createMoveListener(commentNode) {\r\n        var commentObj = this,\r\n            timeMouseDown = new Date().getTime();\r\n        commentObj.chartDiv.on('mousemove', function () {\r\n            //mouse move happend too quickly, chrome bug\r\n            var timeMouseMove = new Date().getTime(),\r\n                node = commentNode.node(),\r\n                mouse = d3.mouse(node),\r\n                mouseOnChartDiv = d3.mouse(commentObj.chartDiv.node()),\r\n                resizeNode;\r\n            if (timeMouseDown + 10 > timeMouseMove) {\r\n                return;\r\n            }\r\n            //set the moved node, so we know to do a mouse up event\r\n            commentObj.moved = commentNode;\r\n\r\n            //resize in the right corner of the comment\r\n            if (commentNode.select('.comment-padding')._groups[0][0] && ((mouse[0] + 15 > node.clientWidth && mouse[1] + 15 > node.clientHeight) || commentObj.moved.mouse)) {\r\n                if (!commentObj.moved.mouse) {\r\n                    resizeNode = commentNode.select('.comment-padding');\r\n                    resizeNode.style('width', 'auto');\r\n                    resizeNode.style('height', 'auto');\r\n                }\r\n                //set the mouse event so we can update the location on mouse up\r\n                commentObj.moved.mouse = mouse;\r\n            } else {\r\n                //move the comment node around the visual\r\n                if (commentNode._groups[0][0].nodeName === 'text') {\r\n                    commentObj.chartDiv.select('.commentbox-readonly').remove();\r\n                }\r\n                commentNode\r\n                    .style('left', mouseOnChartDiv[0] + 'px')\r\n                    .style('top', mouseOnChartDiv[1] + 'px');\r\n                commentNode\r\n                    .attr('x', mouseOnChartDiv[0])\r\n                    .attr('y', mouseOnChartDiv[1]);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n    * @name updatePosition\r\n    * @desc determines whether the user dragged a comment on the screen or updated its size and then creates the appropriate save function\r\n    * @return {undefined} - no return\r\n    */\r\n    updatePosition() {\r\n        let commentObj = this,\r\n            nodeToUpdate = commentObj.moved._groups[0][0],\r\n            nodeId = nodeToUpdate.id.split('node')[1],\r\n            comment = commentObj.comments.list[nodeId],\r\n            x,\r\n            y;\r\n        if (Array.isArray(commentObj.moved.mouse)) {\r\n            comment.binding.width = commentObj.moved.mouse[0];\r\n            comment.binding.height = commentObj.moved.mouse[1];\r\n        } else {\r\n            x = Math.round(nodeToUpdate.getAttribute('x'));\r\n            y = Math.round(nodeToUpdate.getAttribute('y'));\r\n            comment.binding = {\r\n                'x': x,\r\n                'y': y,\r\n                'clientWidth': commentObj.chartDiv._groups[0][0].clientWidth,\r\n                'clientHeight': commentObj.chartDiv._groups[0][0].clientHeight,\r\n                'showAsMarker': comment.binding.showAsMarker,\r\n                'height': comment.binding.height,\r\n                'width': comment.binding.width\r\n            };\r\n        }\r\n\r\n        commentObj.onSaveCallback(comment, nodeId, 'edit');\r\n    }\r\n\r\n    /**\r\n    * @name makeComment\r\n    * @desc creates the comment entry box on the screen and attaches listeners to the save delete and cancel options\r\n    * @param {object} event - event that holds the mouse position for where the user wants to place the comment\r\n    * @return {undefined} - no return\r\n    */\r\n    makeComment(event) {\r\n        if (this.chartDiv.select('.commentbox')._groups[0][0] || this.chartDiv.select('.commentbox-edit')._groups[0][0]) {\r\n            //dont create new comment\r\n            return;\r\n        }\r\n\r\n        let commentObj = this,\r\n            x = parseInt(d3.mouse(event)[0], 10),\r\n            y = parseInt(d3.mouse(event)[1], 10),\r\n            commentHeight = 145,\r\n            commentWidth = 200,\r\n            //calculate position of overlay div\r\n            position = commentObj.overlayDivPosition(commentWidth, commentHeight, x, y),\r\n            commentType = 'svgMain';\r\n\r\n        commentObj.chartDiv.selectAll('.commentbox-readonly').remove();\r\n\r\n        commentObj.showComments = false;\r\n        commentObj.chartDiv.append('div')\r\n            .attr('class', 'commentbox')\r\n            .attr('id', 'commentbox')\r\n            .style('opacity', 1)\r\n            .html(\"<div class='title'><b>Add New Comment</b></div>\" +\r\n            \"<textarea placeholder='Enter comment...' form='commentform' class='comment-textarea' style='width:200px; height: 90px;' name='comment' id = 'textarea1'></textarea>\" +\r\n            \"<br><input type='checkBox' class='commentbox-display' id ='display'> Display as marker\" +\r\n            \"<br><button class='commentbox-close' id ='cancel'><i class='fa fa-close'></i></button>\" +\r\n            \"<button class='smss-btn smss-btn-updated smss-btn-primary commentbox-submit' id = 'submit'>Submit Comment</button>\")\r\n            .style('position', 'absolute')\r\n            .style('left', position.x + 'px')\r\n            .style('top', position.y + 'px');\r\n\r\n        //Autofocus on the text area\r\n        document.getElementById('textarea1').focus();\r\n\r\n        commentObj.chartDiv.selectAll('.commentbox').select('#cancel')\r\n            .on('click.delete', function () {\r\n                commentObj.removeComment();\r\n            });\r\n\r\n        commentObj.chartDiv.selectAll('.commentbox').select('#submit')\r\n            .on('click.save', function () {\r\n                let commentText = commentObj.chartDiv.select('#commentbox').select('#textarea1')._groups[0][0].value,\r\n                    showAsMarker = commentObj.chartDiv.select('#commentbox').select('#display')._groups[0][0].checked,\r\n                    newCommentObj;\r\n\r\n                newCommentObj = {\r\n                    'commentText': commentText,\r\n                    'groupID': 'group0',\r\n                    'type': commentType,\r\n                    'binding': {\r\n                        'x': x,\r\n                        'y': y,\r\n                        'clientWidth': commentObj.chartDiv._groups[0][0].clientWidth,\r\n                        'clientHeight': commentObj.chartDiv._groups[0][0].clientHeight,\r\n                        'showAsMarker': showAsMarker ? 'true' : 'false',\r\n                        'height': false,\r\n                        'width': false\r\n                    }\r\n                };\r\n                commentObj.chartDiv.select('.commentbox').remove();\r\n                if (isNaN(commentObj.comments.maxId)) {\r\n                    commentObj.comments.maxId = -1;\r\n                }\r\n                commentObj.onSaveCallback(newCommentObj, ++commentObj.comments.maxId, 'add');\r\n            });\r\n    }\r\n\r\n    /**\r\n    * @name removeComment\r\n    * @desc function to remove comment entry box\r\n    * @return {undefined} - no return\r\n    */\r\n    removeComment() {\r\n        this.chartDiv.selectAll('.commentbox').remove();\r\n    }\r\n\r\n    /**\r\n    * @name drawCommentNodes\r\n    * @desc function to draw a all comments on the visual\r\n    * @return {undefined} - no return\r\n    */\r\n    drawCommentNodes() {\r\n        let comments = this.comments.list;\r\n        this.chartDiv.selectAll('.min-comment').remove();\r\n\r\n        for (let id in comments) {\r\n            if (comments.hasOwnProperty(id)) {\r\n                this.drawComment(comments[id], id);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @name drawComment\r\n    * @desc function to draw a single comment on the visual\r\n    * @param {object} comment - data used to pain the comment\r\n    * @param {number} id - id of the specific comment\r\n    * @return {undefined} - no return\r\n    */\r\n    drawComment(comment, id) {\r\n        if (typeof this.chartDiv._groups === 'undefined') {\r\n            console.log('Comment data is in old format, will not display or chart div doesnt exist');\r\n            return;\r\n        }\r\n\r\n        if (!comment.binding || !this.chartDiv._groups[0][0]) {\r\n            console.log('Comment data is in old format, will not display or chart div doesnt exist');\r\n            return;\r\n        }\r\n\r\n        let commentObj = this,\r\n            chartDiv = commentObj.chartDiv,\r\n            binding = comment.binding,\r\n            chartAreaWidth = chartDiv._groups[0][0].clientWidth,\r\n            chartAreaHeight = chartDiv._groups[0][0].clientHeight,\r\n            x = (binding.x / binding.clientWidth * chartAreaWidth),\r\n            y = (binding.y / binding.clientHeight * chartAreaHeight),\r\n            styleString = '',\r\n            text = '',\r\n            resize = false;\r\n\r\n        if (comment.binding.showAsMarker === 'false') {\r\n            if (comment.binding.width && comment.binding.height) {\r\n                styleString = \"style='width: \" + comment.binding.width + 'px; height: ' + comment.binding.height + \"px'\";\r\n            }\r\n            if (comment.commentText.indexOf('<iframe') > -1 || comment.commentText.indexOf('<img') > -1 || comment.commentText.indexOf('<svg') > -1) {\r\n                //contains elents that should resize\r\n                text = \"<div class='comment-padding text'\" + styleString + \"><div class='user-comment'>\" + comment.commentText + '</div></div>';\r\n                resize = true;\r\n            } else {\r\n                text = '<div class=\"text editable editable-text editable-comment-' + id + '\">' + comment.commentText + '<div/>';\r\n            }\r\n            chartDiv.append('div')\r\n                .attr('class', 'min-comment')\r\n                .attr('id', 'node' + id)\r\n                .style('opacity', 1)\r\n                .style('position', 'absolute')\r\n                .style('left', x + 'px')\r\n                .style('top', y + 'px')\r\n                .on('dblclick.comment', function () {//Edit text or delete the comment\r\n                    commentObj.doubleClick(this, x, y);\r\n                })\r\n                //creating div for styling purposes\r\n                .append('div')\r\n                .attr('class', 'min-comment-styling')\r\n                //.style(\"border\", \"1px solid black\")\r\n                .html(text);\r\n            if (resize) {\r\n                let parent = d3.select('.user-comment');\r\n                jvComment.rescale(parent, parent.node());\r\n            }\r\n        } else {\r\n            chartDiv.select('svg').append('text')\r\n                .attr('class', 'min-comment')\r\n                .attr('id', 'node' + id)\r\n                .attr('fill', '#e6e6e6')\r\n                .attr('x', x)\r\n                .attr('y', y)\r\n                .attr('font-family', 'FontAwesome')\r\n                .attr('stroke', 'darkgray')\r\n                .attr('font-size', '15px')\r\n                .text('\\uf0e5')\r\n                .attr('opacity', 1)\r\n                .on('dblclick.comment', function () {//Edit text or delete the comment\r\n                    commentObj.doubleClick(this, x, y);\r\n                })\r\n                .on('mouseenter.comment', function () {//Show hover over box when mouse enters node\r\n                    if (commentObj.showComments === false) {\r\n                        let commentText = '',\r\n                            commentHeight = 80,\r\n                            commentWidth = 185,\r\n                            position;\r\n\r\n                        for (let j in commentObj.comments.list) {\r\n                            if (Math.round(commentObj.comments.list[j].binding.x) === Math.round(this.x.baseVal[0].value)) {\r\n                                if (Math.round(commentObj.comments.list[j].binding.y) === Math.round(this.y.baseVal[0].value)) {\r\n                                    commentText = commentObj.comments.list[j].commentText;\r\n                                    x = commentObj.comments.list[j].binding.x;\r\n                                    y = commentObj.comments.list[j].binding.y;\r\n                                }\r\n                            }\r\n                        }\r\n                        position = commentObj.overlayDivPosition(commentWidth, commentHeight, x, y);\r\n\r\n                        chartDiv.append('div')\r\n                            .attr('class', 'commentbox-readonly')\r\n                            .style('opacity', 1)\r\n                            .style('position', 'absolute')\r\n                            .html(\"<textarea readonly rows='4' cols='27' class='textarea' name='comment'>\" + commentText + '</textarea>')\r\n                            .style('left', position.x + 'px')\r\n                            .style('top', position.y + 'px');\r\n                    }\r\n                })\r\n                .on('mouseout.comment', () => {\r\n                    //Remove hover over box when mouse moves away\r\n                    if (commentObj.showComments === false) {\r\n                        chartDiv.select('.commentbox-readonly').remove();\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @name doubleClick\r\n    * @desc click function after the user clicks on an existing comment\r\n    * @param {object} commentNode - current comment that the user clicked\r\n    * @param {number} x - x position of the click event\r\n    * @param {number} y - y position of the click event\r\n    * @return {undefined} - no return\r\n    */\r\n    doubleClick(commentNode, x, y) {\r\n        if (this.chartDiv.select('.commentbox-edit')._groups[0][0] || this.getMode() !== 'comment-mode') {\r\n            //dont create new comment\r\n            return;\r\n        }\r\n        let commentObj = this,\r\n            chartDiv = commentObj.chartDiv,\r\n            currentComment = commentNode.id.split('node')[1],\r\n            commentText = commentObj.comments.list[currentComment].commentText,\r\n            commentHeight = 145,\r\n            commentWidth = 200,\r\n            position = commentObj.overlayDivPosition(commentWidth, commentHeight, x, y);\r\n\r\n        commentObj.showComments = false;\r\n        chartDiv.selectAll('.commentbox-readonly').remove();\r\n        chartDiv.selectAll('.commentbox-edit').remove();\r\n        chartDiv.selectAll('.commentbox').remove();\r\n\r\n        chartDiv.append('div')\r\n            .attr('class', 'commentbox-edit')\r\n            .style('opacity', 1)\r\n            .style('left', position.x + 'px')\r\n            .style('top', position.y + 'px')\r\n            .style('position', 'absolute')\r\n            .html(\"<div class='title'><b>Edit Comment</b></div>\" +\r\n            \"<textarea id='edit' class='comment-textarea' style='width:200px; height: 90px;' name='comment'>\" + commentText + '</textarea>' +\r\n            \"<br><input type='checkBox' class='commentbox-display' id ='display'> Display as marker\" +\r\n            \"<br><button class='commentbox-close' id ='cancel-edit'><i class='fa fa-close'></i></button>\" +\r\n            \"<button class='smss-btn smss-btn-updated smss-btn-flat' id ='delete'>Delete</button>\" +\r\n            \"<button class='smss-btn smss-btn-updated smss-btn-primary' id = 'save'>Save</button>\");\r\n\r\n        chartDiv.select('.commentbox-edit').select('#display')._groups[0][0].checked = commentObj.comments.list[currentComment].binding.showAsMarker === 'true';\r\n\r\n        chartDiv.selectAll('.commentbox-edit').select('#delete')\r\n            .on('click.delete', function () {\r\n                chartDiv.select('.commentbox-edit').remove();\r\n                chartDiv.select('.commentbox-readonly').remove();\r\n                chartDiv.select('#node' + currentComment).attr('display', 'none');\r\n                //redraw comment nodes with new indexes\r\n                commentObj.onSaveCallback(commentObj.comments.list[currentComment], currentComment, 'remove');\r\n            });\r\n\r\n        chartDiv.selectAll('.commentbox-edit').select('#save')\r\n            .on('click.save', function () {\r\n                let text = chartDiv.select('.commentbox-edit').select('#edit')._groups[0][0].value,\r\n                    showAsMarker = chartDiv.select('.commentbox-edit').select('#display')._groups[0][0].checked;\r\n                commentObj.comments.list[currentComment].commentText = text;\r\n                commentObj.comments.list[currentComment].binding.showAsMarker = showAsMarker ? 'true' : 'false';\r\n                chartDiv.select('.commentbox-readonly').remove();\r\n                chartDiv.select('.commentbox-edit').remove();\r\n                commentObj.onSaveCallback(commentObj.comments.list[currentComment], currentComment, 'edit');\r\n            });\r\n\r\n        chartDiv.selectAll('.commentbox-edit').select('#cancel-edit')\r\n            .on('click.cancel-edit', function () {\r\n                chartDiv.select('.commentbox-readonly').remove();\r\n                chartDiv.select('.commentbox-edit').remove();\r\n            });\r\n    }\r\n\r\n    /**\r\n    * @name overlayDivPosition\r\n    * @desc function to determine the placement of the div on the visual\r\n    * @param {number} divWidth - width of the comment entry box\r\n    * @param {number} divHeight - height of the comment entry box\r\n    * @param {number} mouseX - x position of the click event\r\n    * @param {number} mouseY - y position of the click event\r\n    * @return {object} - position of div\r\n    */\r\n    overlayDivPosition(divWidth, divHeight, mouseX, mouseY) {\r\n        let editObj = this,\r\n            position = {\r\n                x: mouseX,\r\n                y: mouseY + 10\r\n            };\r\n        if (mouseX > parseInt(editObj.chartDiv.style('width'), 10) / 2) {\r\n            position.x = mouseX - divWidth;\r\n        }\r\n        if (mouseY - divHeight - 10 > 0) {\r\n            position.y = mouseY - divHeight - 10;\r\n        }\r\n        return position;\r\n    }\r\n\r\n    /**\r\n    * @name setCommentsList\r\n    * @desc sets the appropriate comments object for a comments object\r\n    * @param {object} comments - list of comments to paint\r\n    * @return {comments} - object with comments list and max id\r\n    */\r\n    static setCommentsList(comments = {}) {\r\n        let newComments =\r\n            {\r\n                list: {},\r\n                maxId: 0\r\n            },\r\n            keys = Object.keys(comments);\r\n\r\n        if (keys.length > 0) {\r\n            newComments.list = comments;\r\n            newComments.maxId = Math.max(...Object.keys(newComments.list));\r\n            if (Number.isNaN(newComments.maxId)) {\r\n                newComments.maxId = 0;\r\n            }\r\n        }\r\n        return newComments;\r\n    }\r\n\r\n    /**\r\n    * @name rescale\r\n    * @desc sets the children of the ele param to 100 percent height and width\r\n    * @param {d3node} ele - node to start recursive function\r\n    * @param {htmlNode} commentNode - unused parent node that can be used to calcualte percent height and widths\r\n    * @return {undefined} - no return\r\n    */\r\n    static rescale(ele, commentNode) {\r\n        var node = ele.node(),\r\n            width = 100,\r\n            height = 100;\r\n        //width = node.clientWidth / commentNode.clientWidth * 100;\r\n        //height = node.clientHeight / commentNode.clientHeight * 100;\r\n        //if (width > 100) {\r\n        //width = 100;\r\n        //}\r\n\r\n        //if (height > 100) {\r\n        //height = 100;\r\n        //}\r\n\r\n        ele.style('width', width + '%');\r\n        ele.style('height', height + '%');\r\n        for (let child of node.childNodes) {\r\n            this.rescale(d3.select(child), commentNode);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/jvComment.js","/***  jvEdit ***/\r\n'use strict';\r\nimport editTemplate from 'editOptionsTemplate.js';\r\n\r\n/**\r\n* @name jvEdit\r\n* @desc Constructor for JV Edit - creates edits to a jv visualization and executes a callback for the edit options to be saved\r\n* @param {object} configObj - constructor object containing the jvChart and other options\r\n* @return {undefined} - no return\r\n*/\r\nfunction jvEdit(configObj) {\r\n    var editObj = this;\r\n    editObj.chartDiv = configObj.chartDiv;\r\n    editObj.vizOptions = configObj.vizOptions ? configObj.vizOptions : {};\r\n    editObj.chartDiv.selectAll('.edit-div').remove();\r\n    editObj.editDiv = editObj.chartDiv.append('div').attr('class', 'edit-div');\r\n    editObj.onSaveCallback = configObj.onSaveCallback;\r\n}\r\n\r\njvEdit.prototype.displayEdit = displayEdit;\r\njvEdit.prototype.changeFontSize = changeFontSize;\r\njvEdit.prototype.submitEditMode = submitEditMode;\r\njvEdit.prototype.applyEditMode = applyEditMode;\r\njvEdit.prototype.applyAllEdits = applyAllEdits;\r\njvEdit.prototype.removeEdit = removeEdit;\r\njvEdit.prototype.overlayDivPosition = overlayDivPosition;\r\n\r\n/**\r\n* @name displayEdit\r\n* @desc Displays the edit div, grabbing it from the template\r\n* @param {array} mouse - mouse location of the click event, used to place the edit mode div on the visual\r\n* @param {string} options - css class of clicked element, provides the options that are editable by edit mode\r\n* @return {undefined} - no return\r\n*/\r\nfunction displayEdit(mouse, options) {\r\n    var editObj = this,\r\n        mouseX = mouse[0],\r\n        mouseY = mouse[1],\r\n        optionValues = [],\r\n        itemToChange = '',\r\n        editOptionElement,\r\n        editHeight = parseFloat(editObj.editDiv.style('height')),\r\n        editWidth = parseFloat(editObj.editDiv.style('width')),\r\n        position;\r\n\r\n    //return if you click on the same element twice, no need to display a second edit div if the current one is still open\r\n    if (editObj.editOptions === options) {\r\n        return;\r\n    }\r\n    editObj.editDiv.html('');\r\n    editObj.editOptions = options;\r\n\r\n    //assign html to editDiv (basically displays the div)\r\n    editObj.editDiv.html(editTemplate);\r\n\r\n    //optionValues - an array of strings.\r\n    //String is the id to the element in the editDiv form.\r\n    //This string contains the specific option that is being changed\r\n\r\n    //itemToChange\r\n    //String that is the class of the svg element to be changed on the viz itself\r\n    editOptionElement = editObj.editDiv.select('#edit-option-element');\r\n\r\n    //if statements to determine which edit options to display\r\n    if (options.indexOf('editable-yAxis') >= 0) {\r\n        editOptionElement.html('&nbsp;for Y Axis');\r\n        editOptionElement.style('visibility', 'visible');\r\n        itemToChange = 'yAxis';\r\n    } else if (options.indexOf('editable-xAxis') >= 0) {\r\n        editOptionElement.html('&nbsp;for X Axis');\r\n        editOptionElement.style('visibility', 'visible');\r\n        itemToChange = 'xAxis';\r\n    } else if (options.indexOf('yLabel') >= 0) {\r\n        editOptionElement.html('&nbsp;for Y Label');\r\n        editOptionElement.style('visibility', 'visible');\r\n        itemToChange = 'yLabel';\r\n    } else if (options.indexOf('xLabel') >= 0) {\r\n        editOptionElement.html('&nbsp;for X Label');\r\n        editOptionElement.style('visibility', 'visible');\r\n        itemToChange = 'xLabel';\r\n    } else if (options.indexOf('legendText') >= 0) {\r\n        editOptionElement.html('&nbsp;for Legend Item');\r\n        editOptionElement.style('visibility', 'visible');\r\n        itemToChange = options.substring(options.indexOf('editable-legend-')).split(' ')[0];\r\n    } else if (options.indexOf('editable-bar') >= 0) {\r\n        editOptionElement.html('&nbsp;for Bar Chart');\r\n        editOptionElement.style('visibility', 'visible');\r\n        editObj.editDiv.select('.editable-bar').style('display', 'block');\r\n        optionValues.push('editable-bar');\r\n        itemToChange = options.substring(options.indexOf('bar-col-')).split(' ')[0];\r\n    } else if (options.indexOf('editable-pie') >= 0) {\r\n        editOptionElement.html('&nbsp;for Pie Slice');\r\n        editOptionElement.style('visibility', 'visible');\r\n        editObj.editDiv.select('.editable-pie').style('display', 'block');\r\n        optionValues.push('editable-pie');\r\n        itemToChange = options.substring(options.indexOf('pie-slice-')).split(' ')[0];\r\n    } else if (options.indexOf('editable-scatter') >= 0) {\r\n        editOptionElement.html('&nbsp;for Scatter Plot');\r\n        editOptionElement.style('visibility', 'visible');\r\n        editObj.editDiv.select('.editable-scatter').style('display', 'block');\r\n        optionValues.push('editable-scatter');\r\n        itemToChange = options.substring(options.indexOf('scatter-circle-')).split(' ')[0];\r\n    } else if (options.indexOf('editable-bubble') >= 0) {\r\n        editOptionElement.html('&nbsp;for Bubble Chart');\r\n        editOptionElement.style('visibility', 'visible');\r\n        editObj.editDiv.select('.editable-bubble').style('display', 'block');\r\n        optionValues.push('editable-bubble');\r\n        itemToChange = options.substring(options.indexOf('bubble-')).split(' ')[0];\r\n    } else if (options.indexOf('editable-box') >= 0) {\r\n        editOptionElement.html('&nbsp;for Box and Whisker Plot');\r\n        editOptionElement.style('visibility', 'visible');\r\n        editObj.editDiv.select('.editable-box').style('display', 'block');\r\n        optionValues.push('editable-box');\r\n        itemToChange = options.substring(options.indexOf('box-')).split(' ')[0];\r\n    } else if (options.indexOf('editable-comment') >= 0) {\r\n        editOptionElement.html('&nbsp;for Comment');\r\n        editOptionElement.style('visibility', 'visible');\r\n        itemToChange = options.substring(options.indexOf('editable-comment-')).split(' ')[0];\r\n    } else if (options.indexOf('editable-svg') >= 0) {\r\n        editOptionElement.html('&nbsp;for All Text');\r\n        editOptionElement.style('visibility', 'visible');\r\n        editObj.editDiv.select('.editable-text-size-buttons').style('display', 'block');\r\n        optionValues.push('editable-text-size');\r\n        itemToChange = 'svg';\r\n    } else {\r\n        console.log('Still need to add option to display edit');\r\n    }\r\n\r\n    if (options.indexOf('editable-num') >= 0) {\r\n        editObj.editDiv.select('.editable-num-format').style('display', 'block');\r\n        optionValues.push('editable-num-format');\r\n    }\r\n    if (options.indexOf('editable-text') >= 0) {\r\n        editObj.editDiv.select('.editable-text-color').style('display', 'block');\r\n        optionValues.push('editable-text-color');\r\n        editObj.editDiv.select('.editable-text-size').style('display', 'block');\r\n        optionValues.push('editable-text-size');\r\n    }\r\n    if (options.indexOf('editable-content') >= 0) {\r\n        editObj.editDiv.select('.editable-content').style('display', 'block');\r\n        optionValues.push('editable-content');\r\n    }\r\n\r\n    //populate edit div with initial values\r\n    if (editObj.vizOptions[itemToChange]) {\r\n        populateSelectionsEditMode(editObj.editDiv, editObj.vizOptions[itemToChange]);\r\n    }\r\n    editObj.editDiv\r\n        .style('display', 'block')\r\n        .style('left', 0 + 'px')\r\n        .style('top', 0 + 'px');\r\n\r\n    //calculate position of overlay div\r\n    editHeight = parseFloat(editObj.editDiv.style('height'));\r\n    editWidth = parseFloat(editObj.editDiv.style('width'));\r\n    position = editObj.overlayDivPosition(editWidth, editHeight, mouseX, mouseY);\r\n\r\n    //show the new edit div\r\n    editObj.editDiv\r\n        .style('left', position.x + 'px')\r\n        .style('top', position.y + 'px');\r\n\r\n    //add submit, default, and exit listeners to the div\r\n    editObj.editDiv.select('#submitEditMode').on('click', function () {\r\n        editObj.submitEditMode(optionValues, itemToChange);\r\n        editObj.removeEdit();\r\n    });\r\n    editObj.editDiv.select('#submitEditModeDefault').on('click', function () {\r\n        editObj.submitEditMode(optionValues, itemToChange, true);\r\n        editObj.removeEdit();\r\n    });\r\n    editObj.editDiv.select('#exitEditMode').on('click', function () {\r\n        editObj.removeEdit();\r\n    });\r\n    editObj.fontSizeIncrement = 0;\r\n\r\n    //Click events for increase/decrease font size buttons\r\n    editObj.editDiv.select('#increaseFontSize').on('click', increaseFontSize.bind(editObj));\r\n    editObj.editDiv.select('#decreaseFontSize').on('click', decreaseFontSize.bind(editObj));\r\n}\r\n\r\n/**\r\n* @name increaseFontSize\r\n* @desc Increases font size by an increment\r\n* @return {undefined} - no return\r\n*/\r\nfunction increaseFontSize() {\r\n    var editObj = this,\r\n        fontIncrement = 1,\r\n        maxSize = 28;\r\n    if (editObj.fontSizeIncrement < maxSize) {\r\n        editObj.changeFontSize(fontIncrement);\r\n        editObj.fontSizeIncrement++;\r\n        editObj.vizOptions.text = { 'editable-text-increment': editObj.fontSizeIncrement };\r\n    }\r\n}\r\n\r\n/**\r\n* @name decreaseFontSize\r\n* @desc Decreases font size by an increment\r\n* @return {undefined} - no return\r\n*/\r\nfunction decreaseFontSize() {\r\n    var editObj = this,\r\n        fontDecrement = -1,\r\n        minSize = -12;\r\n    //min size is neg 12 because default size is 12px on our charts\r\n    if (editObj.fontSizeIncrement > minSize) {\r\n        editObj.changeFontSize(fontDecrement);\r\n        editObj.fontSizeIncrement--;\r\n        editObj.vizOptions.text = { 'editable-text-increment': editObj.fontSizeIncrement };\r\n    }\r\n}\r\n\r\n/**\r\n* @name changeFontSize\r\n* @desc Increases or decreases font size by a certain increment\r\n* @param {integer} increment - number of increment\r\n* @return {undefined} - no return\r\n*/\r\nfunction changeFontSize(increment) {\r\n    var editObj = this;\r\n    editObj.chartDiv.selectAll('text').each(function () {\r\n        updateFont(this, increment);\r\n    });\r\n    editObj.chartDiv.selectAll('.text').each(function () {\r\n        updateFont(this, increment);\r\n    });\r\n}\r\n\r\n/**\r\n* @name updateFont\r\n* @desc changes the size of the font by a given increment\r\n* @param {htmlNode} thisDiv - node to change font size\r\n* @param {integer} increment - number of increment\r\n* @return {undefined} - no return\r\n*/\r\nfunction updateFont(thisDiv, increment) {\r\n    var newSize,\r\n        textSize = 12;\r\n    if (thisDiv && thisDiv.getAttribute('font-size')) {\r\n        textSize = thisDiv.getAttribute('font-size');\r\n        newSize = parseInt(textSize, 10) + increment;\r\n        thisDiv.setAttribute('font-size', newSize + 'px');\r\n    } else if (thisDiv) {\r\n        textSize = parseInt(window.getComputedStyle(thisDiv, null).getPropertyValue('font-size'), 10) + increment;\r\n        thisDiv.style.fontSize =  textSize + 'px';\r\n    }\r\n}\r\n\r\n/**\r\n* @name populateSelectionsEditMode\r\n* @desc Initially populates the editDiv if there are vizOptions\r\n* @param {htmlNode} editDiv - edit mode options div\r\n* @param {object} vizOptions - current user options to apply to the edit div\r\n* @return {undefined} - no return\r\n*/\r\nfunction populateSelectionsEditMode(editDiv, vizOptions) {\r\n    for (let option in vizOptions) {\r\n        if (vizOptions.hasOwnProperty(option)) {\r\n            let selectedObject = editDiv.select('#' + option)._groups[0][0];\r\n            //default color inputs to gray\r\n            if (vizOptions[option] === 'default') {\r\n                if (selectedObject.type === 'color') {\r\n                    if (selectedObject.id.indexOf('text') > 0) {\r\n                        selectedObject.value = '#000000';\r\n                    } else {\r\n                        selectedObject.value = '#aaaaaa';\r\n                    }\r\n                }\r\n            } else {\r\n                selectedObject.value = vizOptions[option];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n* @name submitEditMode\r\n* @desc calls save callback on edit mode with edit options\r\n* @param {object} optionValues - new user options to save\r\n* @param {object} possibleItemToChange - item that the user clicked (might not be the actual item to update)\r\n* @param {object} defaultBtnClicked - reset viz option to default\r\n* @return {undefined} - no return\r\n*/\r\nfunction submitEditMode(optionValues, possibleItemToChange, defaultBtnClicked) {\r\n    let editObj = this,\r\n        optionArray = optionValues,\r\n        selectedEditOptions = {},\r\n        editValue,\r\n        selectedObj,\r\n        itemToChange = possibleItemToChange;\r\n\r\n    for (let i = 0; i < optionArray.length; i++) {\r\n        if (optionArray[i].indexOf('editable-legend') > 0) {\r\n            //change item to change for legend elements\r\n            itemToChange = optionArray[i];\r\n        }\r\n        selectedObj = editObj.editDiv.select('#' + optionArray[i]);\r\n        //see if selected object exists\r\n        if (selectedObj && selectedObj._groups[0] && selectedObj._groups[0][0]) {\r\n            editValue = selectedObj._groups[0][0].value;\r\n            //get selected option from edit div\r\n            if (optionArray[i] === 'editable-content' && editValue === '') {\r\n                //dont add an empty string to the viz options for editable content\r\n                break;\r\n            }\r\n            selectedEditOptions[optionArray[i]] = editValue;\r\n            if ((!selectedEditOptions[optionArray[i]]) && optionArray[i].indexOf('content') < 0) {\r\n                selectedEditOptions[optionArray[i]] = 'default';\r\n            }\r\n        }\r\n    }\r\n\r\n    if (defaultBtnClicked) {\r\n        if (itemToChange === 'svg') {\r\n            delete editObj.vizOptions.text;\r\n        }\r\n        delete editObj.vizOptions[itemToChange];\r\n    } else {\r\n        editObj.vizOptions[itemToChange] = selectedEditOptions;\r\n    }\r\n\r\n    if (itemToChange === 'svg') {\r\n        delete editObj.vizOptions.svg;\r\n    }\r\n\r\n    //save vizOptions\r\n    editObj.onSaveCallback(editObj.vizOptions);\r\n}\r\n\r\n/**\r\n* @name applyEditMode\r\n* @desc applies individual viz option on the visual\r\n* @param {string} itemToChange - viz option to update\r\n* @param {object} options - viz option properties\r\n* @return {undefined} - no return\r\n*/\r\nfunction applyEditMode(itemToChange, options) {\r\n    var editObj = this,\r\n        object = editObj.chartDiv.select('.' + itemToChange),\r\n        objectGroups = object._groups,\r\n        objectTagName = objectGroups[0][0] ? objectGroups[0][0].tagName.toLowerCase() : null;\r\n\r\n    if (itemToChange === 'text') {\r\n        //do something if it is all the text that is being changed\r\n        object = editObj.chartDiv.selectAll('text');\r\n    }\r\n\r\n    //options by tagName\r\n    if (objectTagName === 'g') {\r\n        object = editObj.chartDiv.select('.' + itemToChange).selectAll('text');\r\n    } else if (objectTagName === 'rect') {\r\n        if (options['editable-bar']) {\r\n            object.attr('fill', options['editable-bar']);\r\n        }\r\n        if (options['editable-box']) {\r\n            object.attr('fill', options['editable-box']);\r\n        }\r\n    } else if (objectTagName === 'circle') {\r\n        if (options['editable-scatter']) {\r\n            object.attr('fill', options['editable-scatter']);\r\n        }\r\n        if (options['editable-bubble']) {\r\n            object.attr('fill', options['editable-bubble']);\r\n        }\r\n    } else if (objectTagName === 'path') {\r\n        if (options['editable-pie']) {\r\n            object.attr('fill', options['editable-pie']);\r\n        }\r\n    }\r\n\r\n    //standard options\r\n    //If a text increment exists, apply it based on the sign of the variable\r\n    if (options.hasOwnProperty('editable-text-increment')) {\r\n        editObj.changeFontSize(options['editable-text-increment']);\r\n    }\r\n\r\n    if (options.hasOwnProperty('editable-text-size')) {\r\n        object.style('font-size', options['editable-text-size'] + 'px');\r\n    }\r\n    if (options.hasOwnProperty('editable-text-color')) {\r\n        object.style('fill', options['editable-text-color']);\r\n        object.style('color', options['editable-text-color']);\r\n    }\r\n    if (options.hasOwnProperty('editable-num-format')) {\r\n        let expression = getFormatExpression(options['editable-num-format']);\r\n        object\r\n            .transition()\r\n            .text((d) => {\r\n                if (!isNaN(d) && typeof expression === 'function') {\r\n                    return (expression(d));\r\n                }\r\n                return d;\r\n            });\r\n    }\r\n    if (options.hasOwnProperty('editable-content')) {\r\n        if (options['editable-content'].length > 0) {\r\n            object.html(options['editable-content']);\r\n        }\r\n    }\r\n    editObj.removeEdit();\r\n}\r\n\r\n/**\r\n* @name applyAllEdits\r\n* @desc applies all viz options in the edit mode object\r\n* @return {undefined} - no return\r\n*/\r\nfunction applyAllEdits() {\r\n    let editObj = this;\r\n    for (let option in editObj.vizOptions) {\r\n        if (editObj.vizOptions.hasOwnProperty(option) && editObj.chartDiv.select(option)) {\r\n            editObj.applyEditMode(option, editObj.vizOptions[option]);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n* @name removeEdit\r\n* @desc removes edit div from the visual\r\n* @return {undefined} - no return\r\n*/\r\nfunction removeEdit() {\r\n    let editObj = this;\r\n    if (editObj.editDiv) {\r\n        editObj.editDiv.html('');\r\n        editObj.editDiv\r\n            .style('display', 'none');\r\n    }\r\n    editObj.editOptions = '';\r\n}\r\n\r\n/**\r\n* @name overlayDivPosition\r\n* @desc function to determine the placement of the div on the visual\r\n* @param {number} divWidth - width of the comment entry box\r\n* @param {number} divHeight - height of the comment entry box\r\n* @param {number} mouseX - x position of the click event\r\n* @param {number} mouseY - y position of the click event\r\n* @return {object} - position of div\r\n*/\r\nfunction overlayDivPosition(divWidth, divHeight, mouseX, mouseY) {\r\n    let editObj = this,\r\n        position = {\r\n            x: mouseX,\r\n            y: mouseY + 10\r\n        };\r\n    if (mouseX > parseInt(editObj.chartDiv.style('width'), 10) / 2) {\r\n        position.x = mouseX - divWidth;\r\n    }\r\n    if (mouseY - divHeight - 10 > 0) {\r\n        position.y = mouseY - divHeight - 10;\r\n    }\r\n    return position;\r\n}\r\n\r\n/**\r\n* @name getFormatExpression\r\n* @desc returns the d3 format expression for a given option\r\n* @param {string} option - type of data format\r\n* @return {function} - expression\r\n*/\r\nfunction getFormatExpression(option) {\r\n    let expression = '',\r\n        p;\r\n    if (option === 'currency') {\r\n        expression = d3.format('$,');\r\n    } else if (option === 'fixedCurrency') {\r\n        expression = d3.format('($.2f');\r\n    } else if (option === 'percent') {\r\n        p = Math.max(0, d3.precisionFixed(0.05) - 2);\r\n        expression = d3.format('.' + p + '%');\r\n    } else if (option === 'millions') {\r\n        p = d3.precisionPrefix(1e5, 1.3e6);\r\n        expression = d3.formatPrefix('.' + p, 1.3e6);\r\n    } else if (option === 'commas') {\r\n        expression = d3.format(',.0f');\r\n    } else {\r\n        expression = d3.format('');\r\n    }\r\n    return expression;\r\n}\r\n\r\nexport default jvEdit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/jvEdit.js","/***  jvBrush ***/\r\n'use-strict';\r\n\r\n/**jv Brush Flow\r\n*\r\n*  1. create new jvBrush object with a config object containing the specific jvChart and an onBrushCallback\r\n*  2. jvBrush exposes startBrush and removeBrush functions\r\n*  3. if startBrush is called with a d3.event, brush will assume that a force click event should be fired at the location of the d3.event\r\n*  4. if a d3.event is not given to startBrush(), a brush lisener will be added to the visual to listen for the user to brush\r\n*  5. After the user finishs brushing an area of the chart, brushEnd() is calle.\r\n*  6. brushEnd() will create a data object for the brushed area in the format:\r\n*      {'label1': ['value1','value2']}\r\n*      Example\r\n*      {'Movie_Genre': ['Drama','Documentary','Action']}\r\n*  7. brushEnd will then call the onBrushCallback function with the above data object\r\n*  8. brushEnd will finally call the removeBrush() function\r\n*/\r\n\r\n/**\r\n* @name jvBrush\r\n* @desc Constructor for JV Brush - creates brush mode for a jv visualization and executes a callback for the visual to be filtered\r\n* @param {object} configObj - constructor object containing the jvChart and other options\r\n* @return {undefined} - no return\r\n*/\r\nexport default class jvBrush {\r\n    constructor(configObj) {\r\n        var brushObj = this;\r\n        brushObj.chartDiv = configObj.jvChart.chartDiv;\r\n        brushObj.jvChart = configObj.jvChart;\r\n        brushObj.onBrushCallback = configObj.onBrushCallback;\r\n    }\r\n\r\n    /**\r\n    * @name removeBrush\r\n    * @desc removes the brush area from the visual\r\n    * @return {undefined} - no return\r\n    */\r\n    removeBrush() {\r\n        let brushObj = this;\r\n        brushObj.jvChart.chartDiv.selectAll('.brusharea').remove();\r\n    }\r\n\r\n    /**\r\n    * @name startBrush\r\n    * @desc removes the brush area from the visual\r\n    * @param {object} event - optional event to start brush immediately with a new mousedown\r\n    * @return {undefined} - no return\r\n    */\r\n    startBrush(event = false) {\r\n        let brushObj = this,\r\n            height = brushObj.jvChart.config.container.height,\r\n            width = brushObj.jvChart.config.container.width,\r\n            svg = brushObj.jvChart.svg;\r\n\r\n        if (brushObj.jvChart.config.type === 'singleaxis') {\r\n            brushObj.brushType = 'x';\r\n            svg.append('g')\r\n                .attr('class', 'brusharea')\r\n                .style('height', height + 'px')\r\n                .style('width', width + 'px')\r\n                .call(d3.brushX()\r\n                    .extent([[0, 0], [width, height]])\r\n                    .on('end', brushObj.brushEnd.bind(brushObj)));\r\n        } else if (brushObj.jvChart.config.type === 'clustergram') {\r\n            brushObj.brushType = 'xy';\r\n            svg.append('g')\r\n                .attr('class', 'brusharea')\r\n                .attr('transform', `translate(${brushObj.jvChart._vars.leftTreeWidth}, ${brushObj.jvChart._vars.topTreeHeight})`)\r\n                .style('height', height + 'px')\r\n                .style('width', width + 'px')\r\n                .call(d3.brush()\r\n                    .extent([[0, 0], [width, height]])\r\n                    .on('end', brushObj.brushEnd.bind(brushObj)));\r\n        } else {\r\n            brushObj.brushType = 'xy';\r\n            svg.append('g')\r\n                .attr('class', 'brusharea')\r\n                .style('height', height + 'px')\r\n                .style('width', width + 'px')\r\n                .call(d3.brush()\r\n                    .extent([[0, 0], [width, height]])\r\n                    .on('end', brushObj.brushEnd.bind(brushObj)));\r\n        }\r\n\r\n        if (event) {\r\n            //dispatch mousedown to start a brush at the event coordinates\r\n            let brushElement = svg.select('.brusharea').node(),\r\n                newEvent = new Event('mousedown');\r\n            newEvent.pageX = event.pageX;\r\n            newEvent.clientX = event.clientX;\r\n            newEvent.pageY = event.pageY;\r\n            newEvent.clientY = event.clientY;\r\n            newEvent.view = event.view;\r\n            brushElement.__data__ = { type: 'overlay' };\r\n            brushElement.dispatchEvent(newEvent);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @name brushEnd\r\n    * @desc called at the end of the user brushing which calls the onBrush callback\r\n    * @return {undefined} - no return\r\n    */\r\n    brushEnd() {\r\n        var brushObj = this,\r\n            xScale = brushObj.jvChart.currentData.xAxisScale,\r\n            yScale = brushObj.jvChart.currentData.yAxisScale,\r\n            filteredXAxisLabels = [],\r\n            filteredYAxisLabels = [],\r\n            shouldReset = false,\r\n            e = d3.event.selection,\r\n            returnObj,\r\n            filteredLabels = [],\r\n            filteredConcepts = {},\r\n            index,\r\n            filterCol,\r\n            filteredLabelsX,\r\n            filteredLabelsY,\r\n            cleanDataFlag = true;\r\n\r\n        if (e) {\r\n            if (brushObj.brushType === 'xy') {\r\n                if (xScale && typeof xScale.invert !== 'function') { //means that the scale is ordinal and not linear\r\n                    returnObj = jvBrush.calculateBrushAreaOrdinal(e[0][0], e[1][0], xScale);\r\n                    filteredXAxisLabels = returnObj.filteredAxisLabels;\r\n                    shouldReset = returnObj.shouldReset;\r\n                } else if (xScale) {\r\n                    //calculate labels for linear scale\r\n                    returnObj = jvBrush.calculateBrushAreaLinear(e[0][0], e[1][0], xScale, brushObj.jvChart.currentData, brushObj.jvChart.config.type, 'x');\r\n                    filteredXAxisLabels = returnObj.filteredAxisLabels;\r\n                    shouldReset = returnObj.shouldReset;\r\n                }\r\n\r\n                if (yScale && typeof yScale.invert !== 'function') { //means that the scale is oridnal and not linear\r\n                    returnObj = jvBrush.calculateBrushAreaOrdinal(e[0][1], e[1][1], yScale);\r\n                    filteredYAxisLabels = returnObj.filteredAxisLabels;\r\n                    if (returnObj.shouldReset) {\r\n                        shouldReset = true;\r\n                    }\r\n                } else if (yScale) {\r\n                    //calculate labels for linear scale\r\n                    returnObj = jvBrush.calculateBrushAreaLinear(e[0][1], e[1][1], yScale, brushObj.jvChart.currentData, brushObj.jvChart.config.type, 'y');\r\n                    filteredYAxisLabels = returnObj.filteredAxisLabels;\r\n                    if (returnObj.shouldReset) {\r\n                        shouldReset = true;\r\n                    }\r\n                } else if (brushObj.jvChart.config.type === 'heatmap') {\r\n                    returnObj = jvBrush.calculateHeatmapBrush(e, brushObj.jvChart.currentData, brushObj.jvChart);\r\n                    filteredLabelsX = returnObj.filteredXAxisLabels;\r\n                    filteredLabelsY = returnObj.filteredYAxisLabels;\r\n                    if (returnObj.shouldReset) {\r\n                        shouldReset = true;\r\n                    }\r\n                } else if (brushObj.jvChart.config.type === 'clustergram') {\r\n                    returnObj = jvBrush.calculateClustergramBrush(e, brushObj.jvChart.currentData, brushObj.jvChart);\r\n                    filteredLabelsX = returnObj.filteredXAxisLabels;\r\n                    filteredLabelsY = returnObj.filteredYAxisLabels;\r\n                    if (returnObj.shouldReset) {\r\n                        shouldReset = true;\r\n                    }\r\n                }\r\n            } else if (brushObj.brushType === 'x') {\r\n                returnObj = jvBrush.calculateBrushAreaLinear(e[0], e[1], xScale, brushObj.jvChart.currentData, brushObj.jvChart.config.type, 'x');\r\n                filteredXAxisLabels = returnObj.filteredAxisLabels;\r\n                if (returnObj.shouldReset) {\r\n                    shouldReset = true;\r\n                }\r\n            }\r\n        } else {\r\n            shouldReset = true;\r\n        }\r\n\r\n        if (filteredXAxisLabels.length > 0 && filteredYAxisLabels.length > 0) {\r\n            //merge axisLabels\r\n            for (let j = 0; j < filteredXAxisLabels.length; j++) {\r\n                index = filteredYAxisLabels.indexOf(filteredXAxisLabels[j]);\r\n                if (index > -1) {\r\n                    filteredLabels.push(filteredXAxisLabels[j]);\r\n                }\r\n            }\r\n        } else if (filteredXAxisLabels.length > 0) {\r\n            filteredLabels = filteredXAxisLabels;\r\n        } else if (filteredYAxisLabels.length > 0) {\r\n            filteredLabels = filteredYAxisLabels;\r\n        }\r\n\r\n        if (shouldReset) {\r\n            filteredLabels = [];\r\n        }\r\n\r\n        if (brushObj.jvChart.config.type === 'heatmap') {\r\n            let filterColX = brushObj.jvChart.currentData.dataTable.x,\r\n                filterColY = brushObj.jvChart.currentData.dataTable.y;\r\n            if (!shouldReset) {\r\n                if (filteredLabelsX.length > 0) {\r\n                    filteredConcepts[filterColX] = filteredLabelsX;\r\n                }\r\n                if (filteredLabelsY.length > 0) {\r\n                    filteredConcepts[filterColY] = filteredLabelsY;\r\n                }\r\n            } else {\r\n                filteredConcepts[filterColX] = [];\r\n                filteredConcepts[filterColY] = [];\r\n            }\r\n        } else if (brushObj.jvChart.config.type === 'clustergram') {\r\n            if (!shouldReset) {\r\n                let xLength = Object.keys(filteredLabelsX).length,\r\n                    yLength = Object.keys(filteredLabelsY).length;\r\n\r\n                for (let i = 0; i < xLength; i++) {\r\n                    let filterColX = brushObj.jvChart.currentData.dataTable['x_category ' + (xLength - i)];\r\n                    filteredConcepts[filterColX] = filteredLabelsX[i];\r\n                }\r\n                for (let i = 0; i < yLength; i++) {\r\n                    let filterColY = brushObj.jvChart.currentData.dataTable['y_category ' + (yLength - i)];\r\n                    filteredConcepts[filterColY] = filteredLabelsY[i];\r\n                }\r\n            }\r\n            cleanDataFlag = false;\r\n        } else {\r\n            if (brushObj.jvChart.config.type === 'gantt') {\r\n                filterCol = brushObj.jvChart.currentData.dataTable.group;\r\n            } else {\r\n                filterCol = brushObj.jvChart.currentData.dataTable.label;\r\n            }\r\n            filteredConcepts[filterCol] = filteredLabels;\r\n        }\r\n\r\n        //calls back to update data with brushed data\r\n        brushObj.onBrushCallback({\r\n            data: filteredConcepts,\r\n            reset: shouldReset,\r\n            clean: cleanDataFlag\r\n        });\r\n        brushObj.removeBrush();\r\n    }\r\n\r\n    /**\r\n    * @name calculateBrushAreaOrdinal\r\n    * @desc calculates the ordinal values that are in the brushed area\r\n    * @param {number} mousePosMin - lower bound mouse position\r\n    * @param {number} mousePosMax - upper bound mouse position\r\n    * @param {object} scale - d3 axis scale\r\n    * @return {Object} - object of filtered values\r\n    */\r\n    static calculateBrushAreaOrdinal(mousePosMin, mousePosMax, scale) {\r\n        let domain = scale.domain(),\r\n            padding = scale.padding(),\r\n            step = scale.step(),\r\n            minIndex, maxIndex,\r\n            paddingDistance = padding * step / 2,\r\n            filteredAxisLabels;\r\n\r\n        //determine min index\r\n        if (mousePosMin % step > step - paddingDistance) {\r\n            //don't include on min side\r\n            minIndex = (Math.floor(mousePosMin / step) + 1);\r\n        } else {\r\n            //include on min side\r\n            minIndex = (Math.floor(mousePosMin / step));\r\n        }\r\n\r\n        //determine max index\r\n        if (mousePosMax % step < paddingDistance) {\r\n            //don't include on max side\r\n            maxIndex = (Math.floor(mousePosMax / step) - 1);\r\n        } else {\r\n            //include on max side\r\n            maxIndex = (Math.floor(mousePosMax / step));\r\n            if (maxIndex === domain.length) {\r\n                maxIndex -= 1;\r\n            }\r\n        }\r\n        filteredAxisLabels = domain.slice(minIndex, maxIndex + 1);\r\n        return { filteredAxisLabels: filteredAxisLabels, shouldReset: filteredAxisLabels.length === 0 };\r\n    }\r\n\r\n\r\n    /**\r\n    * @name calculateBrushAreaLinear\r\n    * @desc calculates the linear values that are in the brushed area\r\n    * @param {number} mousePosMin - lower bound mouse position\r\n    * @param {number} mousePosMax - upper bound mouse position\r\n    * @param {object} scale - d3 axis scale\r\n    * @param {object} data - chartData\r\n    * @param {string} type - visual type\r\n    * @param {string} axis - x / y / z\r\n    * @return {Object} - object of filtered values\r\n    */\r\n    static calculateBrushAreaLinear(mousePosMin, mousePosMax, scale, data, type, axis) {\r\n        let filteredAxisLabels = [],\r\n            min,\r\n            max,\r\n            axisLabel;\r\n\r\n        //switch min and max if scale is y due to svg drawing (y axis increases up the screen while mousePos decreases)\r\n        if (axis === 'y') {\r\n            max = scale.invert(mousePosMin);\r\n            min = scale.invert(mousePosMax);\r\n        } else {\r\n            min = scale.invert(mousePosMin);\r\n            max = scale.invert(mousePosMax);\r\n        }\r\n\r\n        if (type === 'bar') {\r\n            for (axisLabel of data.legendData) {\r\n                for (let dataElement of data.chartData) {\r\n                    if (dataElement[axisLabel] >= min) {\r\n                        filteredAxisLabels.push(dataElement[data.dataTable.label]);\r\n                    }\r\n                }\r\n            }\r\n        } else if (type === 'gantt') {\r\n            max = new Date(max);\r\n            min = new Date(min);\r\n            for (let i = 0; i < data.legendData.length; i++) {\r\n                let count = i + 1,\r\n                    startDate,\r\n                    endDate;\r\n                for (let dataElement of data.chartData) {\r\n                    startDate = new Date(dataElement[data.dataTable['start ' + count]]);\r\n                    endDate = new Date(dataElement[data.dataTable['end ' + count]]);\r\n                    if ((startDate <= max && startDate >= min) || (endDate <= max && endDate >= min) || (startDate <= min && endDate >= max)) {\r\n                        filteredAxisLabels.push(dataElement[data.dataTable.group]);\r\n                    }\r\n                }\r\n            }\r\n        } else if (type === 'line' || type === 'area' || type === 'singleaxis') {\r\n            for (axisLabel of data.legendData) {\r\n                for (let dataElement of data.chartData) {\r\n                    if (dataElement[axisLabel] <= max && dataElement[axisLabel] >= min) {\r\n                        filteredAxisLabels.push(dataElement[data.dataTable.label]);\r\n                    }\r\n                }\r\n            }\r\n        } else if (type === 'scatterplot') {\r\n            axisLabel = data.dataTable[axis];\r\n            for (let dataElement of data.chartData) {\r\n                if (dataElement[axisLabel] <= max && dataElement[axisLabel] >= min) {\r\n                    filteredAxisLabels.push(dataElement[data.dataTable.label]);\r\n                }\r\n            }\r\n        } else if (type === 'boxwhisker') {\r\n            axisLabel = data.dataTable.value;\r\n\r\n            for (let dataElement of data.chartData) {\r\n                if (dataElement[axisLabel] <= max && dataElement[axisLabel] >= min) {\r\n                    filteredAxisLabels.push(dataElement[data.dataTable.label]);\r\n                }\r\n            }\r\n        } else if (type === 'heatmap') {\r\n            axisLabel = data.dataTable[axis];\r\n            for (let dataElement of data.chartData) {\r\n                if (dataElement[axisLabel] <= max && dataElement[axisLabel] >= min) {\r\n                    filteredAxisLabels.push(dataElement[data.dataTable.label]);\r\n                }\r\n            }\r\n        }\r\n        return { filteredAxisLabels: filteredAxisLabels, shouldReset: filteredAxisLabels.length === 0 };\r\n    }\r\n\r\n    /**\r\n    * @name calculateHeatmapBrush\r\n    * @desc calculates values inside of brushed area of a heatmap\r\n    * @param {array} e - mouse extent for location of brushed area\r\n    * @param {array} data - chart data\r\n    * @param {array} chart - jvChart\r\n    * @return {object} - filtered data\r\n    */\r\n    static calculateHeatmapBrush(e, data, chart) {\r\n        let mouseXmin = e[0][0],\r\n            mouseYmin = e[0][1],\r\n            mouseXmax = e[1][0],\r\n            mouseYmax = e[1][1],\r\n            filteredXAxisLabels = [],\r\n            filteredYAxisLabels = [],\r\n            reset = true,\r\n            xBucketMax = Math.floor(mouseXmax / chart._vars.heatGridSize) + 1,\r\n            yBucketMax = Math.floor(mouseYmax / chart._vars.heatGridSize) + 1,\r\n            xBucketMin = Math.floor(mouseXmin / chart._vars.heatGridSize),\r\n            yBucketMin = Math.floor(mouseYmin / chart._vars.heatGridSize);\r\n\r\n        for (let i = 0; i < xBucketMax; i++) {\r\n            if (i >= xBucketMin) {\r\n                filteredXAxisLabels.push(data.xAxisData.values[i]);\r\n                reset = false;\r\n            }\r\n        }\r\n        for (let i = 0; i < yBucketMax; i++) {\r\n            if (i >= yBucketMin) {\r\n                filteredYAxisLabels.push(data.yAxisData.values[i]);\r\n                reset = false;\r\n            }\r\n        }\r\n\r\n        return { filteredXAxisLabels: filteredXAxisLabels, filteredYAxisLabels: filteredYAxisLabels, shouldReset: reset };\r\n    }\r\n\r\n    /**\r\n    * @name calculateClustergramBrush\r\n    * @desc calculates values inside of brushed area of a clustergram\r\n    * @param {array} e - mouse extent for location of brushed area\r\n    * @param {array} data - chart data\r\n    * @param {array} chart - jvChart\r\n    * @return {object} - filtered data\r\n    */\r\n    static calculateClustergramBrush(e, data, chart) {\r\n        let mouseXmin = e[0][0],\r\n            mouseYmin = e[0][1],\r\n            mouseXmax = e[1][0],\r\n            mouseYmax = e[1][1],\r\n            filteredXAxisLabels = [],\r\n            filteredYAxisLabels = [],\r\n            reset = true,\r\n            xBucketMax = Math.floor(mouseXmax / chart._vars.clustergramGridWidth) + 1,\r\n            yBucketMax = Math.floor(mouseYmax / chart._vars.clustergramGridHeight) + 1,\r\n            xBucketMin = Math.floor(mouseXmin / chart._vars.clustergramGridWidth),\r\n            yBucketMin = Math.floor(mouseYmin / chart._vars.clustergramGridHeight),\r\n            xLevels = {},\r\n            yLevels = {};\r\n\r\n        for (let i = 0; i < xBucketMax; i++) {\r\n            if (i >= xBucketMin) {\r\n                filteredXAxisLabels.push(data.xAxisData[i]);\r\n                reset = false;\r\n            }\r\n        }\r\n        for (let i = 0; i < yBucketMax; i++) {\r\n            if (i >= yBucketMin) {\r\n                filteredYAxisLabels.push(data.yAxisData[i]);\r\n                reset = false;\r\n            }\r\n        }\r\n\r\n        //X Axis\r\n        //Dynamically create arrays for each level of the hierarchy\r\n        if (filteredXAxisLabels[0]) {\r\n            let parentCountX = (filteredXAxisLabels[0].match(/\\./g) || []).length;\r\n            for (let i = 0; i < parentCountX + 1; i++) {\r\n                xLevels[i] = [];\r\n            }\r\n\r\n            //Populate the hierarchy arrays with the labels of that respective hierarchy\r\n            for (let i = 0; i < filteredXAxisLabels.length; i++) {\r\n                if (filteredXAxisLabels[i]) {\r\n                    var xFields = filteredXAxisLabels[i].split('.');\r\n                    for (let k = 0; k < xFields.length; k++) {\r\n                        if (xLevels[k].indexOf(xFields[k]) === -1) {\r\n                            xLevels[k].push(xFields[k]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        //Y Axis\r\n        //Dynamically create arrays for each level of the hierarchy\r\n        if (filteredYAxisLabels[0]) {\r\n            let parentCountY = (filteredYAxisLabels[0].match(/\\./g) || []).length;\r\n            for (let i = 0; i < parentCountY + 1; i++) {\r\n                yLevels[i] = [];\r\n            }\r\n\r\n            //Populate the hierarchy arrays with the labels of that respective hierarchy\r\n            for (let i = 0; i < filteredYAxisLabels.length; i++) {\r\n                if (filteredYAxisLabels[i]) {\r\n                    let yFields = filteredYAxisLabels[i].split('.');\r\n                    for (let k = 0; k < yFields.length; k++) {\r\n                        if (yLevels[k].indexOf(yFields[k]) === -1) {\r\n                            yLevels[k].push(yFields[k]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return { filteredXAxisLabels: xLevels, filteredYAxisLabels: yLevels, shouldReset: reset };\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/jvBrush.js","/***  jvTip ***/\r\n\r\nfunction jvTip(configObj) {\r\n    'use strict';\r\n    let tip = this,\r\n        defaultConfig = {\r\n            type: 'simple'\r\n        };\r\n\r\n    tip.tipConfig = configObj.tipConfig || defaultConfig;\r\n    tip.chartDiv = configObj.chartDiv;\r\n\r\n    //Create initial div\r\n    tip.chartDiv.select('.jv-tooltip').remove();\r\n\r\n    tip.chartDiv.append('div')\r\n        .attr('class', 'tooltip jv-tooltip')\r\n        .style('pointer-events', 'none');\r\n}\r\n\r\njvTip.prototype.showTip = showTip;\r\njvTip.prototype.hideTip = hideTip;\r\njvTip.prototype.generateSimpleTip = generateSimpleTip;\r\n\r\nfunction showTip(transitionDuration = 50) {\r\n    let tip = this,\r\n        left = 'auto',\r\n        top = 'auto',\r\n        mouse = d3.mouse(tip.chartDiv.select('svg').node()),\r\n        //Logic to determine where tooltip will be placed on page\r\n        leftOfMouse = mouse[0] > (tip.chartDiv._groups[0][0].clientWidth / 2),\r\n        topOfMouse = mouse[1] < (tip.chartDiv._groups[0][0].clientHeight / 2),\r\n        tooltipHeight = tip.toolTip._groups[0][0].clientHeight === 0 ? 75 : tip.toolTip._groups[0][0].clientHeight,\r\n        tooltipWidth = tip.toolTip._groups[0][0].clientWidth,\r\n        t;\r\n\r\n    if (leftOfMouse) {\r\n        if (tooltipWidth === 0) {\r\n            tooltipWidth = 250;\r\n        }\r\n        left = mouse[0] - tooltipWidth;\r\n    } else {\r\n        left = mouse[0];\r\n    }\r\n    if (topOfMouse) {\r\n        top = mouse[1];\r\n    } else {\r\n        if (tooltipHeight === 0) {\r\n            tooltipHeight = 75;\r\n        }\r\n        top = mouse[1] - tooltipHeight;\r\n    }\r\n\r\n    if (!leftOfMouse && topOfMouse) {\r\n        left = mouse[0] + 13;\r\n    }\r\n\r\n\r\n    //COOL CURSOR, a function of the height and width of the container\r\n    //var container = tip.chartDiv.select('.bar-container').node().getBoundingClientRect();\r\n    //svgMouse = d3.mouse(tip.chartDiv.select('.bar-container').node());\r\n\r\n    //var tooltipHeight = tip.toolTip._groups[0][0].clientHeight === 0 ? 75 : tip.toolTip._groups[0][0].clientHeight;\r\n    //top = mouse[1] - (tooltipHeight * svgMouse[1] / container.height);\r\n\r\n    //var tooltipWidth = tip.toolTip._groups[0][0].clientWidth;\r\n    //left = mouse[0] - (tooltipWidth * svgMouse[0] / container.width);\r\n\r\n    //STICKY CURSOR IN THE BOTTOM RIGHT\r\n    //top = mouse[1];\r\n    //left = mouse[0];\r\n    //set max left\r\n    //if(left > container.width - tooltipWidth + container.left) {\r\n    //left = container.width - tooltipWidth + container.left;\r\n    //}\r\n\r\n    ////set max top\r\n    //if (top > container.height - tooltipHeight + container.top) {\r\n    //top = container.height - tooltipHeight + container.top;\r\n    //}\r\n\r\n    t = d3.transition()\r\n        .duration(transitionDuration)\r\n        .ease(d3.easeLinear);\r\n\r\n    tip.toolTip\r\n        .transition(t)\r\n        .style('left', left + 'px')\r\n        .style('top', top + 'px')\r\n        .style('display', 'block')\r\n        .style('opacity', 1);\r\n}\r\n\r\nfunction hideTip() {\r\n    let tip = this,\r\n        t = d3.transition()\r\n            .duration('100')\r\n            .ease(d3.easeLinear);\r\n    if (tip.toolTip) {\r\n        tip.toolTip.transition(t).style('display', 'none');\r\n    }\r\n}\r\n\r\n/************************************************  Declare jv tip components *******************************************************************************/\r\nvar jvHr = '<hr style=\\'margin:3px 0 3px 0;\\'/>';\r\n\r\nfunction getValueContent(item, value, colorTile) {\r\n    let valueString = value ? `: ${value}` : '',\r\n        colorTileString = colorTile ? colorTile : '';\r\n    return `<span class='jv-tip-content '>${colorTileString}<span class=\"jv-tip-item-text\">${item}</span>${valueString}</span><br/>`;\r\n}\r\n\r\nfunction getTitleTemplate(dataObj) {\r\n    return `<div class='title jv-top-margin jv-inline'><b>${dataObj.title}</b></div>${jvHr}`;\r\n}\r\n\r\nfunction getColorTile(color) {\r\n    if (color) {\r\n        return `<div class='d3-tooltip-circle jv-inline jv-tip-color-tile' style='background:${color}'></div>`;\r\n    }\r\n    return \"<div class='jv-inline jv-full-width'>\";\r\n}\r\n\r\n\r\n/************************************************* Viz Specific Functions **********************************************************************************/\r\nfunction generateSimpleTip(dataObj, dataTable) {\r\n    let tip = this,\r\n        tooltipHtml = '';\r\n\r\n    if (dataObj.hasOwnProperty('title') && dataObj.title === '') {\r\n        dataObj.title = 'Empty';\r\n    }\r\n\r\n    if (dataObj.viz === 'clusters' || dataObj.viz === 'circleviewplot' || dataObj.viz === 'scatterplot' || dataObj.viz === 'treemap' || dataObj.viz === 'singleaxis') {\r\n        tooltipHtml = generateSingleColorHTML(dataObj, dataTable);\r\n    } else if (dataObj.viz === 'radial' || dataObj.viz === 'pie') {\r\n        tooltipHtml = generatePieHTML(dataObj, dataTable);\r\n    } else if (dataObj.viz === 'circlepack' || dataObj.viz === 'sunburst') {\r\n        tooltipHtml = generatePackHTML(dataObj, dataTable);\r\n    } else if (dataObj.viz === 'heatmap' || dataObj.viz === 'cloud') {\r\n        tooltipHtml = generateHeatmapHTML(dataObj, dataTable);\r\n    } else if (dataObj.viz === 'sankey') {\r\n        tooltipHtml = generateSankeyHTML(dataObj, dataTable);\r\n    } else if (dataObj.viz === 'bubble') {\r\n        tooltipHtml = generateBubbleHTML(dataObj);\r\n    } else if (dataObj.viz === 'boxwhisker') {\r\n        tooltipHtml = generateBoxHTML(dataObj);\r\n    } else if (dataObj.viz === 'clustergram') {\r\n        tooltipHtml = generateClustergramHTML(dataObj);\r\n    } else if (dataObj.viz === 'gantt') {\r\n        tooltipHtml = generateGanttHTML(dataObj, dataTable);\r\n    } else {\r\n        tooltipHtml = generateSimpleHTML(dataObj, dataTable);\r\n    }\r\n\r\n    //add content to tooltip\r\n    tip.toolTip = tip.chartDiv.select('.tooltip')\r\n        .html(tooltipHtml);\r\n\r\n    //paint the tooltip\r\n    tip.showTip(0);\r\n\r\n    return tip.tooltip;\r\n}\r\n\r\nfunction generateSimpleHTML(dataObj) {\r\n    let tooltipText;\r\n    tooltipText = `<div><div class='title jv-tip-container jv-top-margin'><b>${dataObj.title}</b></div>${jvHr}`;\r\n\r\n    for (let item in dataObj.tipData) {\r\n        tooltipText += getValueContent(item, formatValue(dataObj.tipData[item]), getColorTile(dataObj.color[item]));\r\n    }\r\n    tooltipText += '</div>';\r\n    return tooltipText;\r\n}\r\n\r\nfunction generateSingleColorHTML(dataObj, dataTable) {\r\n    let tooltipText,\r\n        tooltipColor,\r\n        showColorCircle = true,\r\n        colorCircle = '';\r\n\r\n    if (!!dataObj.color[dataObj.data[dataTable.series]]) {\r\n        tooltipColor = dataObj.color[dataObj.data[dataTable.series]];\r\n    } else if (!!dataObj.color[dataTable.label] && dataObj.viz !== 'singleaxis') {\r\n        tooltipColor = dataObj.color[dataTable.label];\r\n    } else {\r\n        showColorCircle = false;\r\n    }\r\n\r\n    if (showColorCircle) {\r\n        colorCircle = getColorTile(tooltipColor);\r\n    } else {\r\n        colorCircle = getColorTile();\r\n    }\r\n\r\n    tooltipText = `<div class='jv-inline jv-full-width'>${colorCircle}<div class='title jv-inline jv-full-width jv-top-margin'><b>${dataObj.title}</b></div>${jvHr}`;\r\n\r\n    for (let item in dataObj.tipData) {\r\n        tooltipText += getValueContent(item, formatValue(dataObj.tipData[item]));\r\n    }\r\n    tooltipText += '</div>';\r\n    return tooltipText;\r\n}\r\n\r\nfunction generatePackHTML(dataObj) {\r\n    let tooltipText;\r\n    tooltipText = `<div class='jv-inline jv-full-width'>\r\n        ${getColorTile(dataObj.data.color)}\r\n        ${getTitleTemplate(dataObj)}`;\r\n\r\n    for (let item in dataObj.tipData) {\r\n        tooltipText += getValueContent(item, formatValue(dataObj.tipData[item]));\r\n    }\r\n    tooltipText += '</div>';\r\n    return tooltipText;\r\n}\r\n\r\nfunction generateBubbleHTML(dataObj) {\r\n    let tooltipText;\r\n    tooltipText = `<div class='jv-inline jv-full-width'>\r\n        ${getColorTile(dataObj.data.color)}\r\n        ${getTitleTemplate(dataObj)}`;\r\n\r\n    for (let item in dataObj.tipData) {\r\n        if (item === 'color') {\r\n            continue;\r\n        }\r\n        tooltipText += getValueContent(item, formatValue(dataObj.tipData[item]));\r\n    }\r\n    tooltipText += '</div>';\r\n    return tooltipText;\r\n}\r\n\r\nfunction generateBoxHTML(dataObj) {\r\n    let tooltipText;\r\n    tooltipText = '<div class=\"jv-inline jv-full-width\">';\r\n\r\n    for (let item in dataObj.tipData) {\r\n        if (dataObj.tipData.hasOwnProperty(item)) {\r\n            tooltipText += getValueContent(item, formatValue(dataObj.tipData[item]));\r\n        }\r\n    }\r\n    tooltipText += '</div>';\r\n    return tooltipText;\r\n}\r\n\r\nfunction generateHeatmapHTML(dataObj) {\r\n    let tooltipText;\r\n    if (dataObj.xAxisCat) {\r\n        tooltipText = `<div class='jv-inline jv-full-width'>\r\n            ${getColorTile(dataObj.color)}` +\r\n            \"<div class='title jv-top-margin jv-inline jv-full-width'><b>\" + dataObj.data.xAxisName + \"</b></div><hr style='margin:3px 0 3px 0;'/>\";\r\n\r\n        tooltipText += \"<span class='jv-tip-content'>\" + dataObj.xAxisCat + '</span><br/>';\r\n        tooltipText += '</div>';\r\n        return tooltipText;\r\n    } else if (dataObj.yAxisCat) {\r\n        tooltipText = `<div class='jv-inline jv-full-width'>\r\n            ${getColorTile(dataObj.color)}` +\r\n            \"<div class='title jv-top-margin jv-inline jv-full-width'><b>\" + dataObj.data.yAxisName + \"</b></div><hr style='margin:3px 0 3px 0;'/>\";\r\n\r\n        tooltipText += \"<span class='jv-tip-content'>\" + dataObj.yAxisCat + '</span><br/>';\r\n        tooltipText += '</div>';\r\n        return tooltipText;\r\n    }\r\n    tooltipText = `<div class='jv-inline jv-full-width'>\r\n            ${getColorTile(dataObj.color)}\r\n            ${getTitleTemplate(dataObj)}`;\r\n\r\n    for (let item in dataObj.tipData) {\r\n        tooltipText += getValueContent(item, formatValue(dataObj.tipData[item]));\r\n    }\r\n    tooltipText += '</div>';\r\n    return tooltipText;\r\n}\r\n\r\nfunction generateClustergramHTML(dataObj) {\r\n    let tooltipText;\r\n    dataObj.title = dataObj.title.replace(/_/g, ' ');\r\n    tooltipText = `<div class='jv-inline jv-full-width'>\r\n    ${getColorTile(dataObj.color)}\r\n    ${getTitleTemplate(dataObj)}`;\r\n\r\n    for (let item in dataObj.tipData) {\r\n        tooltipText += getValueContent(item, formatValue(dataObj.tipData[item]));\r\n    }\r\n    tooltipText += '</div>';\r\n\r\n    return tooltipText;\r\n}\r\n\r\nfunction generateGanttHTML(dataObj, dataTable) {\r\n    var tooltipText;\r\n\r\n    dataObj.title = dataObj.title.replace(/_/g, \" \");\r\n\r\n    tooltipText = `<div class='jv-inline jv-full-width'>\r\n    ${getTitleTemplate(dataObj)}`;\r\n\r\n    for (var i = 1; i <= dataObj.data.length; i++) {\r\n        var startValue = dataObj.tipData[dataTable[\"start \" + i]];\r\n        var endValue = dataObj.tipData[dataTable[\"end \" + i]];\r\n        var durationValue = dataObj.tipData[\"Duration \" + i];\r\n        if (durationValue !== \"0 days\" && durationValue != null && startValue != null && endValue != null) {\r\n            endValue = endValue.substring(0, 10);\r\n            startValue = startValue.substring(0, 10);\r\n            var item = dataTable[\"start \" + i];\r\n            // if (item.substring(0,6) === \"Start \") {\r\n            //     item = item.substring(6);\r\n            // }\r\n\r\n            var value = startValue + \" to \" + endValue;\r\n            tooltipText += getValueContent(item, value, getColorTile(dataObj.color[dataTable[\"start \" + i]]));\r\n            tooltipText += getValueContent(\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Duration\", durationValue);\r\n        }\r\n    }\r\n    tooltipText += \"</div>\";\r\n\r\n    return tooltipText;\r\n}\r\n\r\nfunction generatePieHTML(dataObj, dataTable) {\r\n    let tooltipText;\r\n    tooltipText = `<div class='jv-inline jv-full-width'>${getColorTile(dataObj.color[dataObj.data.label])}${getTitleTemplate(dataObj)}`;\r\n\r\n    for (let item in dataObj.tipData) {\r\n        tooltipText += getValueContent(dataTable[item], formatValue(dataObj.tipData[item]));\r\n    }\r\n    tooltipText += '</div>';\r\n    return tooltipText;\r\n}\r\n\r\nfunction generateSankeyHTML(dataObj) {\r\n    let tooltipText;\r\n    tooltipText = `<div class='jv-inline jv-full-width'>${getTitleTemplate(dataObj)}`;\r\n\r\n    for (let item in dataObj.tipData) {\r\n        tooltipText += getValueContent(dataObj.valueName, formatValue(dataObj.tipData[item]));\r\n    }\r\n    tooltipText += '</div>';\r\n    return tooltipText;\r\n}\r\n\r\nfunction formatValue(val) {\r\n    if (!isNaN(val)) {\r\n        let formatNumber = d3.format(',.0f');\r\n        if (val >= 1000000) {\r\n            //millions\r\n            //var p = d3.precisionPrefix(1e5, 1.3e6);\r\n            //formatNumber = d3.formatPrefix(\".\" + p, 1.3e6);\r\n            formatNumber = d3.format(',.2f');\r\n        } else if (val <= 100) {\r\n            //2 decimals\r\n            formatNumber = d3.format(',.2f');\r\n        }\r\n        return formatNumber(val);\r\n    }\r\n    return val;\r\n}\r\n\r\nexport default jvTip;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/jvTip.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.line = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData,\r\n    highlightFromEventData: highlightFromEventData\r\n};\r\n\r\njvCharts.prototype.generateLine = generateLine;\r\njvCharts.prototype.setLineThresholdData = setLineThresholdData;\r\n\r\n/************************************************ Line functions ******************************************************/\r\n\r\n/**setLineData\r\n *  gets line data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    //sort chart data if there is a sort type and label in the _vars\r\n    if (chart._vars.sortType) {\r\n        if (chart._vars.sortLabel && chart._vars.sortType !== 'default') {\r\n            chart.organizeChartData(chart._vars.sortLabel, chart._vars.sortType);\r\n        }\r\n    }\r\n    chart.data.legendData = setBarLineLegendData(chart.data);\r\n    chart.data.xAxisData = chart.setAxisData('x', chart.data);\r\n    chart.data.yAxisData = chart.setAxisData('y', chart.data);\r\n\r\n    if (chart._vars.seriesFlipped) {\r\n        chart.setFlippedSeries(chart.data.dataTableKeys);\r\n        chart.flippedData.color = jvCharts.setChartColors(chart._vars.color, chart.flippedData.legendData, chart.colors);\r\n    }\r\n\r\n    if (chart.data.dataTable.hasOwnProperty('series')) {\r\n        chart.data.chartData = setSeriesData(chart.data.chartData, chart.data.dataTable);\r\n    }\r\n\r\n    //define color object for chartData\r\n    chart.data.color = jvCharts.setChartColors(chart._vars.color, chart.data.legendData, chart.colors);\r\n}\r\n\r\nfunction getEventData(event) {\r\n    var chart = this;\r\n    if (event.target.classList.value.split('bar-col-')[1]) {\r\n        return {\r\n            data: {\r\n                [chart.currentData.dataTable.label]: [jvCharts.getRawForValue(event.target.classList.value.split('bar-col-')[1])]\r\n            },\r\n            node: event.target\r\n        };\r\n    } else if (event.target.classList.value.indexOf('line-container') > -1) {\r\n        return {\r\n            data: {}\r\n        };\r\n    }\r\n    return {\r\n        data: false\r\n    };\r\n}\r\n\r\nfunction highlightFromEventData(event) {\r\n    let chart = this,\r\n        label = event.data[chart.currentData.dataTable.label][0],\r\n        cssClass = '.highlight-class-' + jvCharts.getViewForValue(label),\r\n        node = chart.svg.selectAll(cssClass);\r\n\r\n    chart.svg.select('.line-container').selectAll('circle')\r\n        .attr('stroke', 0)\r\n        .attr('stroke-width', 0);\r\n    //highlight necessary circles\r\n    node\r\n        .attr('stroke', chart._vars.highlightBorderColor)\r\n        .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n}\r\n\r\n/**\r\n * @name setSeriesData\r\n * @desc Sets chartData to contain a series data if the series field exists in visual panel\r\n */\r\nfunction setSeriesData(data, dataTable) {\r\n    var labelList = [],\r\n        add,\r\n        newData = [];\r\n    //Get unique label list\r\n    for (let dataEle of data) {\r\n        add = true;\r\n        for (let j = 0; j < labelList.length; j++) {\r\n            if (dataEle[dataTable.label] === labelList[j]) {\r\n                add = false;\r\n                break;\r\n            }\r\n        }\r\n        if (add) {\r\n            labelList.push(dataEle[dataTable.label]);\r\n        }\r\n    }\r\n    //Iterate over label list\r\n    var newData = [];\r\n    for(let i = 0; i < labelList.length; i++){\r\n        var dataObj = {};\r\n        dataObj[dataTable.label] = labelList[i];\r\n        for(let j = 0; j < data.length; j++){\r\n            if(data[j][dataTable.label] === labelList[i]) {\r\n                var newEntry = data[j][dataTable.series] + ' ' + dataTable['value 1'];\r\n                dataObj[newEntry] = data[j][dataTable['value 1']];\r\n            }\r\n        }\r\n        newData.push(dataObj);\r\n    }\r\n    return newData;\r\n}\r\n\r\n/**setBarLineLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend tex\r\n */\r\nfunction setBarLineLegendData(data) {\r\n    var legendArray = [];\r\n\r\n    if (data.dataTable.hasOwnProperty('series')) {\r\n        for (let i = 0; i < data.chartData.length; i++) {\r\n            var addToLegend = true;\r\n            for (let j = 0; j < legendArray.length; j++) {\r\n                var entry = data.chartData[i][data.dataTable.series] + ' ' + data.dataTable['value 1'];\r\n                if (entry === legendArray[j]) {\r\n                    addToLegend = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (addToLegend) {\r\n                var newEntry = data.chartData[i][data.dataTable.series] + ' ' + data.dataTable['value 1'];\r\n                legendArray.push(newEntry);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        for (var item in data.dataTable) {\r\n            if (data.dataTable.hasOwnProperty(item)) {\r\n                if (item !== 'label' && item.indexOf('tooltip') === -1) {\r\n                    legendArray.push(data.dataTable[item]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return legendArray;\r\n}\r\n/**paintLineChart\r\n *\r\n * The initial starting point for line chart, begins the drawing process. Must already have the data stored in the chart\r\n * object\r\n */\r\nfunction paint() {\r\n    var chart = this;\r\n    //Uses the original data and then manipulates it based on any existing options\r\n    var dataObj = chart.getBarDataFromOptions();\r\n\r\n    //assign current data which is used by all bar chart operations\r\n    chart.currentData = dataObj;\r\n\r\n    //generate svg dynamically based on legend data\r\n    chart.generateSVG(dataObj.legendData);\r\n    chart.generateXAxis(dataObj.xAxisData);\r\n    chart.generateYAxis(dataObj.yAxisData);\r\n    chart.generateLegend(dataObj.legendData, 'generateLine');\r\n    if (chart._vars.rotateAxis) {\r\n        chart.formatXAxisLabels(dataObj.xAxisScale.ticks().length);\r\n    } else {\r\n        chart.formatXAxisLabels(dataObj.xAxisScale.domain().length);\r\n    }\r\n\r\n    chart.generateLine(dataObj);\r\n}\r\n\r\n/**generateLine\r\n *\r\n * Paints the lines\r\n * @params lineData\r\n */\r\nfunction generateLine(lineData) {\r\n    var chart = this,\r\n        svg = chart.svg;\r\n\r\n    svg.selectAll('g.' + chart.config.type + '-container').remove();\r\n    var lines = svg.append('g')\r\n        .attr('class', chart.config.type + '-container')\r\n        .selectAll('g');\r\n\r\n    var dataHeaders = lineData.legendData;\r\n\r\n    if (chart._vars.seriesFlipped && chart._vars.flippedLegendHeaders) {\r\n        dataHeaders = chart._vars.flippedLegendHeaders;\r\n    } else if (chart._vars.legendHeaders) {\r\n        dataHeaders = chart._vars.legendHeaders;\r\n    }\r\n\r\n    var lineDataNew = jvCharts.getToggledData(lineData, dataHeaders);\r\n\r\n    //If it's an area chart, add the area\r\n    if (chart.config.type === 'area') {\r\n        chart.fillArea(lineDataNew);\r\n    }\r\n\r\n    generateLineGroups(lines, lineDataNew, chart);\r\n    var eventGroups = jvCharts.generateEventGroups(lines, lineDataNew, chart);\r\n\r\n    eventGroups\r\n        .on('mouseover', function (d, i, j) { //Transitions in D3 don't support the 'on' function They only exist on selections. So need to move that event listener above transition and after append\r\n            if (chart.showToolTip) {\r\n                //Get tip data\r\n                var tipData = chart.setTipData(d, i);\r\n\r\n                //Draw tip\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function (d) {\r\n            chart.tip.hideTip();\r\n            svg.selectAll('.tip-line').remove();\r\n        });\r\n\r\n    chart.displayValues();\r\n    chart.generateClipPath();\r\n    chart.generateLineThreshold();\r\n\r\n    return lines;\r\n}\r\n\r\n/**generateLineGroups\r\n *\r\n * Paints the groups of the lines\r\n * @params chartContainer, barData, chart\r\n */\r\nfunction generateLineGroups(lineContainer, lineData, chart) {\r\n    var container = chart.config.container,\r\n        xAxisData = chart.currentData.xAxisData,\r\n        yAxisData = chart.currentData.yAxisData,\r\n        legendData = chart.currentData.legendData,\r\n        colors = chart._vars.color,\r\n        lines,\r\n        lineLength = lineData.length,\r\n        legendLength = legendData.length;\r\n\r\n    //Get Position Calculations\r\n    var x = jvCharts.getAxisScale('x', xAxisData, container, chart._vars, 'no-padding');\r\n    var y = jvCharts.getAxisScale('y', yAxisData, container, chart._vars, 'no-padding');\r\n\r\n    var xTranslate,\r\n        yTranslate;\r\n\r\n    if (chart._vars.rotateAxis === true) {\r\n        xTranslate = function (d, i) {\r\n            if (d === '') {\r\n                return x('EMPTY_STRING');\r\n            }\r\n            return x(d);\r\n        };\r\n        yTranslate = function (d, i) {\r\n            return (y(lineData[i][yAxisData.label])) + (container.height / (lineLength) / 2);//+ container.height / (lineLength) / 2  - y.paddingInner());\r\n        };\r\n    } else {\r\n        xTranslate = function (d, i) {\r\n            if (lineData[i][xAxisData.label] === '') {\r\n                lineData[i][xAxisData.label] = 'EMPTY_STRING';\r\n            }\r\n            return (x(lineData[i][xAxisData.label])) + (container.width / (lineLength) / 2);//+ container.width / (lineLength) / 2 - x.paddingInner());\r\n        };\r\n        yTranslate = function (d, i) {\r\n            return y(d);\r\n        };\r\n    }\r\n\r\n    //Append lines and circles\r\n\r\n    var uniqueXAxisData = [];\r\n    for (let i = 0; i < chart.data.xAxisData.values.length; i++) {\r\n        var add = true;\r\n        for (let j = 0; j < uniqueXAxisData.length; j++) {\r\n            if (chart.data.xAxisData.values[i] === uniqueXAxisData[j]) {\r\n                add = false;\r\n                break;\r\n            }\r\n        }\r\n        if (add) {\r\n            uniqueXAxisData.push(chart.data.xAxisData.values[i]);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    var data = {};\r\n    for (let i = 0; i < lineLength; i++) {\r\n        for (let k = 0; k < legendLength; k++) {\r\n            if (typeof chart._vars.legendOptions !== 'undefined') {//Accounting for legend toggles\r\n                if (chart._vars.legendOptions[k].toggle === false) {\r\n                    //Don't write anything to data\r\n                    continue;\r\n                } else {\r\n                    //Write something to data\r\n                    if (!data[legendData[k]]) {\r\n                        data[legendData[k]] = [];\r\n                    }\r\n                    data[legendData[k]].push(parseFloat(lineData[i][legendData[k]]));\r\n                }\r\n            } else {//Initial creation of visualization w/o legend options\r\n                if (!data[legendData[k]]) {\r\n                    data[legendData[k]] = [];\r\n                }\r\n                if (data[legendData[k]].length < lineLength) {\r\n                    data[legendData[k]].push(parseFloat(lineData[i][legendData[k]]));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    chart.svg.selectAll('.lines').remove();\r\n    chart.svg.selectAll('.line').remove();\r\n    chart.svg.selectAll('.circle').remove();\r\n    chart.svg.selectAll('#line-gradient').remove();\r\n\r\n    lines = chart.svg.selectAll('.' + chart.config.type + '-container');\r\n\r\n    //curves object\r\n    var curves = {\r\n        'Linear': d3.curveLinear,\r\n        'Step': d3.curveStep,\r\n        'Step Before': d3.curveStepBefore,\r\n        'Step After': d3.curveStepAfter,\r\n        'Basis': d3.curveBasis,\r\n        'Cardinal': d3.curveCardinal,\r\n        'Monotone X': d3.curveMonotoneX,\r\n        'Catmull Rom': d3.curveCatmullRom\r\n    };\r\n\r\n    var valueline = {};\r\n    var circles = {};\r\n    var index = 0;\r\n    var lineColors = [];\r\n    var thresholding = false;\r\n    for (var k in data) {\r\n        //Create path generator for each series\r\n        if (data.hasOwnProperty(k)) {\r\n            if (data[k] === '') {\r\n                data[k] = 'EMPTY_STRING';\r\n            }\r\n\r\n            valueline[k] = d3.line()//line drawing function\r\n                .curve(curves[chart._vars.lineCurveType])\r\n                .defined(function(d){\r\n                    return !isNaN(d);\r\n                })\r\n                .x(function (d, i) {\r\n                    if (isNaN(d)) {\r\n                        return;\r\n                    }\r\n                    return xTranslate(d, i);\r\n                })\r\n                .y(function (d, i) {\r\n                    if (isNaN(d)) {\r\n                        return;\r\n                    }\r\n                    return yTranslate(d, i);\r\n                });\r\n\r\n\r\n            //Add lines to the chart.config.type + '-container'\r\n            lines\r\n                .append('g')\r\n                .attr('class', 'line ' + (k))\r\n                .append('path')//draws the line\r\n                .attr('stroke', function (d, i, j) {\r\n                    var colorObj = jvCharts.getColors(colors, i, k);\r\n                    lineColors.push(colorObj);\r\n                    return colorObj;\r\n                })   //fills the bar with color\r\n                .attr('stroke-width', '2')\r\n                .attr('fill', 'none')\r\n                .attr('d', function (d, i) {\r\n                    return valueline[k](data[k]);\r\n                });\r\n\r\n            //Color Thresholding for each tier\r\n            if (chart._vars.thresholds != 'none' && chart._vars.colorChart != false) {\r\n                if (chart._vars.colorLine) {\r\n                    var thresholdPercents = [];\r\n                    var thresholdLength = Object.keys(chart._vars.thresholds).length\r\n                    if (chart._vars.rotateAxis) {\r\n                        var zero = { percent: 0, color: lineColors[index] };\r\n                        thresholdPercents.push(zero);\r\n\r\n                        for (let z = 0; z < thresholdLength; z++) {\r\n                            var pCent = ((chart._vars.thresholds[z].threshold) * 100) / (xAxisData.max - xAxisData.min);\r\n                            var temp = { percent: pCent, color: chart._vars.thresholds[z].thresholdColor };\r\n                            thresholdPercents.push(temp);\r\n                        }\r\n                    } else {\r\n                        var zero = { percent: 0, color: lineColors[index] };\r\n                        thresholdPercents.push(zero);\r\n\r\n                        for (let z = 0; z < thresholdLength; z++) {\r\n                            var pCent = ((chart._vars.thresholds[z].threshold) * 100) / (yAxisData.max - yAxisData.min);\r\n                            var temp = { percent: pCent, color: chart._vars.thresholds[z].thresholdColor };\r\n                            thresholdPercents.push(temp);\r\n                        }\r\n                    }\r\n\r\n\r\n                    var thresholdData = chart.setLineThresholdData(chart, thresholdPercents, lineColors[index]);\r\n\r\n                    lines.selectAll('path').attr('class', 'line-threshold');\r\n\r\n                    if (chart._vars.rotateAxis) {\r\n                        chart.svg.append('linearGradient')\r\n                            .attr('id', 'line-gradient')\r\n                            .attr('gradientUnits', 'userSpaceOnUse')\r\n                            .attr('x1', xTranslate(xAxisData.min))\r\n                            .attr('y1', 0)\r\n                            .attr('x2', xTranslate(xAxisData.max))\r\n                            .attr('y2', 0)\r\n                            .selectAll('stop')\r\n                            .data(thresholdData)\r\n                            .enter().append('stop')\r\n                            .attr('offset', function (d) { return d.offset; })\r\n                            .attr('stop-color', function (d) { return d.color; });\r\n                    } else {\r\n                        chart.svg.append('linearGradient')\r\n                            .attr('id', 'line-gradient')\r\n                            .attr('gradientUnits', 'userSpaceOnUse')\r\n                            .attr('x1', 0)\r\n                            .attr('y1', yTranslate(yAxisData.min))\r\n                            .attr('x2', 0)\r\n                            .attr('y2', yTranslate(yAxisData.max))\r\n                            .selectAll('stop')\r\n                            .data(thresholdData)\r\n                            .enter().append('stop')\r\n                            .attr('offset', function (d) { return d.offset; })\r\n                            .attr('stop-color', function (d) { return d.color; });\r\n                    }\r\n                }\r\n                thresholding = true;\r\n            }\r\n\r\n            //Add circles at joints in the lines\r\n            circles[k] = lines\r\n                .append('g')\r\n                .attr('class', 'circle ' + (k))\r\n                .selectAll('circle')\r\n                .data(data[k])\r\n                .enter()\r\n                .append('circle')//Circles for the joints in the line\r\n                .attr('class', function (d, i) {\r\n                    let value = chart.currentData.chartData[i][chart.currentData.dataTable.label] + '';\r\n                    return 'circle-' + jvCharts.getViewForValue(value) + ' highlight-class-' + jvCharts.getViewForValue(value);\r\n                })\r\n                .attr('cx', function (d, i) {\r\n                    if (isNaN(d)) {\r\n                        return null;\r\n                    }\r\n                    return xTranslate(d, i);\r\n                })\r\n                .attr('cy', function (d, i) {\r\n                    if (isNaN(d)) {\r\n                        return null;\r\n                    }\r\n                    return yTranslate(d, i);\r\n                })\r\n                .attr('fill', function (d, i, j) {\r\n                    if (isNaN(d)) {\r\n                        return null;\r\n                    } else if (thresholding == true) {\r\n                        var length = Object.keys(chart._vars.thresholds).length - 1;\r\n                        if (chart._vars.rotateAxis) {\r\n                            for (var z = length; z > -1; z--) {\r\n                                var threshold = chart._vars.thresholds[z];\r\n                                if (d >= threshold.threshold) {\r\n                                    return threshold.thresholdColor;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            for (var z = length; z > -1; z--) {\r\n                                var threshold = chart._vars.thresholds[z];\r\n                                if (d >= threshold.threshold) {\r\n                                    return threshold.thresholdColor;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    return jvCharts.getColors(colors, i, k);\r\n                })\r\n                .attr('opacity', function (d, i, j) {\r\n                    if (isNaN(d)) {\r\n                        return 0;\r\n                    }\r\n                    return 1;\r\n                })\r\n                .attr('r', 2.5);\r\n\r\n            index++;\r\n        }\r\n    }\r\n\r\n    //Return line groups\r\n    return lines.selectAll('.circle');\r\n}\r\n\r\nfunction setLineThresholdData(chart, thresholds) {\r\n    var data = [];\r\n    var thresholdLength = thresholds.length;\r\n    for (var k = 0; k < thresholdLength; k++) {\r\n        var gradientOne = { offset: thresholds[k].percent + '%', color: thresholds[k].color };\r\n        data.push(gradientOne);\r\n\r\n        if (k + 1 < thresholdLength) {\r\n            var gradientTwo = { offset: thresholds[k + 1].percent + '%', color: thresholds[k].color };\r\n            data.push(gradientTwo);\r\n        }\r\n\r\n        if (k == thresholdLength - 1) {\r\n            var last = { offset: '100%', color: thresholds[k].color };\r\n            data.push(last);\r\n        }\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvLine.js","'use strict';\r\n//add all required files\r\nimport 'jvVars.js';\r\nimport 'jvEvents.js';\r\nimport 'jvTip.js';\r\nimport 'jvBrush.js';\r\nimport 'jvComment.js';\r\nimport 'jvEdit.js';\r\nimport 'visuals/jvBar.js';\r\nimport 'visuals/jvPie.js';\r\nimport 'visuals/jvLine.js';\r\nimport 'visuals/jvScatter.js';\r\nimport 'visuals/jvArea.js';\r\nimport 'visuals/jvGantt.js';\r\nimport 'visuals/jvHeatmap.js';\r\nimport 'visuals/jvPack.js';\r\nimport 'visuals/jvRadial.js';\r\nimport 'visuals/jvSankey.js';\r\nimport 'visuals/jvSingleAxis.js';\r\nimport 'visuals/jvSunburst.js';\r\nimport 'visuals/jvTreemap.js';\r\nimport 'visuals/jvWordCloud.js';\r\nimport 'visuals/jvBoxWhisker.js';\r\nimport 'visuals/jvBubble.js';\r\nimport 'visuals/jvClustergram.js';\r\n\r\n//attach jv charts objects to the window\r\nimport jvCharts from 'jvCharts.js';\r\nimport jvBrush from 'jvBrush.js';\r\nimport jvComment from 'jvComment.js';\r\nimport jvEdit from 'jvEdit.js';\r\nimport jvSelect from 'jvSelect';\r\n//import jvDoodle from 'jvDoodle.js';\r\n\r\n//Comment out to remove from window object - if you are not using jvCharts as a minified file\r\nwindow.jvCharts = jvCharts;\r\nwindow.jvBrush = jvBrush;\r\nwindow.jvComment = jvComment;\r\nwindow.jvEdit = jvEdit;\r\nwindow.jvSelect = jvSelect;\r\n\r\n\r\n//add polyfill for Object.assign() if unsupported\r\nif (typeof Object.assign !== 'function') {\r\n    Object.assign = function (target) { //.length of function is 2\r\n        'use strict';\r\n        if (target == null) { //TypeError if undefined or null\r\n            throw new TypeError('Cannot convert undefined or null to object');\r\n        }\r\n        var to = Object(target);\r\n        for (var index = 1; index < arguments.length; index++) {\r\n            var nextSource = arguments[index];\r\n\r\n            if (nextSource != null) { //Skip over if undefined or null\r\n                for (var nextKey in nextSource) {\r\n                    //Avoid bugs when hasOwnProperty is shadowed\r\n                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n                        to[nextKey] = nextSource[nextKey];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return to;\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/jv.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.getDefaultOptions = getDefaultOptions;\r\n\r\nfunction getDefaultOptions(userOptions = {}) {\r\n    var _vars = {};\r\n\r\n    //General Styles/Attributes\r\n    //CONST variables - try to not use in jvCharts as they do not have much context\r\n    _vars.GRAY = '#cccccc';\r\n    _vars.WHITE = '#FFFFFF';\r\n    _vars.BLACK = '#000000';\r\n    _vars.SMALL_STROKE_WIDTH = '1px';\r\n    _vars.light = '#BBBBBB';\r\n    _vars.strokeWidth = '2px';\r\n\r\n    //Action Attributes\r\n    _vars.highlightBorderColor = _vars.BLACK;\r\n    _vars.highlightBorderWidth = '2px';\r\n\r\n    //Component Specific Styles/Attributes\r\n    _vars.thresholds = 'none'; //if not none, expected to be an array\r\n    _vars.thresholdLegend = false;\r\n    _vars.backgroundColor = 'none';\r\n    _vars.axisColor = _vars.GRAY;\r\n    _vars.gridLineColor = _vars.WHITE;\r\n    _vars.axisWidth = _vars.strokeWidth;\r\n    _vars.gridLineStrokeWidth = _vars.SMALL_STROKE_WIDTH;\r\n    _vars.displayValues = false;\r\n    _vars.toggleLegend = false;\r\n\r\n    //_vars.legendArrowColor = 'c2c2d6';\r\n    //_vars.legendArrowColor = '000000';\r\n    _vars.legendArrowColor = 'e7e7e7';\r\n\r\n    _vars.legendMax = 9;\r\n    _vars.gridSize = 12;\r\n    _vars.xReversed = false;\r\n    _vars.yReversed = false;\r\n\r\n    //font styles\r\n    _vars.fontSize = '12px';\r\n    _vars.fontColor = _vars.BLACK;\r\n    _vars.xLabelFontSize = 'none';\r\n    _vars.yLabelFontSize = 'none';\r\n\r\n    //Heatmap Specific Styles/Attributes\r\n    _vars.color = '#ff0000';\r\n    _vars.toggleLegend = false;\r\n    _vars.buckets = '10';\r\n    _vars.opacity = '10';\r\n    _vars.colorLabel = 'none';\r\n    _vars.min = '0';\r\n    _vars.max = '10';\r\n    _vars.domainArray = '';\r\n    _vars.step = '1';\r\n    _vars.quantiles = true;\r\n    _vars.heatLegendSpacing = 2;\r\n    _vars.heatGridSize = 20;\r\n    _vars.colors = [\r\n        '#fbf2d2',\r\n        '#fdedb5',\r\n        '#fee7a0',\r\n        '#ffda84',\r\n        '#ffc665',\r\n        '#feb44e',\r\n        '#fea743',\r\n        '#fd9b3f',\r\n        '#fd8c3c',\r\n        '#fd7735',\r\n        '#fd602f',\r\n        '#fb4b29',\r\n        '#f43723',\r\n        '#ea241e',\r\n        '#e0161c',\r\n        '#d60b20',\r\n        '#c80324',\r\n        '#b10026',\r\n        '#870025',\r\n        '#620023'\r\n    ];\r\n    _vars.clusterColors = [\r\n        '#00009C',\r\n        '#003399',\r\n        '#002FA7',\r\n        '#2A52BE',\r\n        '#0000FF',\r\n        '#8C92AC',\r\n        '#92A1CF',\r\n        '#C4C3D0',\r\n        '#CCCCFF',\r\n        '#F8F8FF',\r\n        '#FFFAFA',\r\n        '#F4C2C2',\r\n        '#FF6961',\r\n        '#FF5C5C',\r\n        '#FF1C00',\r\n        '#FF0800',\r\n        '#FF0000',\r\n        '#CD5C5C',\r\n        '#E34234',\r\n        '#D73B3E'\r\n    ];\r\n\r\n    //pie specific\r\n    _vars.pieBorder = _vars.WHITE;\r\n    _vars.pieBorderWidth = _vars.SMALL_STROKE_WIDTH;\r\n    _vars.pieTextColor = _vars.WHITE;\r\n    _vars.emptyLegendSquare = _vars.WHITE;\r\n\r\n    //line specific\r\n    _vars.lineCurveType = 'Linear';\r\n\r\n    //bar specific\r\n    _vars.displayValuesStackAsPercent = false;\r\n    _vars.displayValuesStackTotal = false;\r\n    _vars.displayYAxisLabel = true;\r\n\r\n    _vars.transitionTime = 200;\r\n\r\n    //scatter specific\r\n    _vars.toggleZ = true;\r\n    _vars.lineGuide = true;\r\n\r\n    //single axis specific\r\n    _vars.singleAxisFillHoverColor = 'red';\r\n\r\n    Object.assign(_vars, userOptions);\r\n    return _vars;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/jvVars.js","/***jvEvents\r\n * Eventing layer on top of JV Charts to allow custom callbacks to be attached to mouse events\r\n */\r\n'use strict';\r\n\r\nimport jvCharts from 'jvCharts.js';\r\nimport jvComment from 'jvComment.js';\r\nimport jvEdit from 'jvEdit.js';\r\nimport jvBrush from 'jvBrush.js';\r\n\r\njvCharts.prototype.initializeModes = initializeModes;\r\njvCharts.prototype.createDefaultMode = createDefaultMode;\r\njvCharts.prototype.createCommentMode = createCommentMode;\r\njvCharts.prototype.createEditMode = createEditMode;\r\njvCharts.prototype.createBrushMode = createBrushMode;\r\njvCharts.prototype.createSelectMode = createSelectMode;\r\njvCharts.prototype.toggleModes = toggleModes;\r\njvCharts.prototype.toggleDefaultMode = toggleDefaultMode;\r\njvCharts.prototype.toggleCommentMode = toggleCommentMode;\r\njvCharts.prototype.toggleEditMode = toggleEditMode;\r\njvCharts.prototype.toggleBrushMode = toggleBrushMode;\r\njvCharts.prototype.toggleSelectMode = toggleSelectMode;\r\njvCharts.prototype.addBrushEvents = addBrushEvents;\r\n\r\n/**\r\n* @name initializeModes\r\n* @desc function that initializes and creates the chart toolbar\r\n* @return {undefined} - no return\r\n*/\r\nfunction initializeModes() {\r\n    let chart = this,\r\n        callbacks = chart.config.callbacks;\r\n\r\n    //check if callbacks are needed\r\n    if (callbacks) {\r\n        for (let mode in callbacks) {\r\n            //loop through all the types of modes to initialize the mode and register the appropriate events\r\n            if (callbacks.hasOwnProperty(mode) && callbacks[mode]) {\r\n                let camelCaseMode = mode.charAt(0).toUpperCase() + mode.slice(1);\r\n                chart[mode] = chart['create' + camelCaseMode]();\r\n            }\r\n        }\r\n        if (chart.editMode) {\r\n            chart.editMode.applyAllEdits();\r\n        }\r\n        chart.toggleModes(chart.mode);\r\n    } else {\r\n        chart.createDefaultMode();\r\n        //user has not defined any other modes, so just use default mode\r\n        chart.toggleDefaultMode('default-mode');\r\n    }\r\n}\r\n\r\n/**\r\n* @name createDefaultMode\r\n* @desc function that initializes and creates the default mode\r\n* @return {undefined} - no return\r\n*/\r\nfunction createDefaultMode() {\r\n    let chart = this;\r\n    if (chart.config.callbacks && chart.config.callbacks.defaultMode.onBrush) {\r\n        chart.brushMode = chart.createBrushMode(chart.config.callbacks.defaultMode.onBrush);\r\n    }\r\n}\r\n\r\n/**\r\n* @name createCommentMode\r\n* @desc function that initializes and creates the comment mode\r\n* @return {jvComment} - created comment mode\r\n*/\r\nfunction createCommentMode() {\r\n    let chart = this;\r\n    return new jvComment({\r\n        chartDiv: chart.chartDiv,\r\n        comments: chart.config.comments || {},\r\n        onSaveCallback: chart.config.callbacks.commentMode.onSave,\r\n        getMode: function () {\r\n            return chart.mode;\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n* @name createEditMode\r\n* @desc function that initializes and creates the edit mode\r\n* @return {jvEdit} - created edit mode object\r\n*/\r\nfunction createEditMode() {\r\n    let chart = this;\r\n    return new jvEdit({\r\n        chartDiv: chart.chartDiv,\r\n        vizOptions: chart.config.editOptions || {},\r\n        onSaveCallback: chart.config.callbacks.editMode.onSave\r\n    });\r\n}\r\n\r\n/**\r\n* @name createBrushMode\r\n* @desc function that initializes and creates the brush mode\r\n* @param {function} callbackParam - function that is an optional callback for brush mode\r\n* @return {jvBrush} - created brush mode object\r\n*/\r\nfunction createBrushMode(callbackParam) {\r\n    let chart = this,\r\n        callback = callbackParam;\r\n    if (!callback) {\r\n        if (chart.config.callbacks.brushMode && typeof chart.config.callbacks.brushMode.onBrush === 'function') {\r\n            callback = chart.config.callbacks.brushMode.onBrush;\r\n        } else {\r\n            console.log('no brush callback, pass it into the callbacks option');\r\n            return null;\r\n        }\r\n    }\r\n    return new jvBrush({\r\n        chartDiv: chart.chartDiv,\r\n        jvChart: chart,\r\n        onBrushCallback: callback\r\n    });\r\n}\r\n\r\n/**\r\n* @name createSelectMode\r\n* @desc function that initializes and creates the select mode\r\n* @return {boolean} - true since the creation of a mode is only called when callbacks for the mode exist\r\n*/\r\nfunction createSelectMode() {\r\n    return true;\r\n}\r\n\r\n/**\r\n* @name toggleModes\r\n* @desc sets the correct events for the specific mode param\r\n* @param {string} mode - specified mode to toggle to\r\n* @return {undefined} - no return\r\n*/\r\nfunction toggleModes(mode) {\r\n    let chart = this;\r\n    chart.toggleDefaultMode(mode);\r\n    chart.commentMode && chart.toggleCommentMode(mode);\r\n    chart.editMode && chart.toggleEditMode(mode);\r\n    chart.brushMode && chart.toggleBrushMode(mode);\r\n    chart.selectMode && chart.toggleSelectMode(mode);\r\n}\r\n\r\n/**\r\n* @name toggleDefaultMode\r\n* @desc updates event listeners for default mode\r\n* @param {string} mode - specified mode to toggle to\r\n* @return {undefined} - no return\r\n*/\r\nfunction toggleDefaultMode(mode) {\r\n    let chart = this;\r\n    if (mode === 'default-mode') {\r\n        let defaultMode = chart.config.callbacks ? chart.config.callbacks.defaultMode : false,\r\n            entireSvg = chart.chartDiv.select('svg'),\r\n            callbacks;\r\n        //change cursor and show tooltips\r\n        chart.chartDiv.style('cursor', 'default');\r\n        chart.showToolTip = true;\r\n\r\n        //return if no callbacks exist\r\n        if (!defaultMode) {\r\n            return;\r\n        }\r\n        callbacks = {\r\n            onDoubleClick: (event, mouse) => {\r\n                if (typeof defaultMode.onDoubleClick === 'function') {\r\n                    defaultMode.onDoubleClick(getEventObj(event, mouse, chart, 'doubleClick'));\r\n                }\r\n            },\r\n            onClick: (event, mouse) => {\r\n                if (typeof defaultMode.onClick === 'function') {\r\n                    defaultMode.onClick(getEventObj(event, mouse, chart, 'click'));\r\n                }\r\n            },\r\n            onHover: (event, mouse) => {\r\n                if (typeof defaultMode.onHover === 'function') {\r\n                    defaultMode.onHover(getEventObj(event, mouse, chart, 'onHover'));\r\n                }\r\n            },\r\n            offHover: (event, mouse, prevEventData) => {\r\n                if (typeof defaultMode.offHover === 'function') {\r\n                    let newEventData = event;\r\n                    if (prevEventData && prevEventData.eventType === 'onHover') {\r\n                        newEventData = prevEventData;\r\n                    }\r\n                    defaultMode.offHover(getEventObj(newEventData, mouse, chart, 'offHover'));\r\n                }\r\n            },\r\n            onKeyUp: () => {\r\n                if (typeof defaultMode.onKeyUp === 'function') {\r\n                    let e = d3.event;\r\n                    defaultMode.onKeyUp({\r\n                        eventType: 'onKeyUp',\r\n                        key: e.key,\r\n                        event: e,\r\n                        keyCode: e.keyCode\r\n                    });\r\n                }\r\n            },\r\n            onKeyDown: () => {\r\n                if (typeof defaultMode.onKeyDown === 'function') {\r\n                    let e = d3.event;\r\n                    defaultMode.onKeyDown({\r\n                        eventType: 'onKeyDown',\r\n                        key: e.key,\r\n                        event: e,\r\n                        keyCode: e.keyCode\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        if (defaultMode.onBrush && chart.brushMode) {\r\n            callbacks.mousedown = addBrushMousedown.bind(chart);\r\n            callbacks.mouseup = () => {\r\n                chart.chartDiv.select('svg').on('mousemove', false);\r\n                chart.chartDiv.select('svg').style('cursor', 'default');\r\n                chart.brushMode.removeBrush();\r\n            };\r\n        }\r\n        registerClickEvents(entireSvg, callbacks, chart.config.currentEvent);\r\n    } else {\r\n        //remove tooltips and any highlights\r\n        chart.showToolTip = false;\r\n        chart.removeHighlight();\r\n    }\r\n}\r\n\r\nfunction getEventObj(event, mouse, chart, eventType) {\r\n    let returnObj = {};\r\n    if (event.hasOwnProperty('eventType')) {\r\n        returnObj = event;\r\n    } else {\r\n        returnObj = chart[chart.config.type].getEventData.call(chart, event, mouse);\r\n        returnObj.mouse = mouse;\r\n    }\r\n    returnObj.eventType = eventType;\r\n    returnObj.clientWidth = chart.chartDiv._groups[0][0].clientWidth;\r\n    returnObj.clientHeight = chart.chartDiv._groups[0][0].clientHeight;\r\n    return returnObj;\r\n}\r\n\r\n/**\r\n* @name toggleCommentMode\r\n* @desc updates event listeners for comment mode\r\n* @param {string} mode - specified mode to toggle to\r\n* @return {undefined} - no return\r\n*/\r\nfunction toggleCommentMode(mode) {\r\n    let chart = this,\r\n        commentObj = chart.commentMode;\r\n    if (mode === 'comment-mode') {\r\n        let entireSvg = chart.chartDiv.select('svg'),\r\n            callbacks = {\r\n                onDoubleClick: (event, mouse) => {\r\n                    commentObj.makeComment(event.target);\r\n                    if (typeof chart.config.callbacks.commentMode.onDoubleClick === 'function') {\r\n                        let returnObj = chart[chart.config.type].getEventData.call(chart, event, mouse);\r\n                        returnObj.eventType = 'doubleClick';\r\n                        chart.config.callbacks.commentMode.onDoubleClick(returnObj);\r\n                    }\r\n                },\r\n                onClick: (event, mouse) => {\r\n                    if (typeof chart.config.callbacks.commentMode.onClick === 'function') {\r\n                        let returnObj = chart[chart.config.type].getEventData.call(chart, event, mouse);\r\n                        returnObj.eventType = 'click';\r\n                        chart.config.callbacks.commentMode.onClick(returnObj);\r\n                    }\r\n                }\r\n            };\r\n        registerClickEvents(entireSvg, callbacks, chart.config.currentEvent);\r\n        //set cursor for comment mode\r\n        chart.chartDiv.style('cursor', 'pointer');\r\n        //add movementlisteners\r\n        chart.chartDiv.selectAll('.min-comment')\r\n            .on('mousedown', function () {\r\n                //logic to move comments\r\n                commentObj.createMoveListener(d3.select(this));\r\n            })\r\n            .on('mouseup', () => {\r\n                if (commentObj.moved) {\r\n                    commentObj.updatePosition(commentObj);\r\n                }\r\n                commentObj.moved = false;\r\n                chart.chartDiv.on('mousemove', false);\r\n            });\r\n    } else {\r\n        commentObj.removeComment();\r\n    }\r\n}\r\n\r\n/**\r\n* @name toggleEditMode\r\n* @desc updates event listeners for edit mode\r\n* @param {string} mode - specified mode to toggle to\r\n* @return {undefined} - no return\r\n*/\r\nfunction toggleEditMode(mode) {\r\n    let chart = this,\r\n        editObj = chart.editMode,\r\n        entireSvg = editObj.chartDiv.select('svg');\r\n    if (mode === 'edit-mode') {\r\n        editObj.chartDiv.style('cursor', 'default');\r\n        entireSvg.selectAll('.event-rect')\r\n            .attr('display', 'none');\r\n\r\n        let callbacks = {\r\n            onDoubleClick: (event, mouse) => {\r\n                if (typeof chart.config.callbacks.editMode.onDoubleClick === 'function') {\r\n                    let returnObj = chart[chart.config.type].getEventData.call(chart, event, mouse);\r\n                    returnObj.eventType = 'doubleClick';\r\n                    chart.config.callbacks.editMode.onDoubleClick(returnObj);\r\n                }\r\n            },\r\n            onClick: (event, mouse) => {\r\n                //edit mode events\r\n                //going to be mouseover to highlight options for whatever piece you hover over\r\n                let classText = d3.select(event.target).attr('class');\r\n                if (classText) {\r\n                    if (classText.indexOf('editable') >= 0) {\r\n                        editObj.displayEdit(mouse, classText);\r\n                    }\r\n                }\r\n\r\n                if (typeof chart.config.callbacks.editMode.onClick === 'function') {\r\n                    let returnObj = chart[chart.config.type].getEventData.call(chart, event, mouse);\r\n                    returnObj.eventType = 'click';\r\n                    chart.config.callbacks.editMode.onClick(returnObj);\r\n                }\r\n            }\r\n        };\r\n        //clear svg listeners\r\n        registerClickEvents(entireSvg, {}, chart.config.currentEvent);\r\n        //add chart div level listeners\r\n        registerClickEvents(editObj.chartDiv, callbacks, chart.config.currentEvent);\r\n\r\n        editObj.chartDiv.selectAll('.editable').classed('pointer', true);\r\n    } else {\r\n        //clear chart div level listeners\r\n        editObj.removeEdit();\r\n        entireSvg.selectAll('.editable').classed('pointer', false);\r\n        entireSvg.selectAll('.event-rect')\r\n            .attr('display', 'block');\r\n    }\r\n}\r\n\r\n/**\r\n* @name toggleBrushMode\r\n* @desc updates event listeners for brush mode\r\n* @param {string} mode - specified mode to toggle to\r\n* @return {undefined} - no return\r\n*/\r\nfunction toggleBrushMode(mode) {\r\n    var chart = this;\r\n    if (mode === 'brush-mode' && chart.config.callbacks.brushMode) {\r\n        chart.addBrushEvents();\r\n    }\r\n}\r\n\r\n/**\r\n* @name toggleSelectMode\r\n* @desc updates event listeners for select mode\r\n* @param {string} mode - specified mode to toggle to\r\n* @return {undefined} - no return\r\n*/\r\nfunction toggleSelectMode(mode) {\r\n    var chart = this;\r\n    if (mode === 'select-mode') {\r\n        let callbacks = {\r\n            onDoubleClick: (event, mouse) => {\r\n                if (typeof chart.config.callbacks.selectMode.onDoubleClick === 'function') {\r\n                    let returnObj = chart[chart.config.type].getEventData.call(chart, event, mouse);\r\n                    returnObj.eventType = 'doubleClick';\r\n                    chart.config.callbacks.selectMode.onDoubleClick(returnObj);\r\n                }\r\n            },\r\n            onClick: (event, mouse) => {\r\n                if (typeof chart.config.callbacks.selectMode.onClick === 'function') {\r\n                    let returnObj = chart[chart.config.type].getEventData.call(chart, event, mouse);\r\n                    returnObj.eventType = 'click';\r\n                    chart.config.callbacks.selectMode.onClick(returnObj);\r\n                }\r\n            }\r\n        };\r\n        registerClickEvents(chart.chartDiv.select('svg'), callbacks, chart.config.currentEvent);\r\n    }\r\n}\r\n\r\n/**\r\n* @name addBrushEvents\r\n* @desc registers events for brush mode\r\n* @return {undefined} - no return\r\n*/\r\nfunction addBrushEvents() {\r\n    let chart = this,\r\n        entireSvg = chart.chartDiv.select('svg'),\r\n        callbacks = {\r\n            mousedown: addBrushMousedown.bind(chart),\r\n            mouseup: () => {\r\n                chart.chartDiv.select('svg').on('mousemove', false);\r\n                chart.brushMode.removeBrush();\r\n            }\r\n        };\r\n    registerClickEvents(entireSvg, callbacks, chart.config.currentEvent);\r\n}\r\n\r\n/**\r\n* @name addBrushMousedown\r\n* @desc creates mousedown event for brush mode\r\n* @return {undefined} - no return\r\n*/\r\nfunction addBrushMousedown() {\r\n    var chart = this,\r\n        brushStarted = false,\r\n        brushContainer = chart.chartDiv.select('.' + chart.config.type + '-container').node(),\r\n        entireSvg = chart.chartDiv.select('svg'),\r\n        timeMouseDown = new Date().getTime();\r\n    entireSvg.on('mousemove', () => {\r\n        var timeMouseMove = new Date().getTime();\r\n        if (timeMouseDown > timeMouseMove - 10) {\r\n            //mouse move happend too quickly, chrome bug\r\n            return;\r\n        }\r\n        if (brushStarted) {\r\n            return;\r\n        }\r\n        let containerBox,\r\n            x,\r\n            y,\r\n            mouse;\r\n        if (brushContainer === undefined) {\r\n            chart.brushMode.startBrush(d3.event);\r\n            brushStarted = true;\r\n        } else {\r\n            containerBox = brushContainer.getBoundingClientRect();\r\n            mouse = d3.mouse(entireSvg.node());\r\n            x = mouse[0];\r\n            y = mouse[1];\r\n\r\n            if (x < containerBox.right && y < containerBox.bottom && x > containerBox.left && y > containerBox.top) {\r\n                chart.brushMode.startBrush(d3.event);\r\n                brushStarted = true;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n* @name registerClickEvents\r\n* @desc register handler for jv events\r\n* @param {d3element} svg - d3 selected element to bind events on\r\n* @param {object} callbacks - callbacks to run for each type of click event\r\n* @return {undefined} - no return\r\n*/\r\nfunction registerClickEvents(svg, callbacks = {}, currentEvent = {}) {\r\n    //using default parameters to show available parts of the callbacks object\r\n    var down,\r\n        clickedSpot,\r\n        tolerance = 5,\r\n        clickTimer = null,\r\n        CLICK_TIMER = 250,\r\n        clickTimerStarted = false;\r\n\r\n    svg.on('mousedown', false);\r\n    svg.on('mouseup', false);\r\n    svg.on('mousemove', false);\r\n    svg.on('mouseout', false);\r\n    svg.on('keyup', false);\r\n    svg.on('focus', false);\r\n\r\n    if (typeof callbacks.onHover === 'function' || typeof callbacks.offHover === 'function') {\r\n        registerHoverEvents(svg, callbacks, currentEvent);\r\n    }\r\n\r\n    if (typeof callbacks.onKeyUp === 'function') {\r\n        svg.on('keyup', callbacks.onKeyUp);\r\n        svg.on('focus', () => { });\r\n        svg.node().focus();\r\n    }\r\n\r\n    if (typeof callbacks.onKeyDown === 'function') {\r\n        svg.on('keydown', callbacks.onKeyDown);\r\n        svg.on('focus', () => { });\r\n        svg.node().focus();\r\n    }\r\n\r\n    if (typeof callbacks.mousedown === 'function') {\r\n        svg.on('mousedown', () => {\r\n            down = d3.mouse(svg.node());\r\n            callbacks.mousedown();\r\n        });\r\n    }\r\n\r\n    svg.on('mouseup', function () {\r\n        if (typeof callbacks.mouseup === 'function') {\r\n            callbacks.mouseup();\r\n        }\r\n        if (typeof callbacks.onDoubleClick !== 'function') {\r\n            //run single click if double click doesnt exist\r\n            onClickEvent(d3.event, d3.mouse(this), callbacks.onClick);\r\n        } else {\r\n            if (dist(down, d3.mouse(svg.node())) > tolerance) {\r\n                //drag not click so return\r\n                return;\r\n            }\r\n            //need to determine whether single or double click\r\n            if (clickedSpot && dist(clickedSpot, d3.mouse(svg.node())) < tolerance && clickTimerStarted) {\r\n                window.clearTimeout(clickTimer);\r\n                clickTimer = null;\r\n                clickTimerStarted = false;\r\n                callbacks.onDoubleClick(d3.event, d3.mouse(this), this);\r\n            } else {\r\n                //d3.event and d3.mouse both lose their scope in a timeout and no longer return the expected value, so binding is necessary\r\n                clickTimer = window.setTimeout(onClickEvent.bind(this, d3.event, d3.mouse(this), callbacks.onClick), CLICK_TIMER);\r\n                clickTimerStarted = true;\r\n                clickedSpot = d3.mouse(svg.node());\r\n            }\r\n        }\r\n    });\r\n\r\n    function onClickEvent(e, mouse, onClick) {\r\n        if (typeof onClick === 'function') {\r\n            onClick(e, mouse, this);\r\n            clickTimerStarted = false;\r\n        }\r\n    }\r\n}\r\n\r\nfunction registerHoverEvents(svg, callbacks, currentEvent, _vars) {\r\n    let hoverData = {},\r\n        hoverTimer = null,\r\n        hoverTimerStarted = false,\r\n        HOVER_TIMER = 2000,\r\n        prevEvent = currentEvent,\r\n        fakeHoverTimer = false;\r\n\r\n    svg.on('mouseout', () => {\r\n        if (prevEvent.type === 'onHover') {\r\n            offHoverEvent(callbacks.offHover, prevEvent.data);\r\n        }\r\n        hoverTimer = window.clearTimeout(hoverTimer);\r\n        hoverTimerStarted = false;\r\n    });\r\n\r\n    svg.on('mousemove', function () {\r\n        if (hoverTimerStarted || fakeHoverTimer) {\r\n            //determine to clear timer\r\n            if (!sameNode(hoverData.ele, d3.event.target)) {\r\n                //create new timer and assign to hover target ele\r\n                hoverTimer = window.clearTimeout(hoverTimer);\r\n                hoverTimerStarted = false;\r\n                fakeHoverTimer = false;\r\n            }\r\n            hoverData.ele = d3.event.target;\r\n        } else {\r\n            //add timer\r\n            //same element, we want to fire the hover if more than x seconds\r\n            if (prevEvent.type === 'onHover') {\r\n                if (hoverData.ele) {\r\n                    offHoverEvent(callbacks.offHover, prevEvent.data);\r\n                } else {\r\n                    fakeHoverTimer = true;\r\n                }\r\n                return;\r\n            }\r\n            hoverData.ele = d3.event.target;\r\n\r\n            //clear before setting\r\n            hoverTimer = window.clearTimeout(hoverTimer);\r\n            hoverData.ele = d3.event.target;\r\n            hoverTimer = window.setTimeout(onHoverEvent.bind(this, callbacks.onHover, d3.event, d3.mouse(this)), HOVER_TIMER);\r\n            hoverTimerStarted = true;\r\n        }\r\n    });\r\n\r\n    function offHoverEvent(offHover, prevEventData) {\r\n        if (typeof offHover === 'function') {\r\n            prevEvent.type = 'offHover';\r\n            //rely on refresh to rebuild event\r\n            if (true || _vars.eventRefresh) {\r\n                svg.on('mousemove', false);\r\n                svg.on('mouseout', false);\r\n            }\r\n\r\n            offHover(hoverData.event, hoverData.mouse, prevEventData);\r\n        }\r\n    }\r\n\r\n    function onHoverEvent(onHover, e, m) {\r\n        if (typeof onHover === 'function') {\r\n            hoverData = {\r\n                mouse: m,\r\n                event: e\r\n            };\r\n            //rely on refresh to rebuild event\r\n            if (true || _vars.eventRefresh) {\r\n                svg.on('mousemove', false);\r\n                svg.on('mouseout', false);\r\n            }\r\n\r\n            onHover(hoverData.event, hoverData.mouse);\r\n        }\r\n    }\r\n\r\n    function sameNode(node1, node2) {\r\n        let response;\r\n        if (node1 && node2) {\r\n            //both exist, check for equality\r\n            if (node1.classList.value === node2.classList.value) {\r\n                response = true;\r\n            } else {\r\n                response = false;\r\n            }\r\n        } else if (node1 || node2) {\r\n            //one empty and one not\r\n            response = true;\r\n        } else {\r\n            //both null\r\n            response = true;\r\n        }\r\n        return response;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n* @name dist\r\n* @desc euclidean distance to determine if the mouse moved in between clicks for double click\r\n* @param {array} a - point a\r\n* @param {array} b - point b\r\n* @return {number} - distance between a and b\r\n*/\r\nfunction dist(a, b) {\r\n    if (a && b && Array.isArray(a) && Array.isArray(b)) {\r\n        return Math.sqrt(Math.pow(a[0] - b[0], 2), Math.pow(a[1] - b[1], 2));\r\n    }\r\n    return 0;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/jvEvents.js","var html = `<!--Top title bar of edit popup-->\r\n<div class='title'>\r\n    <div class=\"jv-inline\">\r\n        <b>Edit Options<div id=\"edit-option-element\" class=\"jv-inline\" style=\"visibility: hidden;\"></div>:</b>\r\n    </div>\r\n\r\n    <div id='exitEditMode' class='jv-pull-right jv-pointer'>\r\n        <i class='fa fa-times'></i>\r\n    </div>\r\n</div>\r\n\r\n<!--Line dividing top bar with form options below-->\r\n<hr style='margin:3px 0 3px 0;'/>\r\n\r\n<!--Form Options-->\r\n<div id=\"form'+chart.config.name+'\">\r\n\r\n    <!--Number formatting options-->\r\n    <div class=\"jv-full-width editable-num-format\" style=\"display: none;\">\r\n        <div class=\"jv-edit-mode-input\">Number Format:\r\n            <select id=\"editable-num-format\">\r\n                <option value=\"\">--Select Option--</option>\r\n                <option value=\"currency\">Currency</option>\r\n                <option value=\"fixedCurrency\">Fixed Point Currency</option>\r\n                <option value=\"percent\">Percent</option>\r\n                <option value=\"millions\">Millions</option>\r\n                <option value=\"commas\">Commas</option>\r\n                <option value=\"none\">None</option>\r\n            </select>\r\n        </div>\r\n        <br/>\r\n    </div>\r\n\r\n    <!--Text formatting options-->\r\n    <div class=\"editable-text-size-buttons jv-center topBarOption increasefont jv-pointer\" style=\"display: none;\">\r\n        <button id='decreaseFontSize' title='Decrease the font size' class='topbar-button font jv-button jv-pointer'><i class='fa fa-font'></i><i class='fa fa-long-arrow-down'></i></button>\r\n        <button id='increaseFontSize' title='Increase the font size' class='topbar-button font jv-button jv-pointer'><i class='fa fa-font'></i><i class='fa fa-long-arrow-up'></i></button>\r\n    </div>\r\n\r\n\r\n    <div class=\"jv-full-width editable-text-color\" style=\"display: none;\">\r\n        <div class=\"jv-edit-mode-input\">Text Color:\r\n            <input type=\"color\" id=\"editable-text-color\" value=\"#000000\">\r\n        </div>\r\n        <br/>\r\n    </div>\r\n\r\n    <div class=\"jv-full-width editable-text-size\" style=\"display: none;\">\r\n        <div class=\"jv-edit-mode-input\">Text Size:\r\n            <input type=\"number\" id=\"editable-text-size\" min=\"0\" max=\"30\" value=\"12\" step=\"0.5\">\r\n        </div>\r\n        <br/>\r\n    </div>\r\n\r\n    <div class=\"jv-full-width editable-content\" style=\"display: none;\">\r\n        <div class=\"jv-edit-mode-input\">Text:\r\n            <input type=\"text\" id=\"editable-content\" placeholder=\"Enter text here\">\r\n        </div>\r\n        <br/>\r\n    </div>\r\n\r\n    <!--bar chart formatting-->\r\n    <div class=\"jv-full-width editable-bar\" style=\"display: none;\">\r\n        <div class=\"jv-edit-mode-input\">Bar Color:\r\n            <input type=\"color\" id=\"editable-bar\" value=\"#aaaaaa\">\r\n        </div>\r\n        <br/>\r\n    </div>\r\n\r\n    <!--pie chart formatting-->\r\n    <div class=\"jv-full-width editable-pie\" style=\"display: none;\">\r\n        <div class=\"jv-edit-mode-input\">Pie Slice Color:\r\n            <input type=\"color\" id=\"editable-pie\" value=\"#aaaaaa\">\r\n        </div>\r\n        <br/>\r\n    </div>\r\n\r\n    <!--scatter plot formatting-->\r\n    <div class=\"jv-full-width editable-scatter\" style=\"display: none;\">\r\n        <div class=\"jv-edit-mode-input\">Scatter Circle Color:\r\n            <input type=\"color\" id=\"editable-scatter\" value=\"#aaaaaa\">\r\n        </div>\r\n        <br/>\r\n    </div>\r\n\r\n    <!--bubble chart formatting-->\r\n    <div class=\"jv-full-width editable-bubble\" style=\"display: none;\">\r\n        <div class=\"jv-edit-mode-input\">Bubble Color:\r\n            <input type=\"color\" id=\"editable-bubble\" value=\"#aaaaaa\">\r\n        </div>\r\n        <br/>\r\n    </div>\r\n\r\n    <!--box and whisker plot formatting-->\r\n    <div class=\"jv-full-width editable-box\" style=\"display: none;\">\r\n        <div class=\"jv-edit-mode-input\">Box Color:\r\n            <input type=\"color\" id=\"editable-box\" value=\"#aaaaaa\">\r\n        </div>\r\n        <br/>\r\n    </div>\r\n\r\n    <!--Submit button-->\r\n    <div class=\"editable-default-and-apply\">\r\n        <button id=\"submitEditModeDefault\" class=\"jv-button jv-pull-left\">Default</button>\r\n        <button id=\"submitEditMode\" class=\"jv-button jv-button-green jv-pull-right\">Apply</button>\r\n    </div>\r\n</div>`;\r\n\r\nexport default html;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/editOptionsTemplate.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.bar = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData,\r\n    highlightFromEventData: highlightFromEventData\r\n};\r\n\r\njvCharts.prototype.generateBarThreshold = generateBarThreshold;\r\njvCharts.prototype.generateBars = generateBars;\r\n\r\n\r\n/**paint\r\n *\r\n * The initial starting point for bar chart, begins the drawing process. Must already have the data stored in the chart\r\n * object\r\n */\r\nfunction paint(transitionTime = 800) {\r\n    let chart = this,\r\n        //Uses the original data and then manipulates it based on any existing options\r\n        dataObj = chart.getBarDataFromOptions();\r\n\r\n    if (transitionTime || transitionTime === 0) {\r\n        chart._vars.transitionTime = transitionTime;\r\n    }\r\n\r\n    //assign current data which is used by all bar chart operations\r\n    chart.currentData = dataObj;\r\n\r\n    //generate svg dynamically based on legend data\r\n    chart.generateSVG(dataObj.legendData);\r\n    chart.generateXAxis(dataObj.xAxisData);\r\n    chart.generateYAxis(dataObj.yAxisData);\r\n    chart.generateLegend(dataObj.legendData, 'generateBars');\r\n    chart.generateBars(dataObj);\r\n\r\n    if (typeof dataObj.xAxisScale.ticks === 'function') {\r\n        chart.formatXAxisLabels(dataObj.xAxisScale.ticks().length);\r\n    } else {\r\n        chart.formatXAxisLabels(dataObj.xAxisScale.domain().length);\r\n    }\r\n}\r\n\r\n\r\n/**Sets the data for the bar chart prior to painting\r\n *  @function\r\n * @params {Object} data - Data passed into the chart\r\n * @params {Object} dataTable - Shows which data column is associated with each field in visual panel\r\n * @params {Object} dataTableKeys - Contains the data type for each column of data\r\n * @params {Object} colors - Colors object used to color the bars\r\n */\r\nfunction setData() {\r\n    let chart = this;\r\n    //sort chart data if there is a sort type and label in the _vars\r\n    if (chart._vars.hasOwnProperty('sortType') && chart._vars.sortType) {\r\n        if (chart._vars.sortLabel && chart._vars.sortType !== 'default') {\r\n            chart.organizeChartData(chart._vars.sortLabel, chart._vars.sortType);\r\n        }\r\n    }\r\n    chart.data.legendData = setBarLineLegendData(chart.data);\r\n    chart.data.xAxisData = chart.setAxisData('x', chart.data);\r\n    chart.data.yAxisData = chart.setAxisData('y', chart.data);\r\n    if (chart._vars.seriesFlipped) {\r\n        chart.setFlippedSeries(chart.data.dataTableKeys);\r\n        chart.flippedData.color = jvCharts.setChartColors(chart._vars.color, chart.flippedData.legendData, chart.colors);\r\n    }\r\n\r\n    //define color object for chartData\r\n    chart.data.color = jvCharts.setChartColors(chart._vars.color, chart.data.legendData, chart.colors);\r\n}\r\n\r\n\r\nfunction getEventData(event) {\r\n    var chart = this;\r\n    if (event.target.classList.value.split('bar-col-')[1]) {\r\n        return {\r\n            data: {\r\n                [chart.currentData.dataTable.label]: [jvCharts.getRawForValue(event.target.classList.value.split('bar-col-')[1])]\r\n            },\r\n            node: event.target\r\n        };\r\n    } else if (event.target.classList.value.indexOf('bar-container') > -1) {\r\n        return {\r\n            data: {}\r\n        };\r\n    }\r\n    return {\r\n        data: false\r\n    };\r\n}\r\n\r\nfunction highlightFromEventData(event) {\r\n    let chart = this,\r\n        labelArray = event.data[chart.currentData.dataTable.label],\r\n        node,\r\n        cssClass;\r\n    chart.svg.select('.bar-container').selectAll('rect')\r\n        .attr('stroke', 0)\r\n        .attr('stroke-width', 0);\r\n\r\n    for (let label of labelArray) {\r\n        cssClass = '.highlight-class-' + jvCharts.getViewForValue(label);\r\n        node = chart.svg.selectAll(cssClass);\r\n\r\n        //highlight necessary bars\r\n        node\r\n            .attr('stroke', chart._vars.highlightBorderColor)\r\n            .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n    }\r\n}\r\n\r\n/**setBarLineLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend text\r\n */\r\nfunction setBarLineLegendData(data) {\r\n    var legendArray = [];\r\n    for (let item in data.dataTable) {\r\n        if (data.dataTable.hasOwnProperty(item)) {\r\n            if (item !== 'label' && item.indexOf('tooltip') === -1) {\r\n                legendArray.push(data.dataTable[item]);\r\n            }\r\n        }\r\n    }\r\n    return legendArray;\r\n}\r\n\r\n/************************************************ Bar functions ******************************************************/\r\nfunction generateBarThreshold() {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        width = chart.config.container.width,\r\n        height = chart.config.container.height,\r\n        thresholds = chart._vars.thresholds,\r\n        length = thresholds !== 'none' ? Object.keys(thresholds).length : 0,\r\n        x = chart.currentData.xAxisScale,\r\n        y = chart.currentData.yAxisScale;\r\n\r\n    if (thresholds !== 'none') {\r\n        let thresholdRects,\r\n            threshold;\r\n        for (let i = 0; i < length; i++) {\r\n            threshold = thresholds[i];\r\n            if (!chart._vars.xAxisThreshold) {\r\n                if (chart._vars.rotateAxis) {\r\n                    if (chart._vars.yMin === 'none') {\r\n                        svg.append('line')\r\n                            .style('stroke', threshold.thresholdColor)\r\n                            .attr('x1', x(threshold.threshold))\r\n                            .attr('y1', 0)\r\n                            .attr('x2', x(threshold.threshold))\r\n                            .attr('y2', height)\r\n                            .attr('stroke-dasharray', ('3, 3'));\r\n                    } else if (threshold.threshold > chart._vars.yMin) {\r\n                        svg.append('line')\r\n                            .style('stroke', threshold.thresholdColor)\r\n                            .attr('x1', x(threshold.threshold))\r\n                            .attr('y1', 0)\r\n                            .attr('x2', x(threshold.threshold))\r\n                            .attr('y2', height)\r\n                            .attr('stroke-dasharray', ('3, 3'));\r\n                    }\r\n                } else if (chart._vars.yMin === 'none') {\r\n                    svg.append('line')\r\n                        .style('stroke', threshold.thresholdColor)\r\n                        .attr('x1', 0)\r\n                        .attr('y1', y(threshold.threshold))\r\n                        .attr('x2', width)\r\n                        .attr('y2', y(threshold.threshold))\r\n                        .attr('stroke-dasharray', ('3, 3'));\r\n                } else if (threshold.threshold > chart._vars.yMin) {\r\n                    svg.append('line')\r\n                        .style('stroke', threshold.thresholdColor)\r\n                        .attr('x1', 0)\r\n                        .attr('y1', y(threshold.threshold))\r\n                        .attr('x2', width)\r\n                        .attr('y2', y(threshold.threshold))\r\n                        .attr('stroke-dasharray', ('3, 3'));\r\n                }\r\n            }\r\n\r\n            if (chart._vars.colorChart == true) {\r\n                thresholdRects = d3.selectAll('rect.rect-' + i);\r\n                thresholdRects.attr('fill', threshold.thresholdColor);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**generateBars\r\n *\r\n * Does the actual painting of bars on the bar chart\r\n * @params barData\r\n */\r\n\r\nfunction generateBars(barData) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n\r\n        //Used to draw line that appears when tool tips are visible\r\n        tipLineX = 0,\r\n        tipLineWidth = 0,\r\n        tipLineHeight = 0,\r\n        tipLineY = 0,\r\n        //Add logic to filter bardata\r\n        dataHeaders = barData.legendData,\r\n        bars,\r\n        barDataNew,\r\n        eventGroups;\r\n\r\n    //Removes any existing bar containers and creates a new one\r\n    svg.selectAll('g.bar-container').remove();\r\n\r\n    bars = svg.append('g')\r\n        .attr('class', 'bar-container')\r\n        .selectAll('g');\r\n\r\n    if (chart._vars.seriesFlipped && chart._vars.flippedLegendHeaders) {\r\n        dataHeaders = chart._vars.flippedLegendHeaders;\r\n    } else if (chart._vars.legendHeaders) {\r\n        dataHeaders = chart._vars.legendHeaders;\r\n    }\r\n\r\n    chart._vars.legendHeaders = dataHeaders;\r\n\r\n    barDataNew = jvCharts.getToggledData(barData, dataHeaders);\r\n\r\n    generateBarGroups(bars, barDataNew, chart);\r\n\r\n    eventGroups = jvCharts.generateEventGroups(bars, barDataNew, chart);\r\n\r\n    //Add listeners\r\n\r\n    eventGroups\r\n        .on('mouseover', function (d, i, j) { //Transitions in D3 don't support the 'on' function They only exist on selections. So need to move that event listener above transition and after append\r\n            if (chart.showToolTip) {\r\n                //Get tip data\r\n                let tipData = chart.setTipData(d, i),\r\n                    mouseItem = d3.select(this);\r\n\r\n                //Draw tip line\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n                svg.selectAll('.tip-line').remove();\r\n\r\n                tipLineX = mouseItem.node().getBBox().x;\r\n                tipLineWidth = mouseItem.node().getBBox().width;\r\n                tipLineHeight = mouseItem.node().getBBox().height;\r\n                tipLineY = mouseItem.node().getBBox().y;\r\n\r\n                //Draw line in center of event-rect\r\n                svg\r\n                    .append('line')\r\n                    .attr('class', 'tip-line')\r\n                    .attr('x1', () => chart._vars.rotateAxis ? 0 : tipLineX + tipLineWidth / 2)\r\n                    .attr('x2', () => chart._vars.rotateAxis ? tipLineWidth : tipLineX + tipLineWidth / 2)\r\n                    .attr('y1', () => chart._vars.rotateAxis ? tipLineY + tipLineHeight / 2 : 0)\r\n                    .attr('y2', () => chart._vars.rotateAxis ? tipLineY + tipLineHeight / 2 : tipLineHeight)\r\n                    .attr('fill', 'none')\r\n                    .attr('shape-rendering', 'crispEdges')\r\n                    .attr('stroke', 'black')\r\n                    .attr('stroke-width', '1px');\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip();\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            if (chart.showToolTip) {\r\n                chart.tip.hideTip();\r\n                svg.selectAll('line.tip-line').remove();\r\n            }\r\n        });\r\n\r\n    chart.displayValues();\r\n    chart.generateClipPath();\r\n    chart.generateBarThreshold();\r\n}\r\n\r\n/**generateBarGroups\r\n *\r\n * Paints the groups of the bars\r\n * @params chartContainer, barData, chart\r\n */\r\nfunction generateBarGroups(chartContainer, barData, chart) {\r\n    var container = chart.config.container,\r\n        xAxisData = chart.currentData.xAxisData,\r\n        yAxisData = chart.currentData.yAxisData,\r\n        colors = chart._vars.color,\r\n        x = jvCharts.getAxisScale('x', xAxisData, container, chart._vars),\r\n        y = jvCharts.getAxisScale('y', yAxisData, container, chart._vars),\r\n        posCalc = jvCharts.getPosCalculations(barData, chart._vars, xAxisData, yAxisData, container, chart),\r\n        dataToPlot = jvCharts.getPlotData(barData, chart),\r\n        barGroups,\r\n        externalCounterForJ,\r\n        bars;\r\n\r\n    if (xAxisData.dataType === 'STRING' || !xAxisData.hasOwnProperty('min')) {\r\n        //Creates bar groups\r\n        barGroups = chartContainer\r\n            .data(dataToPlot)\r\n            .enter()\r\n            .append('g')\r\n            .attr('class', 'bar-group')\r\n            //Translate the bar groups by (outer padding * step) and the width of the bars (container.width / barData.length * i)\r\n            .attr('transform', (d, i) => `translate(${x.paddingOuter() * x.step() + x.step() * i} ,0)`);\r\n    } else if (xAxisData.dataType === 'NUMBER') {\r\n        //Creates bar groups\r\n        barGroups = chartContainer\r\n            .data(dataToPlot)\r\n            .enter()\r\n            .append('g')\r\n            .attr('class', 'bar-group')\r\n            //Translate the bar groups by (outer padding * step) and the width of the bars (container.width / barData.length * i)\r\n            .attr('transform', (d, i) => `translate(0, ${y.paddingOuter() * y.step() + y.step() * i} )`);\r\n    }\r\n\r\n    //Creates bars within bar groups\r\n    externalCounterForJ = -1;\r\n    bars = barGroups.selectAll('rect')\r\n        .data(d => d)\r\n        .enter()\r\n        .append('rect')\r\n        .attr('class', (d, i) => {\r\n            let keys = Object.keys(barData[0]),\r\n                filteredKeys = [],\r\n                label,\r\n                legendVal,\r\n                thresholdDir;\r\n\r\n            if (i === 0) {\r\n                externalCounterForJ++;\r\n            }\r\n\r\n            for (let key of keys) {\r\n                if (key !== chart.currentData.dataTable.label) {\r\n                    filteredKeys.push(key);\r\n                }\r\n            }\r\n\r\n            label = jvCharts.getViewForValue(String(barData[externalCounterForJ][chart.currentData.dataTable.label]));\r\n            legendVal = jvCharts.getViewForValue(String(filteredKeys[i]));\r\n            thresholdDir;\r\n\r\n            if (chart._vars.xAxisThreshold) {\r\n                thresholdDir = chart.setThreshold(barData[externalCounterForJ][chart.currentData.dataTable.label]);\r\n            } else {\r\n                thresholdDir = chart.setThreshold(d);\r\n            }\r\n\r\n            return `editable editable-bar bar-col-${label}-index-${legendVal} highlight-class-${label} rect ${thresholdDir}`;\r\n        })\r\n        .attr('x', (d, i) => posCalc.startx(d, i))\r\n        .attr('y', (d, i) => posCalc.starty(d, i))\r\n        .attr('width', (d, i) => posCalc.startwidth(d, i))\r\n        .attr('height', (d, i) => posCalc.startheight(d, i))\r\n        .attr('fill', (d, i) => {\r\n            if (chart._vars.seriesFlipped) {\r\n                return jvCharts.getColors(colors, i, chart._vars.flippedLegendHeaders[i]);\r\n            }\r\n            return jvCharts.getColors(colors, i, chart._vars.legendHeaders[i]);\r\n        })\r\n        .attr('rx', 0)\r\n        .attr('ry', 0)\r\n        .attr('opacity', 0.9)\r\n        .attr('clip-path', d => d > 30000000 ? 'url(#clip-above)' : 'url(#clip-below)');\r\n    if (chart._vars.transitionTime > 0) {\r\n        bars\r\n            .transition()\r\n            .duration(chart._vars.transitionTime)\r\n            .ease(d3.easePolyOut)\r\n            .attr('x', (d, i, j) => posCalc.x(d, i, j))\r\n            .attr('y', (d, i, j) => posCalc.y(d, i, j))\r\n            .attr('width', (d, i) => posCalc.width(d, i))\r\n            .attr('height', (d, i) => posCalc.height(d, i));\r\n    } else {\r\n        bars\r\n            .attr('x', (d, i, j) => posCalc.x(d, i, j))\r\n            .attr('y', (d, i, j) => posCalc.y(d, i, j))\r\n            .attr('width', (d, i) => posCalc.width(d, i))\r\n            .attr('height', (d, i) => posCalc.height(d, i));\r\n    }\r\n\r\n    return barGroups;//returns the bar containers\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvBar.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.pie = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData,\r\n    highlightFromEventData: highlightFromEventData\r\n};\r\n\r\njvCharts.prototype.generatePie = generatePie;\r\n\r\n/************************************************ Pie Data functions ******************************************************/\r\n\r\n/**setPieData\r\n *  gets pie data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n\r\n    //Set data if a 'bucket' is specified--paints # specified, groups rest into other category\r\n    if (chart._vars.hasOwnProperty('buckets') && parseInt(chart._vars.buckets, 10) !== 0) {\r\n        //bucket the data\r\n        let data = chart.data,\r\n            other = {},\r\n            categorizedData = [], i;\r\n\r\n        data.chartData.sort((a, b) => b[data.dataTable.value] - a[data.dataTable.value]);\r\n        other[data.dataTable.label] = 'Other';\r\n        other[data.dataTable.value] = 0;\r\n        for (i = 0; i < data.chartData.length; i++) {\r\n            if (i < chart._vars.buckets) {\r\n                categorizedData.push(data.chartData[i]);\r\n            } else {\r\n                other[data.dataTable.value] += data.chartData[i][data.dataTable.value];\r\n            }\r\n        }\r\n        if (other[data.dataTable.value] > 0) {\r\n            categorizedData.push(other);\r\n            data.chartData = categorizedData;\r\n        }\r\n    }\r\n    //Set legend data after determining if the data is bucketed\r\n    chart.data.legendData = setPieLegendData(chart.data);\r\n    //define color object for chartData\r\n    chart.data.color = jvCharts.setChartColors(chart._vars.color, chart.data.legendData, chart.colors);\r\n}\r\n\r\nfunction getEventData(event) {\r\n    var chart = this,\r\n        ele = event.target.classList.value.split('pie-data-')[1];\r\n    if (ele) {\r\n        return {\r\n            data: {\r\n                [chart.currentData.dataTable.label]: [jvCharts.getRawForValue(ele)]\r\n            },\r\n            node: event.target\r\n        };\r\n    } else if (event.target.classList.value.indexOf('pie-container') > -1) {\r\n        return {\r\n            data: {}\r\n        };\r\n    }\r\n    return {\r\n        data: false\r\n    };\r\n}\r\n\r\nfunction highlightFromEventData(event) {\r\n    let chart = this,\r\n        label = event.data[chart.currentData.dataTable.label][0],\r\n        cssClass = '.highlight-class-' + jvCharts.getViewForValue(label),\r\n        node = chart.svg.selectAll(cssClass);\r\n\r\n    chart.svg.select('.pie-container').selectAll('.slice')\r\n        .attr('stroke', 0)\r\n        .attr('stroke-width', 0);\r\n    //highlight necessary slices\r\n    node\r\n        .attr('stroke', chart._vars.highlightBorderColor)\r\n        .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n}\r\n\r\n/**setPieLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend text\r\n */\r\nfunction setPieLegendData(data) {\r\n    var legendArray = [];\r\n    for (var i = data.chartData.length - 1; i >= 0; i--) {\r\n        legendArray.push((data.chartData[i][data.dataTable.label]));\r\n    }\r\n    return legendArray;\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this,\r\n        customMargins = {\r\n            top: 40,\r\n            right: 20,\r\n            bottom: 20,\r\n            left: 20\r\n        };\r\n\r\n    chart.currentData = chart.data;\r\n    chart._vars.color = chart.data.color;\r\n    chart.legendData = chart.data.legendData;\r\n    chart.generateSVG(chart.data.legendData, customMargins);\r\n\r\n    //If the container size is small, don't generate a legend\r\n    if (chart.config.container.width > 550) {\r\n        chart.generateVerticalLegend('generatePie');\r\n    }\r\n\r\n    chart.generatePie(chart.currentData);\r\n}\r\n\r\n/**generatePie\r\n *\r\n * creates and draws a pie chart on the svg element\r\n * @params svg, pieData, _vars, container\r\n * @returns {{}}\r\n */\r\nfunction generatePie(currentData) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        pieData = currentData.chartData,\r\n        container = chart.config.container,\r\n        legendData = chart.currentData.legendData,\r\n        colors = chart._vars.color,\r\n        w = container.width,\r\n        h = container.height,\r\n        r = Math.min(h / 2, w / 3),\r\n        data = [],\r\n        total = 0,\r\n        pieDataNew,\r\n        legendElementToggleArray,\r\n        vis,\r\n        pie,\r\n        arc,\r\n        arcs;\r\n\r\n    //define variables to change attr's\r\n    svg.select('g.pie-container').remove();\r\n\r\n    for (let i = 0; i < pieData.length; i++) {\r\n        let obj = {};\r\n        for (let j in chart.data.dataTable) {\r\n            if (chart.data.dataTable.hasOwnProperty(j)) {\r\n                obj[j] = pieData[i][chart.data.dataTable[j]];\r\n            }\r\n        }\r\n        data[i] = obj;\r\n    }\r\n\r\n    pieDataNew = data;\r\n\r\n    if (!chart._vars.legendHeaders) {\r\n        chart._vars.legendHeaders = legendData;\r\n    }\r\n\r\n    legendElementToggleArray = jvCharts.getLegendElementToggleArray(chart._vars.legendHeaders, legendData);\r\n\r\n    if (legendElementToggleArray) {\r\n        for (let slice of pieDataNew) {\r\n            for (let legendEle of legendElementToggleArray) {\r\n                if (legendEle.element === slice.label && legendEle.toggle === false) {\r\n                    slice.value = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    for (let slice of pieDataNew) {\r\n        total += parseFloat(slice.value);\r\n    }\r\n\r\n    vis = svg\r\n        .append('g')\r\n        .data([pieDataNew])\r\n        .attr('class', 'pie-container')\r\n        .attr('height', 200)\r\n        .attr('transform', `translate(${w / 2}, ${r})`);\r\n\r\n    pie = d3.pie().value(d => d.value);\r\n\r\n    //declare an arc generator function\r\n    arc = d3.arc()\r\n        .innerRadius(0)//Normal pie chart when this = 0, can be changed to create donut chart\r\n        .outerRadius(r);\r\n\r\n    //select paths, use arc generator to draw\r\n    arcs = vis\r\n        .selectAll('g.slice')\r\n        .data(pie)\r\n        .enter().append('g').attr('class', 'slice');\r\n\r\n    arcs.append('path')\r\n        .attr('fill', (d, i) => jvCharts.getColors(colors, i, d.data.label))\r\n        .attr('d', d => arc(d))\r\n        .attr('class', (d, i) => {\r\n            if (typeof d.data.label !== 'string') {\r\n                return '';\r\n            }\r\n\r\n            return `editable editable-pie pie-slice-${jvCharts.getViewForValue(d.data.label)} highlight-class-${jvCharts.getViewForValue(d.data.label)} pie-data-${jvCharts.getViewForValue(d.data.label)}`;\r\n        })\r\n        .attr('stroke', chart._vars.pieBorder)\r\n        .attr('stroke-width', chart._vars.pieBorderWidth)\r\n        .on('mouseover', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                //Get tip data\r\n                var tipData = chart.setTipData(d.data, i);\r\n                // Draw tip line\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            chart.tip.hideTip();\r\n        });\r\n\r\n    arcs.append('svg:text')\r\n        .attr('class', 'sliceLabel')\r\n        .attr('transform', (d) => {\r\n            let centroid = arc.centroid(d);\r\n            centroid[0] = centroid[0] * 1.6;\r\n            centroid[1] = centroid[1] * 1.6;\r\n            return `translate(${centroid})`;\r\n        })\r\n        .attr('dy', '.35em')\r\n        .attr('text-anchor', 'middle')\r\n        .text((d, i) => {\r\n            var percent = pieDataNew[i].value / total * 100;\r\n            percent = d3.format('.1f')(percent);\r\n            if (percent > 1) {\r\n                return percent + '%';\r\n            }\r\n        })\r\n        .attr('font-size', chart._vars.fontSize)\r\n        .attr('fill', chart._vars.pieTextColor)\r\n        .attr('pointer-events', 'none');\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvPie.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.scatterplot = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData,\r\n    highlightFromEventData: highlightFromEventData\r\n};\r\n\r\njvCharts.prototype.generateScatter = generateScatter;\r\njvCharts.prototype.createLineGuide = createLineGuide;\r\n\r\n/************************************************ Scatter functions ******************************************************/\r\n\r\n/**setScatterData\r\n *  gets scatter data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    chart.data.legendData = setScatterLegendData(chart.data);\r\n    chart.data.xAxisData = setScatterAxisData(chart.data, 'x', chart._vars);\r\n    chart.data.yAxisData = setScatterAxisData(chart.data, 'y', chart._vars);\r\n    chart.data.zAxisData = chart.data.dataTable.hasOwnProperty('z') ? setScatterAxisData(chart.data, 'z', chart._vars) : {};\r\n    //define color object for chartData\r\n    chart.data.color = jvCharts.setChartColors(chart._vars.color, chart.data.legendData, chart.colors);\r\n}\r\n\r\nfunction getEventData(event, mouse) {\r\n    var chart = this,\r\n        ele = event.target.__data__;\r\n\r\n    //determine if the click event happens inside the container\r\n    let brushContainer = chart.chartDiv.select('.' + chart.config.type + '-container').node(),\r\n        containerBox = brushContainer.getBoundingClientRect(),\r\n        x = mouse[0],\r\n        y = mouse[1],\r\n        insideContainer = false;\r\n\r\n    if (x < containerBox.right && y < containerBox.bottom && x > containerBox.left && y > containerBox.top) {\r\n        insideContainer = true;\r\n    }\r\n\r\n    if (insideContainer && ele) {\r\n        return {\r\n            data: {\r\n                [chart.currentData.dataTable.label]: [jvCharts.getRawForValue(ele[chart.currentData.dataTable.label])]\r\n            },\r\n            node: event.target\r\n        };\r\n    } else if (insideContainer) {\r\n        return {\r\n            data: {}\r\n        };\r\n    }\r\n    return {\r\n        data: false\r\n    };\r\n}\r\n\r\nfunction highlightFromEventData(event) {\r\n    let chart = this,\r\n        label = event.data[chart.currentData.dataTable.label][0],\r\n        cssClass = '.highlight-class-' + jvCharts.getViewForValue(label),\r\n        node = chart.svg.selectAll(cssClass);\r\n\r\n    chart.svg.select('.scatter-circle').selectAll('circle')\r\n        .attr('stroke', 0)\r\n        .attr('stroke-width', 0);\r\n    //highlight necessary circles\r\n    node\r\n        .attr('stroke', chart._vars.highlightBorderColor)\r\n        .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n}\r\n\r\n/**setScatterLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend text\r\n */\r\nfunction setScatterLegendData(data) {\r\n    let legendArray = [];\r\n    if (data.dataTable.hasOwnProperty('series')) {\r\n        let series = data.dataTable.series;\r\n        for (let chartEle of data.chartData) {\r\n            if (legendArray.indexOf(chartEle[series]) === -1) {\r\n                legendArray.push(chartEle[series]);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (legendArray.length === 0 || typeof legendArray[0] === 'undefined') {\r\n        legendArray.push(data.dataTable.label);\r\n        data.dataTable.series = data.dataTable.label;\r\n    }\r\n\r\n    //order legend data in alphabetical order\r\n    legendArray.sort();\r\n    return legendArray;\r\n}\r\n\r\n/**setScatterAxisData\r\n *  gets z axis data based on the chartData\r\n *\r\n * @params data, dataTable\r\n * @returns object with label and values\r\n */\r\nfunction setScatterAxisData(data, axis, _vars) {\r\n    //declare vars\r\n    var axisData = [],\r\n        chartData = data.chartData,\r\n        scatterLabel = data.dataTable[axis],\r\n        min = scatterLabel ? chartData[0][scatterLabel] : 0,\r\n        max = scatterLabel ? chartData[0][scatterLabel] : 0;\r\n\r\n    //loop over data to find max and min\r\n    //also determines the y axis total if the data is stacked\r\n    for (let chartEle of chartData) {\r\n        if (chartEle.hasOwnProperty(scatterLabel)) {\r\n            let num = chartEle[scatterLabel];\r\n            if (!isNaN(num)) {\r\n                num = parseFloat(num);\r\n                if (num > max) {\r\n                    max = num;\r\n                } else if (num < min) {\r\n                    min = num;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (axis !== 'z') {\r\n        min *= 0.9;\r\n        max *= 1.1;\r\n    }\r\n\r\n    if (_vars.yMin && !isNaN(_vars.yMin) && axis === 'y') {\r\n        min = _vars.yMin;\r\n    }\r\n    if (_vars.yMax && !isNaN(_vars.yMax) && axis === 'y') {\r\n        max = _vars.yMax;\r\n    }\r\n    if (_vars.xMin && !isNaN(_vars.xMin) && axis === 'x') {\r\n        min = _vars.xMin;\r\n    }\r\n    if (_vars.xMax && !isNaN(_vars.xMax) && axis === 'x') {\r\n        max = _vars.xMax;\r\n    }\r\n\r\n    axisData.push(min);\r\n    axisData.push(max);\r\n    return {\r\n        'label': scatterLabel,\r\n        'values': axisData,\r\n        'dataType': 'NUMBER',\r\n        'min': min,\r\n        'max': max\r\n    };\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this,\r\n        dataObj = {};\r\n\r\n    dataObj.chartData = chart.data.chartData;\r\n    dataObj.legendData = chart.data.legendData;\r\n    dataObj.dataTable = chart.data.dataTable;\r\n    chart._vars.color = chart.data.color;\r\n    dataObj.xAxisData = chart.data.xAxisData;\r\n    dataObj.yAxisData = chart.data.yAxisData;\r\n    dataObj.zAxisData = chart.data.zAxisData;\r\n    chart.currentData = dataObj;\r\n\r\n\r\n    //generate svg dynamically based on legend data\r\n    chart.generateSVG(dataObj.legendData);\r\n\r\n    //TODO remove these from draw object\r\n    chart.generateXAxis(chart.currentData.xAxisData);\r\n    chart.generateYAxis(chart.currentData.yAxisData);\r\n    chart.generateLegend(chart.currentData.legendData, 'generateScatter');\r\n\r\n    chart.generateScatter();\r\n\r\n    if (chart._vars.lineGuide) {\r\n        chart.createLineGuide();\r\n    }\r\n\r\n    if (typeof dataObj.xAxisScale.ticks === 'function') {\r\n        chart.formatXAxisLabels(dataObj.xAxisScale.ticks().length);\r\n    } else {\r\n        chart.formatXAxisLabels(dataObj.xAxisScale.domain().length);\r\n    }\r\n}\r\n\r\nfunction calculateMean(data, type) {\r\n    return d3.mean(data, value => +value[type]);\r\n}\r\n\r\nfunction createLineGuide() {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        container = chart.config.container,\r\n        chartData = chart.currentData.chartData,\r\n        dataTable = chart.currentData.dataTable,\r\n        xAxisData = chart.currentData.xAxisData,\r\n        yAxisData = chart.currentData.yAxisData,\r\n        xMean = calculateMean(chartData, dataTable.x),\r\n        yMean = calculateMean(chartData, dataTable.y),\r\n        xScale = jvCharts.getAxisScale('x', xAxisData, container, chart._vars),\r\n        yScale = jvCharts.getAxisScale('y', yAxisData, container, chart._vars),\r\n        lineGroup;\r\n\r\n    svg.selectAll('g.lineguide.x').remove();\r\n    svg.selectAll('g.lineguide.y').remove();\r\n\r\n    lineGroup = svg.append('g')\r\n        .attr('class', 'line-group scatterplot-container');\r\n\r\n    //create crosshair based on median x (up/down)\r\n    lineGroup.append('g')\r\n        .attr('class', 'lineguide x')\r\n        .append('line')\r\n        .style('stroke', 'gray')\r\n        .style('stroke-dasharray', ('3, 3'))\r\n        .style('fill', 'black')\r\n        .attr('x1', xScale(xMean))\r\n        .attr('y1', 0)\r\n        .attr('x2', xScale(xMean))\r\n        .attr('y2', container.height);\r\n\r\n    //create crosshair based on median y (left/right)\r\n    lineGroup.append('g')\r\n        .attr('class', 'lineguide y')\r\n        .append('line')\r\n        .style('stroke', 'gray')\r\n        .style('stroke-dasharray', ('3, 3'))\r\n        .style('fill', 'black')\r\n        .attr('x1', 0)\r\n        .attr('y1', yScale(yMean))\r\n        .attr('x2', container.width)\r\n        .attr('y2', yScale(yMean));\r\n}\r\n\r\n/**generateScatter\r\n *\r\n * creates and draws a scatter plot on the svg element\r\n * @params svg, scatterData, _vars, xAxisData, yAxisData, zAxisData, container, dataTable legendData\r\n * @returns {{}}\r\n */\r\nfunction generateScatter() {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        container = chart.config.container,\r\n        scatterData = chart.currentData.chartData,\r\n        dataTable = chart.currentData.dataTable,\r\n        xAxisData = chart.currentData.xAxisData,\r\n        yAxisData = chart.currentData.yAxisData,\r\n        zAxisData = chart.currentData.zAxisData,\r\n        legendData = chart.currentData.legendData,\r\n        colors = chart._vars.color,\r\n        legendElementToggleArray,\r\n        scatterDataFiltered = [],\r\n        x,\r\n        y,\r\n        z;\r\n\r\n    if (!chart._vars.NODE_MIN_SIZE) {\r\n        chart._vars.NODE_MIN_SIZE = 4.5;\r\n    }\r\n    if (!chart._vars.NODE_MAX_SIZE) {\r\n        chart._vars.NODE_MAX_SIZE = 25;\r\n    }\r\n\r\n    //set clip path rectangle\r\n    svg.append('clipPath')\r\n        .attr('id', 'scatter-area')\r\n        .append('rect')\r\n        .attr('x', 1)\r\n        .attr('width', container.width - 1)\r\n        .attr('height', container.height)\r\n        .attr('fill', chart._vars.backgroundColor);\r\n\r\n    svg.selectAll('g.scatterplot-container').remove();\r\n    svg.selectAll('g.scatterplot-container.editable-scatter').remove();\r\n\r\n    if (!chart._vars.legendHeaders) {\r\n        chart._vars.legendHeaders = legendData;\r\n    }\r\n\r\n    legendElementToggleArray = jvCharts.getLegendElementToggleArray(chart._vars.legendHeaders, legendData);\r\n\r\n    if (legendElementToggleArray) {\r\n        for (let j = 0; j < scatterData.length; j++) {\r\n            for (let legendEle of legendElementToggleArray) {\r\n                if (typeof scatterData[j][dataTable.label] === 'undefined' || scatterData[j][dataTable.label] === '') {\r\n                    if (legendEle.toggle !== false) {\r\n                        scatterDataFiltered.push(scatterData[j]);\r\n                    }\r\n                } else if (legendEle.element !== scatterData[j][dataTable.series] || legendEle.toggle !== false) {\r\n                    scatterDataFiltered.push(scatterData[j]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    x = jvCharts.getAxisScale('x', xAxisData, container, chart._vars);\r\n    y = jvCharts.getAxisScale('y', yAxisData, container, chart._vars);\r\n    z;\r\n\r\n    if (zAxisData && typeof zAxisData === 'object' && Object.keys(zAxisData).length > 0) {\r\n        z = jvCharts.getZScale(zAxisData, container, chart._vars);\r\n    }\r\n\r\n    svg.append('g')\r\n        .attr('class', 'scatterplot-circles')\r\n        .selectAll('g')\r\n        .data(scatterData)\r\n        .enter()\r\n        .append('circle')\r\n        .attr('clip-path', 'url(#scatter-area)')\r\n        .attr('class', function (d, i) {\r\n            return 'editable editable-scatter scatter-circle-' + jvCharts.getViewForValue(chart.currentData.chartData[i][chart.currentData.dataTable.label]) + ' highlight-class-' + jvCharts.getViewForValue(chart.currentData.chartData[i][chart.currentData.dataTable.label]);\r\n        })\r\n        .attr('cx', (d, i) => x(scatterData[i][xAxisData.label]))\r\n        .attr('cy', (d, i) => y(scatterData[i][yAxisData.label]))\r\n        .attr('opacity', 0.8)\r\n        .attr('r', (d, i) => {\r\n            if (dataTable.hasOwnProperty('z')) {\r\n                if (chart._vars.toggleZ && zAxisData && typeof zAxisData === 'object' && Object.keys(zAxisData).length > 0 && scatterData[i][dataTable.z]) {\r\n                    return z(scatterData[i][dataTable.z]);\r\n                }\r\n            }\r\n            return chart._vars.NODE_MIN_SIZE;\r\n        })\r\n        .on('mouseover', function (d, i, j) {\r\n            if (chart.showToolTip) {\r\n                this.setAttribute('clip-path', '');\r\n                var tipData = chart.setTipData(d, i);\r\n\r\n                //Draw tip line\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            if (chart.showToolTip) {\r\n                this.setAttribute('clip-path', 'url(#scatter-area)');\r\n                chart.tip.hideTip();\r\n            }\r\n        })\r\n        .attr('fill', (d, i) => jvCharts.getColors(colors, i, scatterData[i][dataTable.series]));\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvScatter.js","'use strict';\r\nimport jvCharts from 'visuals/jvLine.js';\r\n\r\njvCharts.prototype.area = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData,\r\n    highlightFromEventData: highlightFromEventData\r\n};\r\n\r\njvCharts.prototype.fillArea = fillArea;\r\n\r\n/************************************************ Line functions ******************************************************/\r\n\r\n/**setLineData\r\n *  gets line data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    //sort chart data if there is a sort type and label in the _vars\r\n    if (chart._vars.sortType) {\r\n        if (chart._vars.sortLabel && chart._vars.sortType !== 'default') {\r\n            chart.organizeChartData(chart._vars.sortLabel, chart._vars.sortType);\r\n        }\r\n    }\r\n\r\n    //remove if we add non linear to area chart\r\n    chart._vars.lineCurveType = 'Linear';\r\n\r\n    chart.data.legendData = setBarLineLegendData(chart.data);\r\n    chart.data.xAxisData = chart.setAxisData('x', chart.data);\r\n    chart.data.yAxisData = chart.setAxisData('y', chart.data);\r\n\r\n    if (chart._vars.seriesFlipped) {\r\n        chart.setFlippedSeries(chart.data.dataTableKeys);\r\n        chart.flippedData.color = jvCharts.setChartColors(chart._vars.color, chart.flippedData.legendData, chart.colors);\r\n    }\r\n\r\n    //define color object for chartData\r\n    chart.data.color = jvCharts.setChartColors(chart._vars.color, chart.data.legendData, chart.colors);\r\n}\r\n\r\n/**setBarLineLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend tex\r\n */\r\nfunction setBarLineLegendData(data) {\r\n    var legendArray = [];\r\n    for (let item in data.dataTable) {\r\n        if (data.dataTable.hasOwnProperty(item)) {\r\n            if (item !== 'label' && item.indexOf('tooltip') === -1) {\r\n                legendArray.push(data.dataTable[item]);\r\n            }\r\n        }\r\n    }\r\n    return legendArray;\r\n}\r\n/**paintLineChart\r\n *\r\n * The initial starting point for line chart, begins the drawing process. Must already have the data stored in the chart\r\n * object\r\n */\r\nfunction paint() {\r\n    var chart = this,\r\n        //Uses the original data and then manipulates it based on any existing options\r\n        dataObj = chart.getBarDataFromOptions();\r\n\r\n    //assign current data which is used by all bar chart operations\r\n    chart.currentData = dataObj;\r\n\r\n    //Overwrite any pre-existing zoom\r\n    chart.config.zoomEvent = null;\r\n\r\n    //generate svg dynamically based on legend data\r\n    chart.generateSVG(dataObj.legendData);\r\n    chart.generateXAxis(dataObj.xAxisData);\r\n    chart.generateYAxis(dataObj.yAxisData);\r\n    chart.generateLegend(dataObj.legendData, 'generateLine');\r\n\r\n    if (typeof dataObj.xAxisScale.ticks === 'function') {\r\n        chart.formatXAxisLabels(dataObj.xAxisScale.ticks().length);\r\n    } else {\r\n        chart.formatXAxisLabels(dataObj.xAxisScale.domain().length);\r\n    }\r\n\r\n    chart.generateLine(dataObj);\r\n}\r\n\r\nfunction getEventData(event) {\r\n    var chart = this;\r\n    if (event.target.classList.value.split('bar-col-')[1]) {\r\n        return {\r\n            data: {\r\n                [chart.currentData.dataTable.label]: [jvCharts.getRawForValue(event.target.classList.value.split('bar-col-')[1])]\r\n            },\r\n            node: event.target\r\n        };\r\n    } else if (event.target.classList.value.indexOf('area-container') > -1) {\r\n        return {\r\n            data: {}\r\n        };\r\n    }\r\n    return {\r\n        data: false\r\n    };\r\n}\r\n\r\nfunction highlightFromEventData(event) {\r\n    let chart = this,\r\n        label = event.data[chart.currentData.dataTable.label][0],\r\n        cssClass = '.highlight-class-' + jvCharts.getViewForValue(label),\r\n        node = chart.svg.selectAll(cssClass);\r\n\r\n    chart.svg.select('.area-container').selectAll('circle')\r\n        .attr('stroke', 0)\r\n        .attr('stroke-width', 0);\r\n    //highlight necessary circles\r\n    node\r\n        .attr('stroke', chart._vars.highlightBorderColor)\r\n        .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction fillArea(lineData) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        xAxisData = chart.currentData.xAxisData,\r\n        yAxisData = chart.currentData.yAxisData,\r\n        legendData = chart.currentData.legendData,\r\n        container = chart.config.container,\r\n        colors = chart._vars.color,\r\n        x = jvCharts.getAxisScale('x', xAxisData, container, chart._vars, 'no-padding'),\r\n        y = jvCharts.getAxisScale('y', yAxisData, container, chart._vars, 'no-padding'),\r\n        area,\r\n        data = {};\r\n\r\n    //If a legend element is toggled off, use the new list of headers\r\n    if (chart._vars.hasOwnProperty('legendHeaders')) {\r\n        legendData = chart._vars.legendHeaders;\r\n    }\r\n    //If axis are normal\r\n    if (!chart._vars.rotateAxis) {\r\n        area = d3.area()\r\n            .x(d => {\r\n                if (d.x === '') {\r\n                    return x('EMPTY_STRING');\r\n                }\r\n                return x(d.x);\r\n            })\r\n            .y0(container.height)\r\n            .y1(d => y(d.y));\r\n    } else {\r\n        area = d3.area()\r\n            .y(d => y(d.y))\r\n            .x1(0)\r\n            .x0(d => x(d.x));\r\n    }\r\n\r\n    for (let dataEle of lineData) {\r\n        for (let legendEle of legendData) {\r\n            if (legendEle.toggle === false) {\r\n                //Don't write anything to data\r\n                continue;\r\n            }\r\n            if (!data[legendEle]) {\r\n                data[legendEle] = [];\r\n            }\r\n            if (!chart._vars.rotateAxis) {\r\n                data[legendEle].push({\r\n                    'x': dataEle[xAxisData.label],\r\n                    'y': parseFloat(dataEle[legendEle])\r\n                });\r\n            } else {\r\n                data[legendEle].push({\r\n                    'y': dataEle[yAxisData.label],\r\n                    'x': parseFloat(dataEle[legendEle])\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    svg.selectAll('.area').remove();\r\n    for (let key in data) {\r\n        if (data.hasOwnProperty(key)) {\r\n            svg.append('path')\r\n                .datum(data[key])\r\n                .attr('class', () => {\r\n                    if (chart._vars.colorLine == true && chart._vars.thresholds != 'none' && chart._vars.colorChart != false) {\r\n                        return 'area area-threshold';\r\n                    }\r\n                    return 'area';\r\n                })\r\n                .attr('d', area)\r\n                .attr('fill', jvCharts.getColors(colors, null, key))\r\n                .attr('opacity', 0.6)\r\n                .attr('transform', () => chart._vars.rotateAxis ? `translate(0, ${container.height / lineData.length / 2})` : `translate(${container.width / lineData.length / 2}, 0)`)\r\n                .attr('pointer-events', 'none');\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvArea.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.gantt = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData\r\n};\r\n\r\njvCharts.prototype.generateGanttBars = generateGanttBars;\r\njvCharts.prototype.setGanttLegendData = setGanttLegendData;\r\njvCharts.prototype.setGanttAxisData = setGanttAxisData;\r\n\r\n/************************************************ Gantt functions ******************************************************/\r\n\r\n    /**\r\n *\r\n * @param data\r\n * @param dataTable\r\n * @param colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    chart.data.legendData = chart.setGanttLegendData(chart.data);\r\n    chart.data.xAxisData = chart.setGanttAxisData(chart, 'x');\r\n    chart.data.yAxisData = chart.setGanttAxisData(chart, 'y');\r\n    //define color object for chartData\r\n    chart.data.color = jvCharts.setChartColors(chart._vars.color, chart.data.legendData, chart.colors);\r\n}\r\n\r\nfunction getEventData(event) {\r\n    var chart = this;\r\n    var ele = event.target.classList.value.split('bar-col-')[1];\r\n    if (ele) {\r\n        return {\r\n            data: {\r\n                [chart.currentData.dataTable.group]: [jvCharts.getRawForValue(ele)]\r\n            },\r\n            node: event.target\r\n        };\r\n    }\r\n    return {};\r\n}\r\n\r\nfunction setGanttLegendData(data) {\r\n    var legendArray = [];\r\n    for (var i = 1; i <= Object.keys(data.dataTable).length; i++) {\r\n        let key = ' ' + i;\r\n        if (i == 1) {\r\n            key = ''\r\n        }\r\n\r\n        if (data.dataTable.hasOwnProperty([\"start\" + key])) {\r\n            //check to make sure it has a matching end date\r\n            if (data.dataTable.hasOwnProperty([\"end\" + key])) {\r\n                legendArray.push(data.dataTable[\"start\" + key]);\r\n            }\r\n        } \r\n\r\n    }\r\n    return legendArray;\r\n}\r\n\r\nfunction setGanttAxisData(chart, axis) {\r\n    var axisData = [],\r\n        data = chart.data,\r\n        chartData = data.chartData,\r\n        dataType;\r\n\r\n    if (axis === 'x') {\r\n        var label = data.dataTable.group;\r\n        dataType = 'DATE';\r\n\r\n        var numBars = data.legendData.length;\r\n        //Loop through dataTable and assign labels based on how many groups there are\r\n        var valueContainer = [];\r\n        valueContainer.push(data.dataTable[\"start\"]);\r\n        valueContainer.push(data.dataTable[\"end\"]);\r\n        for (var i = 1; i < numBars; i++) {\r\n            valueContainer.push(data.dataTable[\"start \" + (i + 1)]);\r\n            valueContainer.push(data.dataTable[\"end \" + (i + 1)]);\r\n        }\r\n\r\n        //Get all the start and end dates and add them to axis data\r\n        for (var i = 0; i < valueContainer.length; i++) {\r\n            for (var ii = 0; ii < chartData.length; ii++) {\r\n                if (chartData[ii][valueContainer[i]] != null) {\r\n                    axisData.push(chartData[ii][valueContainer[i]]);\r\n                }\r\n            }\r\n        }\r\n\r\n        //Add any axis formatting to this object, need to use when painting\r\n        chart._vars.xAxisFormatting = {};\r\n\r\n    } else {\r\n        dataType = \"STRING\";\r\n        var label = data.dataTable.group;\r\n\r\n        //Add any axis formatting to this object, need to use when painting\r\n        chart._vars.yAxisFormatting = {};\r\n\r\n        for (var i = 0; i < chartData.length; i++) {\r\n            axisData.push(chartData[i][label]);\r\n        }\r\n    }\r\n\r\n    return {\r\n        'label': label,\r\n        'values': axisData,\r\n        'dataType': dataType\r\n    };\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this;\r\n\r\n    chart._vars.color = chart.data.color;\r\n\r\n    chart.currentData = chart.data;\r\n\r\n    chart.generateSVG(chart.currentData.legendData);\r\n    chart.generateXAxis(chart.currentData.xAxisData);\r\n    chart.generateYAxis(chart.currentData.yAxisData);\r\n    chart.generateLegend(chart.currentData.legendData, 'generateGanttBars');\r\n    chart.drawGridlines(chart.currentData.xAxisData);\r\n    chart.generateGanttBars(chart.currentData);\r\n    if (typeof chart.currentData.xAxisScale.ticks === \"function\") {\r\n        chart.formatXAxisLabels(chart.currentData.xAxisScale.ticks().length);\r\n    } else {\r\n        chart.formatXAxisLabels(chart.currentData.xAxisScale.domain().length);\r\n    }\r\n}\r\n\r\nfunction generateGanttBars(ganttData) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        colors = ganttData.color,\r\n        container = chart.config.container,\r\n        yAxisData = ganttData.yAxisData;\r\n\r\n    //Remove existing bars from page\r\n    svg.selectAll(\"g.gantt-container\").remove();\r\n    var bars = svg.append(\"g\")\r\n        .attr(\"class\", \"gantt-container\"),\r\n        dataHeaders = chart._vars.legendHeaders ? chart._vars.legendHeaders : ganttData.legendData,\r\n        ganttDataNew = jvCharts.getToggledData(ganttData, dataHeaders),\r\n        x = jvCharts.getAxisScale('x', ganttData.xAxisData, container, chart._vars),\r\n        y = jvCharts.getAxisScale('y', ganttData.yAxisData, container, chart._vars),\r\n        sampleData = ganttDataNew;\r\n\r\n    chart._vars.rotateAxis = true;\r\n\r\n    var numBars = ganttData.legendData.length;\r\n    var ganttBars = [];\r\n    //create array of start dates and end dates to iterate through\r\n    var startDates = [];\r\n    var endDates = [];\r\n    for (var i = 1; i <= numBars; i++) {\r\n        let key = ' ' + i;\r\n        if (i == 1) {\r\n            key = ''\r\n        }\r\n        startDates.push(chart.currentData.dataTable[\"start\" + key]);\r\n        endDates.push(chart.currentData.dataTable[\"end\" + key]);\r\n    }\r\n    \r\n    for (var ii = 0; ii < numBars; ii++) {\r\n        var externalCounterForJ = -1;\r\n        ganttBars[ii] = bars.selectAll(\".gantt-bar\" + ii)\r\n            .data(sampleData)\r\n            .enter()\r\n            .append(\"rect\")\r\n            .attr('class', function (d, i, j) {\r\n                externalCounterForJ++;\r\n                var label = jvCharts.getViewForValue(String(sampleData[externalCounterForJ][chart.currentData.dataTable.group]));\r\n\r\n                return 'gantt-bar' + ii + ' editable editable-bar bar-col-' + label + '-index-' + ii + ' highlight-class-' + label + ' rect ';\r\n            })\r\n            .attr(\"width\", 0)\r\n            .attr(\"height\", y.bandwidth() / numBars)\r\n            .attr(\"x\", function (d, i) {\r\n                if (d[startDates[ii]]) {\r\n                    return x(new Date(d[startDates[ii]]));\r\n                }\r\n                return 0;\r\n            })\r\n            .attr(\"y\", function (d, i) {\r\n                return y(d[yAxisData.label]) + (y.bandwidth() / numBars * ii);\r\n            })\r\n            .attr(\"rx\", 3)\r\n            .attr(\"ry\", 3)\r\n            .attr(\"fill\", function (d, i, j) {\r\n                var typeVal = chart.currentData.dataTable[\"Type\" + (ii + 1)];\r\n                if (chart._vars.legendHeaders) {\r\n                    var color = jvCharts.getColors(colors, 0, chart._vars.legendHeaders[ii]);\r\n                } else {\r\n                    var color = jvCharts.getColors(colors, 0, chart.currentData.legendData[ii]);\r\n                }\r\n                return color;\r\n            });\r\n\r\n\r\n        ganttBars[ii].transition()\r\n            .duration(400)\r\n            .delay(100)\r\n            .attr(\"width\", function (d, i) {\r\n                var width = x(new Date(d[endDates[ii]])) - x(new Date(d[startDates[ii]]));//(x(d.StartDate) - x(d.EndDate));\r\n                if (width >= 0) {\r\n                    return width;\r\n                }\r\n                else {\r\n                    return 0;\r\n                }\r\n            });\r\n    }\r\n    var externalCounterForJJ = -1;\r\n    var dataToPlot = jvCharts.getPlotData(ganttDataNew, chart);\r\n    var eventGroups = bars.selectAll(\".event-rect\")\r\n        .data(dataToPlot)\r\n        .enter()\r\n        .append('rect')\r\n        .attr(\"class\", \"event-rect\")\r\n        .attr('class', function (d, i, j) {\r\n            externalCounterForJJ++;\r\n            var label = jvCharts.getViewForValue(String(sampleData[externalCounterForJJ][chart.currentData.dataTable.group]));\r\n            return 'event-rect bar-col-' + label;\r\n        })\r\n        .attr(\"x\", 0)\r\n        .attr(\"y\", function (d, i) {\r\n            return container.height / ganttDataNew.length * i;\r\n        })\r\n        .attr(\"width\", container.width)\r\n        .attr(\"height\", function (d, i) {\r\n            return container.height / ganttDataNew.length;\r\n        })\r\n        .attr(\"fill\", \"transparent\")\r\n        .attr(\"transform\", \"translate(0,0)\");\r\n    eventGroups\r\n        .on(\"mouseover\", function (d, i, j) { // Transitions in D3 don't support the 'on' function They only exist on selections. So need to move that event listener above transition and after append\r\n            if (chart.showToolTip) {\r\n                //Get tip data\r\n                var tipData = chart.setTipData(d, i);\r\n                //Draw tip\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n            }\r\n\r\n        })\r\n        .on(\"mousemove\", function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on(\"mouseout\", function (d) {\r\n            if (chart.showToolTip) {\r\n                chart.tip.hideTip();\r\n            }\r\n        });\r\n\r\n    var currentDate = new Date();\r\n    var dateData = [currentDate];\r\n    //Draws a line representing the current date\r\n    svg.selectAll(\".currentDateLine\")\r\n        .data(dateData)\r\n        .enter()\r\n        .append(\"line\")\r\n        .attr(\"x1\", function (d, i) {\r\n            return x(d);\r\n        })\r\n        .attr(\"x2\", function (d, i) {\r\n            return x(d);\r\n        })\r\n        .attr(\"y1\", function (d, i) {\r\n            return \"0px\";\r\n        })\r\n        .attr(\"y2\", function (d, i) {\r\n            return chart.config.container.height;\r\n        })\r\n        .attr(\"class\", \"currentDateLine\")\r\n        .attr(\"stroke\", chart._vars.axisColor)\r\n        .attr(\"stroke-width\", chart._vars.STROKE_WIDTH)\r\n        .attr(\"stroke-dasharray\", (\"3, 3\"));\r\n\r\n\r\n    svg.selectAll(\".currentDateLabel\")\r\n        .data(dateData)\r\n        .enter()\r\n        .append(\"text\")\r\n        .text(function () {\r\n            var today = new Date();\r\n            var dd = today.getDate();\r\n            var mm = today.getMonth() + 1; //January is 0!\r\n\r\n            var yyyy = today.getFullYear();\r\n            if (dd < 10) {\r\n                dd = '0' + dd\r\n            }\r\n            if (mm < 10) {\r\n                mm = '0' + mm\r\n            }\r\n            var today = mm + '/' + dd + '/' + yyyy;\r\n            return today;\r\n        })\r\n        .attr(\"x\", function (d, i) {\r\n            return x(d);\r\n        })\r\n        .attr(\"y\", function (d, i) {\r\n            return \"-10px\";\r\n        })\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr('fill', chart._vars.fontColor);\r\n}\r\n\r\nmodule.exports = jvCharts;\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvGantt.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.heatmap = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData\r\n};\r\n\r\njvCharts.prototype.generateHeatMap = generateHeatMap;\r\n\r\n/************************************************ HeatMap functions ******************************************************/\r\n\r\nfunction quantized(chart, min, max) {\r\n    let bucketCount = chart._vars.buckets,\r\n        sectionValue = (max - min) / bucketCount,\r\n        quantizedArray = [];\r\n    for (let i = 0; i < bucketCount; i++) {\r\n        quantizedArray[i] = min + i * sectionValue;\r\n    }\r\n    return quantizedArray;\r\n}\r\n\r\n/**setData\r\n *  gets heatmap data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    let chart = this,\r\n        axisNames = setHeatAxisNames(chart.data);\r\n    chart.data.xAxisData = axisNames.xAxisData;\r\n    chart.data.yAxisData = axisNames.yAxisData;\r\n    chart.data.processedData = setProcessedData(chart, chart.data, chart.data.xAxisData.values, chart.data.yAxisData.values);\r\n    //define color object for chartData\r\n    chart._vars.color = jvCharts.setChartColors(chart._vars.color, chart.data.xAxisData.values, chart.colors);\r\n    chart.data.heatData = setHeatmapLegendData(chart, chart.data);\r\n}\r\n\r\n\r\nfunction getEventData(event) {\r\n    let chart = this;\r\n\r\n    if (event.target.__data__) {\r\n        let data = event.target.__data__;\r\n        return {\r\n            data: {\r\n                //[chart.currentData.dataTable.heat]: [data.value],\r\n                [chart.currentData.dataTable.x]: [data.xAxisName],\r\n                [chart.currentData.dataTable.y]: [data.yAxisName]\r\n            },\r\n            node: event.target\r\n        };\r\n    }\r\n    return {\r\n        data: {\r\n            [chart.currentData.dataTable.x]: '',\r\n            [chart.currentData.dataTable.y]: ''\r\n        }\r\n    };\r\n}\r\n\r\nfunction setHeatmapLegendData(chart, data) {\r\n    let heatData;\r\n\r\n    chart._vars.colors = organizeColors(chart);\r\n    data.heatScores.sort((a, b) => a - b);\r\n\r\n    chart.data.colorScale = d3.scaleQuantile()\r\n        .domain(data.heatScores)\r\n        .range(chart._vars.colors);\r\n\r\n    if (chart._vars.quantiles === true) {\r\n        let temp = chart.data.colorScale.quantiles();\r\n        if (temp[0] === 0) {\r\n            heatData = chart.data.colorScale.quantiles();\r\n        } else {\r\n            heatData = [0].concat(chart.data.colorScale.quantiles());\r\n        }\r\n    } else {\r\n        heatData = quantized(chart, data.heatScores[0], data.heatScores[data.heatScores.length - 1]);\r\n    }\r\n\r\n    return heatData;\r\n}\r\n\r\nfunction organizeColors(chart) {\r\n    let colorSelectedBucket = [],\r\n        sValue = chart._vars.buckets,\r\n        newColors = [],\r\n        bucketMapper = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\r\n        bucketCount = bucketMapper[sValue - 1],\r\n        colors;\r\n\r\n    for (let c in chart._vars.colors) {\r\n        if (chart._vars.colors.hasOwnProperty(c)) {\r\n            colorSelectedBucket.push(chart._vars.colors[c]);\r\n        }\r\n    }\r\n\r\n    for (var i = 0; i < bucketCount; i++) {\r\n        if (i >= bucketCount / 2) {\r\n            newColors[i] = colorSelectedBucket[Math.round((i + 1) / bucketCount * 20) - 1];\r\n        } else {\r\n            newColors[i] = colorSelectedBucket[Math.round((i) / bucketCount * 20)];\r\n        }\r\n    }\r\n\r\n    colors = newColors.slice(0);\r\n    return colors;\r\n}\r\n\r\nfunction setHeatAxisNames(data) {\r\n    var chartData = data.chartData,\r\n        xAxisName = data.dataTable.x,\r\n        yAxisName = data.dataTable.y,\r\n        xAxisArray = [],\r\n        yAxisArray = [],\r\n        returnObj = {};\r\n\r\n    for (let key of data.dataTableKeys) {\r\n        if (key.model === 'x') {\r\n            returnObj.xAxisData = {};\r\n            returnObj.xAxisData.dataType = key.type;\r\n            returnObj.xAxisData.label = data.dataTable.x;\r\n        } else if (key.model === 'y') {\r\n            returnObj.yAxisData = {};\r\n            returnObj.yAxisData.dataType = key.type;\r\n            returnObj.yAxisData.label = data.dataTable.y;\r\n        }\r\n    }\r\n\r\n    for (let ele of chartData) {\r\n        if (xAxisArray.indexOf(ele[xAxisName]) === -1) {\r\n            xAxisArray.push(ele[xAxisName]);\r\n            //TODO make into 1 function for min max... waste of space\r\n            if (returnObj.xAxisData.dataType === 'NUMBER') {\r\n                //push min and max info\r\n                if (!returnObj.xAxisData.min) {\r\n                    returnObj.xAxisData.min = ele[xAxisName];\r\n                } else if (ele[xAxisName] < returnObj.xAxisData.min) {\r\n                    returnObj.xAxisData.min = ele[xAxisName];\r\n                }\r\n\r\n                if (!returnObj.xAxisData.max) {\r\n                    returnObj.xAxisData.max = ele[xAxisName];\r\n                } else if (ele[xAxisName] < returnObj.xAxisData.max) {\r\n                    returnObj.xAxisData.max = ele[xAxisName];\r\n                }\r\n            }\r\n        }\r\n        if (yAxisArray.indexOf(ele[yAxisName]) === -1) {\r\n            yAxisArray.push(ele[yAxisName]);\r\n            if (returnObj.yAxisData.dataType === 'NUMBER') {\r\n                //push min and max info\r\n                if (!returnObj.yAxisData.min) {\r\n                    returnObj.yAxisData.min = ele[yAxisName];\r\n                } else if (ele[yAxisName] < returnObj.yAxisData.min) {\r\n                    returnObj.yAxisData.min = ele[yAxisName];\r\n                }\r\n\r\n                if (!returnObj.yAxisData.max) {\r\n                    returnObj.yAxisData.max = ele[yAxisName];\r\n                } else if (ele[yAxisName] < returnObj.yAxisData.max) {\r\n                    returnObj.yAxisData.max = ele[yAxisName];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    returnObj.xAxisData.values = xAxisArray;\r\n    returnObj.yAxisData.values = yAxisArray;\r\n\r\n    return returnObj;\r\n}\r\n\r\nfunction setProcessedData(chart, data, xAxisArray, yAxisArray) {\r\n    var chartData = data.chartData,\r\n        xAxisName = data.dataTable.x,\r\n        yAxisName = data.dataTable.y,\r\n        heat = data.dataTable.heat,\r\n        dataArray = [],\r\n        keys;\r\n\r\n    data.heatScores = [];\r\n    /*Assign each name a number and place matrix coordinates inside of dataArray */\r\n    for (let i = 0; i < chartData.length; i++) {\r\n        dataArray.push({\r\n            value: chartData[i][heat],\r\n            xAxisName: chartData[i][xAxisName],\r\n            yAxisName: chartData[i][yAxisName]\r\n        });\r\n\r\n        keys = Object.keys(data.dataTable);\r\n        for (let key of keys) {\r\n            if (key.indexOf('tooltip') > -1) {\r\n                dataArray[i][key] = chartData[i][data.dataTable[key]];\r\n            }\r\n        }\r\n\r\n        //This array stores the values as numbers\r\n        data.heatScores.push(chartData[i][heat]);\r\n        for (let j = 0; j < xAxisArray.length; j++) {\r\n            if (xAxisArray[j] === dataArray[i].xAxisName) {\r\n                dataArray[i].xAxis = j;\r\n                break;\r\n            }\r\n        }\r\n        for (let j = 0; j < yAxisArray.length; j++) {\r\n            if (yAxisArray[j] === dataArray[i].yAxisName) {\r\n                dataArray[i].yAxis = j;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    return dataArray;\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this,\r\n        customMargin = {\r\n            top: 0,\r\n            right: 40,\r\n            left: 0,\r\n            bottom: 20\r\n        };\r\n\r\n    chart._vars.color = chart.data.color;\r\n    chart.currentData = chart.data;//Might have to move into method bc of reference/value relationship\r\n\r\n    //Generate SVG-legend data is used to determine the size of the bottom margin (set to null for no legend)\r\n    chart.generateSVG(null, customMargin);\r\n    //chart.generateLegend(chart.currentData.legendData, 'generateHeatMap');\r\n    chart.generateHeatMap();\r\n}\r\n\r\n/**generateHeatMap\r\n *\r\n * paints the HeatMap on the chart\r\n * @params HeatMapData\r\n */\r\nfunction generateHeatMap() {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        colors = chart._vars.colors,\r\n        quantiles = chart._vars.quantiles,\r\n        data = chart.data.processedData,\r\n        heatMapData = chart.currentData,\r\n        gridSize = chart._vars.heatGridSize,\r\n        legendSpacing = chart._vars.heatLegendSpacing,\r\n        vis,\r\n        yAxisTitle;\r\n\r\n    d3.select('body').append('div')\r\n        .attr('class', 'tooltip')\r\n        .style('opacity', 0);\r\n    vis = svg.append('g').attr('transform', 'translate(0,0)').attr('class', 'heatmap');\r\n\r\n\r\n    yAxisTitle = vis.selectAll('.heatmap')\r\n        .data([heatMapData.dataTable.y]);\r\n\r\n    yAxisTitle.enter().append('text')\r\n        .attr('class', 'axisLabels bold')\r\n        .attr('x', -21)\r\n        .attr('y', -5)\r\n        .attr('text-anchor', 'end')\r\n        .attr('transform', () => 'translate(-' + (chart._vars.heatmapYmargin + 10) + ',' + 0 + ')rotate(-90)')\r\n        .text(d => d);\r\n\r\n    yAxisTitle.exit().remove();\r\n    var formatType = jvCharts.jvFormatValueType(chart.currentData.yAxisData.values, chart.currentData.yAxisData.dataType);\r\n\r\n    var yAxisSection = vis.append('svg:g')\r\n        .attr('class', 'yAxisSection');\r\n\r\n    var yAxis = yAxisSection.selectAll('.xAxis')\r\n        .data(heatMapData.yAxisData.values)\r\n        .enter().append('svg:g');\r\n\r\n    yAxis.append('text')\r\n        .text(d => {\r\n            var str = jvCharts.jvFormatValue(d, formatType);\r\n            if (str.length > 15) {\r\n                return str.substring(0, 14) + '...';\r\n            }\r\n            return str;\r\n        })\r\n        .attr('x', 0)\r\n        .attr('y', (d, i) => i * gridSize)\r\n        .style('text-anchor', 'end')\r\n        .style('font-size', chart._vars.fontSize)\r\n        .attr('transform', 'translate(-6,' + gridSize / 1.5 + ')')\r\n        .attr('class', 'rowLabel pointer')\r\n        .on('click', function (d) {\r\n            //removing styling\r\n            d3.selectAll('.rowLabel').classed('text-highlight', false);\r\n            d3.selectAll('.colLabel').classed('text-highlight', false);\r\n            d3.selectAll('.heat').classed('rect-highlight', false);\r\n            d3.selectAll('.heat').classed('rect-border', false);\r\n\r\n            let paintBool = true;\r\n            if (d === chart._vars.selectedX) {\r\n                chart._vars.selectedX = '';\r\n                paintBool = false;\r\n            } else {\r\n                chart._vars.selectedX = d;\r\n            }\r\n\r\n            //fade all rects except in this row\r\n            d3.selectAll('.heat').classed('rect-highlight', r => {\r\n                for (var i = 0; i < chart.currentData.yAxisData.values.length; i++) {\r\n                    if (chart.currentData.yAxisData.values[i] === d && d) {\r\n                        if (r.yAxis !== i && paintBool) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            });\r\n        });\r\n\r\n    yAxis.append('title')\r\n        .text(d => d);\r\n\r\n\r\n    var xAxisTitle = vis.selectAll('.xAxisTitle')\r\n        .data([heatMapData.dataTable.x]);\r\n\r\n    xAxisTitle.enter().append('text')\r\n        .attr('class', 'axisLabels bold')\r\n        .attr('x', 6)\r\n        .attr('y', 9)\r\n        .attr('transform', `translate(0, -${chart._vars.heatmapXmargin - 10})`)\r\n        .text(d => d);\r\n\r\n    xAxisTitle.exit().remove();\r\n\r\n    var xAxisSection = vis.append('svg:g')\r\n        .attr('class', 'xAxisSection');\r\n\r\n    var xAxis = xAxisSection.selectAll('.xAxis')\r\n        .data(heatMapData.xAxisData.values)\r\n        .enter().append('svg:g');\r\n\r\n    formatType = jvCharts.jvFormatValueType(chart.currentData.xAxisData.values, chart.currentData.xAxisData.dataType);\r\n\r\n    xAxis.append('text')\r\n        .text(d => {\r\n            var str = jvCharts.jvFormatValue(d, formatType);\r\n            if (str.length > 15) {\r\n                return str.substring(0, 14) + '...';\r\n            }\r\n            return str;\r\n        })\r\n        .style('text-anchor', 'start')\r\n        .attr('x', 6)\r\n        .attr('y', 7)\r\n        .attr('class', 'colLabel pointer')\r\n        .attr('transform', (d, i) => `translate(${i * gridSize}, -6)rotate(-45)`)\r\n        .attr('title', d => d)\r\n        .style('font-size', chart._vars.fontSize)\r\n        .on('click', d => {\r\n            //removing styling\r\n            d3.selectAll('.rowLabel').classed('text-highlight', false);\r\n            d3.selectAll('.colLabel').classed('text-highlight', false);\r\n            d3.selectAll('.heat').classed('rect-highlight', false);\r\n            d3.selectAll('.heat').classed('rect-border', false);\r\n\r\n            let paintBool = true;\r\n            if (d === chart._vars.selectedX) {\r\n                chart._vars.selectedX = '';\r\n                paintBool = false;\r\n            } else {\r\n                chart._vars.selectedX = d;\r\n            }\r\n            //fade all rects except in this column\r\n            d3.selectAll('.heat').classed('rect-highlight', r => {\r\n                for (var i = 0; i < chart.currentData.xAxisData.values.length; i++) {\r\n                    if (chart.currentData.xAxisData.values[i] === d) {\r\n                        if (r.xAxis !== i && paintBool) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            });\r\n        });\r\n\r\n    xAxis.append('title')\r\n        .text(d => d);\r\n\r\n    var width = heatMapData.xAxisData.values.length * gridSize;\r\n    var height = heatMapData.yAxisData.values.length * gridSize;\r\n    var formatValueType = jvCharts.jvFormatValueType(chart.data.heatData);\r\n\r\n    //vertical lines\r\n    var vLine = vis.append('svg:g')\r\n        .attr('class', 'vLineSection');\r\n\r\n    vLine.selectAll('.vLineSection')\r\n        .data(d3.range(heatMapData.xAxisData.values.length + 1))\r\n        .enter().append('line')\r\n        .attr('x1', d => d * gridSize)\r\n        .attr('x2', d => d * gridSize)\r\n        .attr('y1', 0)\r\n        .attr('y2', height)\r\n        .style('stroke', chart._vars.gridLineColor);\r\n\r\n    //horizontal lines\r\n    var hLine = vis.append('svg:g')\r\n        .attr('class', 'heatmap-container');\r\n\r\n    hLine.selectAll('.heatmap-container')\r\n        .data(d3.range(heatMapData.yAxisData.values.length + 1))\r\n        .enter().append('line')\r\n        .attr('x1', 0)\r\n        .attr('x2', width)\r\n        .attr('y1', d => d * gridSize)\r\n        .attr('y2', d => d * gridSize)\r\n        .style('stroke', chart._vars.gridLineColor);\r\n\r\n    var heatMap = vis.append('svg:g')\r\n        .attr('class', 'heatSection');\r\n\r\n    heatMap.selectAll('.heatSection')\r\n        .data(data)\r\n        .enter().append('rect')\r\n        .attr('x', d => d.xAxis * gridSize)\r\n        .attr('y', d => d.yAxis * gridSize)\r\n        .attr('rx', 2)\r\n        .attr('ry', 2)\r\n        .attr('class', 'heat')\r\n        .attr('width', gridSize - 1)\r\n        .attr('height', gridSize - 1)\r\n        .style('fill', d => {\r\n            if (quantiles === true) {\r\n                if (chart._vars.domainArray.length === 0 || (d.value >= chart._vars.domainArray[0] && d.value <= chart._vars.domainArray[1])) {\r\n                    return chart.data.colorScale(d.value);\r\n                }\r\n                return 'white';\r\n            }\r\n            if (chart._vars.domainArray.length === 0 || (d.value >= chart._vars.domainArray[0] && d.value <= chart._vars.domainArray[1])) {\r\n                return getQuantizedColor(chart.data.heatData, d.value);\r\n            }\r\n            return 'white';\r\n        })\r\n        .on('mouseover', function (d, i) {\r\n            //Get tip data\r\n            var tipData = chart.setTipData(d, i);\r\n            tipData.color = chart.data.colorScale(d.value);\r\n\r\n            //Draw tip\r\n            chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n            chart.tip.d = d;\r\n            chart.tip.i = i;\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            chart.tip.hideTip();\r\n        })\r\n        .on('dblclick', function (d) {\r\n            chart.clicked = !chart.clicked;\r\n            if (chart.clicked) {\r\n                //border around selected rect\r\n                d3.select(this).classed('rect-border', true);\r\n                //Fade row labels\r\n                d3.selectAll('.rowLabel').classed('text-highlight', (r, ri) => ri != d.yAxis);\r\n                //fade column labels\r\n                d3.selectAll('.colLabel').classed('text-highlight', (r, ri) => ri != d.xAxis);\r\n                //fade all rects except selected\r\n                d3.selectAll('.heat').classed('rect-highlight', r => r.yAxis != d.yAxis || r.xAxis != d.xAxis);\r\n            } else {\r\n                //removing styling\r\n                d3.selectAll('.rowLabel').classed('text-highlight', false);\r\n                d3.selectAll('.colLabel').classed('text-highlight', false);\r\n                d3.selectAll('.heat').classed('rect-highlight', false);\r\n                d3.selectAll('.heat').classed('rect-border', false);\r\n            }\r\n        });\r\n\r\n\r\n    chart.chartDiv.select('svg.heatLegend').remove();\r\n\r\n    if (chart._vars.toggleLegend) {\r\n        var legendContainer = chart.chartDiv.append('svg')\r\n            .style('top', chart.config.margin.top + 'px')\r\n            .style('background', chart._vars.backgroundColor)\r\n            .attr('class', 'heatLegend')\r\n            .attr('width', chart.config.heatWidth);\r\n\r\n        var legend = legendContainer.selectAll('.legend')\r\n            .data(chart.data.heatData)\r\n            .enter().append('g')\r\n            .attr('transform', (d, i) => `translate(0, ${gridSize * i} )`);\r\n\r\n        legend.append('rect')\r\n            .attr('class', 'legend')\r\n            .attr('width', gridSize)\r\n            .attr('height', gridSize)\r\n            .style('fill', (d, i) => colors[i])\r\n            .on('click', () => d3.selectAll('.heat').classed('rect-highlight', false))\r\n            //removing styling\r\n            //fade all rects except selected\r\n            .on('dblclick', d => d3.selectAll('.heat').classed('rect-highlight', r => r.value < d));\r\n\r\n        legend.append('text')\r\n            .attr('class', 'legendText')\r\n            .attr('x', gridSize + legendSpacing)\r\n            .attr('y', gridSize - legendSpacing)\r\n            .text(d => {\r\n                if (isNaN(d)) {\r\n                    return d;\r\n                }\r\n                return jvCharts.jvFormatValue(d, formatValueType);\r\n            })\r\n            .style('fill', chart._vars.black);\r\n    }\r\n\r\n    function getQuantizedColor(quantizedArray, value) {\r\n        for (let i = 1; i < quantizedArray.length; i++) {\r\n            if (value < quantizedArray[i]) {\r\n                return colors[i - 1];\r\n            }\r\n        }\r\n        return colors[quantizedArray.length - 1];\r\n    }\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvHeatmap.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.circlepack = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData\r\n};\r\n\r\njvCharts.prototype.generatePack = generatePack;\r\n\r\n/************************************************ Pack functions ******************************************************/\r\n\r\n/**setPackChartData\r\n *  gets pack data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    chart.data.legendData = setPackLegendData(chart.data.dataTable);\r\n    if (!chart.data.chartData.hasOwnProperty('children')) {\r\n        chart.data.chartData = jvCharts.convertTableToTree(chart.data.chartData, chart.data.dataTable);\r\n    }\r\n\r\n    //define color object for chartData\r\n    chart.data.color = chart.colors;\r\n}\r\n\r\nfunction getEventData() {\r\n    return {};\r\n}\r\n\r\n/**setPackLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend text\r\n */\r\nfunction setPackLegendData(dataTable) {\r\n    var legendArray = [],\r\n        label = '';\r\n    for (let key in dataTable) {\r\n        if (dataTable.hasOwnProperty(key)) {\r\n            if (key === 'value') {\r\n                label = dataTable[key];\r\n            } else if (key !== 'tooltip 1') {\r\n                legendArray.push(dataTable[key]);\r\n            }\r\n        }\r\n    }\r\n    legendArray.unshift(label);\r\n    return legendArray;\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this,\r\n        packMargins = {\r\n            top: 30,\r\n            right: 20,\r\n            bottom: 15,\r\n            left: 20\r\n        };\r\n    chart._vars.color = chart.data.color;\r\n\r\n    chart.currentData = chart.data;//Might have to move into method bc of reference/value relationship\r\n\r\n    //Generate SVG-legend data is used to determine the size of the bottom margin (set to null for no legend)\r\n    chart.generateSVG(null, packMargins);\r\n    chart.generateVerticalLegend('generatePack');\r\n    chart.generatePack(chart.currentData);\r\n}\r\n\r\n/**generatePack\r\n *\r\n * paints the pack on the chart\r\n * @params packData\r\n */\r\nfunction generatePack() {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        container = chart.config.container,\r\n        w = container.width,\r\n        h = container.height,\r\n        r = Math.min(h / 2, w / 3),\r\n        margin = 20,\r\n        diameter = r * 2,\r\n        color,\r\n        root,\r\n        pack,\r\n        vis,\r\n        circle,\r\n        node,\r\n        view;\r\n\r\n    chart.children = chart.data.chartData;\r\n\r\n    color = d3.scaleOrdinal()\r\n        .range(chart.data.color\r\n            .map(c => {\r\n                c = d3.rgb(c);\r\n                c.opacity = 0.8;\r\n                return c;\r\n            }));\r\n\r\n    //assigns the data to a hierarchy using parent-child relationships\r\n    root = d3.hierarchy(chart.children, d => d.children);\r\n\r\n    pack = d3.pack()\r\n        .size([container.width, container.height])\r\n        .padding(2);\r\n\r\n    pack(root\r\n        .sum(d => d.hasOwnProperty('children') ? 0 : d.name)\r\n        .sort((a, b) => b.height - a.height || b.value - a.value))\r\n        .descendants();\r\n\r\n    svg.selectAll('.pack').remove();\r\n\r\n    vis = svg.append('g')\r\n        .attr('class', 'pack')\r\n        .attr('transform', 'translate(' + (w / 2) + ',' + r + ')');\r\n\r\n    circle = vis.selectAll('circle')\r\n        .data(root.descendants())\r\n        .enter().append('circle')\r\n        .attr('class', d => d.parent ? d.children ? 'node' : 'node node--leaf' : 'node node--root')\r\n        .style('fill', d => {\r\n            d.color = color(d.depth);\r\n            return d.children ? color(d.depth) : null;\r\n        })\r\n        .on('click', function (d) {\r\n            if (focus !== d) {\r\n                zoom(d);\r\n                d3.event.stopPropagation();\r\n            }\r\n        })\r\n        .on('mouseover', function (d, i) {\r\n            //Get tip data\r\n            var tipData = chart.setTipData(d, i);\r\n            //Draw tip line\r\n            chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n            chart.tip.d = d;\r\n            chart.tip.i = i;\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            chart.tip.hideTip();\r\n        });\r\n\r\n    node = svg.selectAll('circle,text');\r\n\r\n    d3.select('body')\r\n        .on('click', function () {\r\n            zoom(root);\r\n        });\r\n\r\n    zoomTo([root.x, root.y, root.r * 2 + margin]);\r\n\r\n    function zoom(d) {\r\n        var focus = d;\r\n        d3.transition()\r\n            .duration(d3.event.altKey ? 7500 : 750)\r\n            .tween('zoom', function (d) {\r\n                var i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2 + margin]);\r\n                return function (t) {\r\n                    zoomTo(i(t));\r\n                };\r\n            });\r\n    }\r\n    function zoomTo(v) {\r\n        var k = diameter / v[2];\r\n\r\n        //set global zoom\r\n        view = v;\r\n\r\n        node.attr('transform', d => {\r\n            if (d && d.x && d.y) {\r\n                return 'translate(' + (d.x - v[0]) * k + ',' + (d.y - v[1]) * k + ')';\r\n            }\r\n            return '';\r\n        });\r\n\r\n        circle.attr('r', d => d.r * k);\r\n    }\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvPack.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.radial = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData,\r\n    highlightFromEventData: highlightFromEventData\r\n};\r\n\r\njvCharts.prototype.generateRadial = generateRadial;\r\n\r\n/************************************************ Radial Data functions ******************************************************/\r\n/**setRadialChartData\r\n *  gets bar data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    let chart = this;\r\n    chart.data.legendData = setRadialLegendData(chart.data);\r\n    //define color object for chartData\r\n    chart.data.color = jvCharts.setChartColors(chart._vars.color, chart.data.legendData, chart.colors);\r\n}\r\n\r\nfunction paint() {\r\n    let chart = this,\r\n        radialMargins = {\r\n            top: 40,\r\n            right: 20,\r\n            bottom: 20,\r\n            left: 20\r\n        };\r\n    chart._vars.color = chart.data.color;\r\n    chart.currentData = chart.data;//Might have to move into method bc of reference/value relationship\r\n\r\n    //Generate SVG-legend data is used to determine the size of the bottom margin (set to null for no legend)\r\n    chart.generateSVG(null, radialMargins);\r\n    chart.generateVerticalLegend('generateRadial');\r\n    chart.generateRadial();\r\n}\r\n\r\nfunction getEventData(event) {\r\n    let chart = this,\r\n        ele = event.target.classList.value.split('radial-data-')[1];\r\n    if (ele) {\r\n        return {\r\n            data: {\r\n                [chart.currentData.dataTable.label]: [jvCharts.getRawForValue(ele)]\r\n            },\r\n            node: event.target\r\n        };\r\n    } else if (event.target.classList.value.indexOf('radial-container') > -1) {\r\n        return {\r\n            data: {}\r\n        };\r\n    }\r\n    return {\r\n        data: false\r\n    };\r\n}\r\n\r\nfunction highlightFromEventData(event) {\r\n    let chart = this,\r\n        label = event.data[chart.currentData.dataTable.label][0],\r\n        cssClass = '.highlight-class-' + jvCharts.getViewForValue(label),\r\n        node = chart.svg.selectAll(cssClass);\r\n\r\n    chart.svg.select('.radial-container').selectAll('path')\r\n        .attr('stroke', 0)\r\n        .attr('stroke-width', 0);\r\n    //highlight necessary slices\r\n    node\r\n        .attr('stroke', chart._vars.highlightBorderColor)\r\n        .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n}\r\n\r\n/**setRadialLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend text\r\n */\r\nfunction setRadialLegendData(data) {\r\n    var legendArray = [];\r\n    for (let chartEle of data.chartData) {\r\n        if (legendArray.indexOf(chartEle[data.dataTable.label]) === -1) {\r\n            legendArray.push((chartEle[data.dataTable.label]));\r\n        }\r\n    }\r\n    return legendArray;\r\n}\r\n\r\n/**generateRadial\r\n *\r\n * paints the radil bar chart on the chart\r\n * @params radialData\r\n */\r\n\r\nfunction generateRadial() {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        colors = chart._vars.color,\r\n        container = chart.config.container,\r\n        legendData = chart.data.legendData,\r\n        radialData = chart.data.chartData,\r\n        tickNumber = 3,\r\n        barHeight = container.height / 2 - 40,\r\n        width = container.width,\r\n        height = container.height,\r\n        r = Math.min(height / 2, width / 3),\r\n        data = [],\r\n        radialDataNew,\r\n        dataHeaders,\r\n        legendElementToggleArray = [],\r\n        radialDataFiltered,\r\n        obj,\r\n        vis,\r\n        extent,\r\n        formatNumber,\r\n        barScale,\r\n        keys,\r\n        numBars,\r\n        x,\r\n        xAxis,\r\n        arc,\r\n        segments,\r\n        axisGroup;\r\n\r\n    for (let i = 0, len = radialData.length; i < len; i++) {\r\n        obj = {};\r\n        for (let j in chart.data.dataTable) {\r\n            obj[j] = radialData[i][chart.data.dataTable[j]];\r\n        }\r\n        data[i] = obj;\r\n    }\r\n\r\n    radialDataNew = JSON.parse(JSON.stringify(data));//copy of pie data\r\n\r\n\r\n    if (!chart._vars.legendHeaders) {\r\n        chart._vars.legendHeaders = legendData;\r\n    }\r\n\r\n    dataHeaders = chart._vars.legendHeaders;\r\n    legendElementToggleArray = jvCharts.getLegendElementToggleArray(dataHeaders, legendData);\r\n    radialDataFiltered = [];\r\n\r\n    if (legendElementToggleArray) {\r\n        for (let j = 0; j < radialDataNew.length; j++) {\r\n            for (let i = 0; i < legendElementToggleArray.length; i++) {\r\n                if (legendElementToggleArray[i].element === radialDataNew[j].label && legendElementToggleArray[i].toggle === false) {\r\n                    radialDataNew[j].value = -1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    for (let j = 0; j < radialDataNew.length; j++) {\r\n        if (radialDataNew[j].value !== -1) {\r\n            radialDataFiltered.push(radialDataNew[j]);\r\n        }\r\n    }\r\n\r\n    //Remove existing bars from page\r\n    svg.selectAll('g.radial-container').remove();\r\n\r\n\r\n    vis = svg\r\n        .append('g')\r\n        .attr('class', 'radial-container')\r\n        .attr('height', height)\r\n        .attr('transform', `translate( ${width / 2} , ${r} )`);\r\n\r\n    extent = d3.extent(radialDataFiltered, d => d.value);\r\n\r\n    //commas and 0 decimals\r\n    formatNumber = d3.format(',.0f');\r\n    if (extent[1] >= 1000000) {\r\n        //millions\r\n        let p = d3.precisionPrefix(1e5, 1.3e6);\r\n        formatNumber = d3.formatPrefix('.' + p, 1.3e6);\r\n    } else if (extent[1] <= 100) {\r\n        //2 decimals\r\n        formatNumber = d3.format(',.2f');\r\n    }\r\n\r\n\r\n    if (extent[0] !== 0) {\r\n        extent[0] = 0;\r\n    }\r\n    barScale = d3.scaleLinear()\r\n        .domain(extent)\r\n        .range([0, barHeight]);\r\n\r\n    keys = radialDataFiltered.map(d => d.label);\r\n    numBars = keys.length;\r\n\r\n    x = d3.scaleLinear()\r\n        .domain(extent)\r\n        .range([0, -barHeight]);\r\n\r\n    //create xAxis drawing function\r\n    xAxis = d3.axisLeft()\r\n        .scale(x)\r\n        .ticks(tickNumber)\r\n        .tickFormat(formatNumber);\r\n\r\n    vis.selectAll('circle')\r\n        .data(x.ticks(3))\r\n        .enter().append('circle')\r\n        .attr('r', d => barScale(d))\r\n        .style('fill', 'none')\r\n        .style('stroke', 'black')\r\n        .style('stroke-dasharray', '2,2')\r\n        .style('stroke-width', '.5px');\r\n\r\n    arc = d3.arc()\r\n        .startAngle((d, i) => (i * 2 * Math.PI) / numBars)\r\n        .endAngle((d, i) => ((i + 1) * 2 * Math.PI) / numBars)\r\n        .innerRadius(0);\r\n\r\n    segments = vis.selectAll('path')\r\n        .data(radialDataFiltered)\r\n        .enter().append('g')\r\n        .append('path')\r\n        .attr('class', (d) => {\r\n            var label = jvCharts.getViewForValue(d.label);\r\n            return 'radial-data-' + label + ' highlight-class-' + label;\r\n        })\r\n        .each(function (d) {\r\n            d.outerRadius = 0;\r\n        })\r\n        .style('fill', (d, i) => jvCharts.getColors(colors, i, d.label))\r\n        .attr('d', arc)\r\n        .on('mouseover', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                //Get tip data\r\n                var tipData = chart.setTipData(d, i);\r\n                //Draw tip line\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function (d) {\r\n            if (chart.showToolTip) {\r\n                chart.tip.hideTip();\r\n                svg.selectAll('line.tip-line').remove();\r\n            }\r\n        });\r\n\r\n    segments\r\n        .transition()\r\n        .duration(800)\r\n        .ease(d3.easeElastic)\r\n        .delay((d, i) => 750 - 50 * i)\r\n        .attrTween('d', (d, index) => {\r\n            var i = d3.interpolate(d.outerRadius, barScale(+d.value));\r\n            return t => {\r\n                d.outerRadius = i(t);\r\n                return arc(d, index);\r\n            };\r\n        });\r\n\r\n    vis.append('circle')\r\n        .attr('r', barHeight)\r\n        .classed('outer', true)\r\n        .style('fill', 'none')\r\n        .style('stroke', 'black')\r\n        .style('stroke-width', '1.5px');\r\n\r\n    vis.selectAll('line')\r\n        .data(keys)\r\n        .enter().append('g')\r\n        .attr('class', 'label')\r\n        .append('line')\r\n        .attr('y2', -barHeight - 20)\r\n        .style('stroke', 'black')\r\n        .style('stroke-width', '.5px')\r\n        .attr('transform', (d, i) => `rotate( ${i * 360 / numBars} )`);\r\n\r\n    axisGroup = vis.append('g')\r\n        .attr('class', 'xAxis')\r\n        .style('pointer-events', 'none')\r\n        .call(xAxis);\r\n\r\n    axisGroup.selectAll('text')\r\n        .attr('fill', 'black')//Customize the color of axis labels\r\n        .attr('class', 'yAxisLabels editable editable-yAxis editable-text editable-num')\r\n        .attr('transform', d => {\r\n            if (d === xAxis.scale().ticks(tickNumber)[tickNumber]) {\r\n                return 'translate(0, 10)';\r\n            }\r\n            return 'translate(0,0)';\r\n        })\r\n        .attr('font-size', chart._vars.fontSize)\r\n        .append('svg:title');\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvRadial.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.sankey = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData\r\n};\r\n\r\njvCharts.prototype.generateSankey = generateSankey;\r\n\r\n/************************************************ Sankey functions ******************************************************/\r\n/**\r\n *\r\n * @param data\r\n * @param dataTable\r\n * @param colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    var sankeyData = {},\r\n        data = chart.data.chartData,\r\n        dataTable = chart.data.dataTable;\r\n\r\n    sankeyData.links = [];\r\n    sankeyData.nodes = [];\r\n\r\n    //Iterate through sources and targets to make a node list\r\n    var nodeList = [];\r\n    var nodeGroup = 1;\r\n    for (var item in dataTable) {\r\n        var nodeListForLabel = [];\r\n        if (item === 'value') { continue; }\r\n        for (var i = 0; i < data.length; i++) {\r\n            var potentialNode = data[i][dataTable[item]] + '-' + nodeGroup;\r\n            var addToList = true;\r\n            for (var j = 0; j < nodeListForLabel.length; j++) {\r\n                if (potentialNode === nodeListForLabel[j]) {\r\n                    addToList = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (addToList) {\r\n                nodeListForLabel.push(potentialNode);\r\n            }\r\n        }\r\n        nodeGroup++;\r\n        nodeList = nodeList.concat(nodeListForLabel);\r\n    }\r\n    //Create nodes object\r\n    for (var i = 0; i < nodeList.length; i++) {\r\n        sankeyData.nodes.push({\r\n            'name': nodeList[i]\r\n        });\r\n    }\r\n\r\n    //See how many sets of links you need\r\n    var linkGroups = 0;\r\n\r\n    for (let item in dataTable) {\r\n        if (item.indexOf('label') !== -1) {\r\n            linkGroups++;\r\n        }\r\n    }\r\n\r\n    let source,\r\n        target,\r\n        value;\r\n\r\n    for (let k in dataTable) {\r\n        if (k.indexOf('value') > -1) {\r\n            value = dataTable[k];\r\n        } else if (!source) {\r\n            source = dataTable[k];\r\n        } else {\r\n            target = dataTable[k];\r\n        }\r\n    }\r\n\r\n    for (let i = 1; i < linkGroups; i++) {\r\n        var linkGroup = [];\r\n        linkGroup = data.map(function (x) {\r\n            return {\r\n                'source': x[source] + '-' + i,\r\n                'target': x[target] + '-' + (i + 1),\r\n                'value': x[value]\r\n            };\r\n        });\r\n\r\n        sankeyData.links = sankeyData.links.concat(linkGroup);\r\n    }\r\n\r\n    var nodeMap = {};\r\n    for (i = 0; i < sankeyData.nodes.length; i++) {\r\n        sankeyData.nodes[i].node = i;\r\n        nodeMap[sankeyData.nodes[i].name] = i;\r\n    }\r\n    sankeyData.links = sankeyData.links.map(function (x) {\r\n        return {\r\n            source: nodeMap[x.source],\r\n            target: nodeMap[x.target],\r\n            value: x.value\r\n        };\r\n    });\r\n\r\n    //Group common sankey links together and add the values\r\n    var aggregateSankeyLinks = [];\r\n    for (let i = 0; i < sankeyData.links.length; i++) {\r\n        var currentLink = {};\r\n        currentLink.source = sankeyData.links[i].source;\r\n        currentLink.target = sankeyData.links[i].target;\r\n        currentLink.value = sankeyData.links[i].value;\r\n\r\n        //Make sure that only unique links are pushed to the aggregated array\r\n        let addToAggregate = true;\r\n        for (let k = 0; k < aggregateSankeyLinks.length; k++) {\r\n            if (aggregateSankeyLinks[k].source === currentLink.source && aggregateSankeyLinks[k].target === currentLink.target) {\r\n                addToAggregate = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!addToAggregate) {\r\n            continue;\r\n        }\r\n\r\n        //Sum the value of identical links\r\n        for (let j = 0; j < sankeyData.links.length; j++) {\r\n            if (sankeyData.links[i].source === sankeyData.links[j].source && sankeyData.links[i].target === sankeyData.links[j].target) {\r\n                currentLink.value = currentLink.value + sankeyData.links[j].value;\r\n            }\r\n        }\r\n\r\n        aggregateSankeyLinks.push(currentLink);\r\n    }\r\n\r\n    sankeyData.links = aggregateSankeyLinks;\r\n\r\n    chart.data.chartData = sankeyData;\r\n    chart.data.color = d3.scaleOrdinal(d3.schemeCategory20);\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this;\r\n    var data = chart.data.chartData;\r\n\r\n    //generate SVG\r\n    chart.generateSVG(null);\r\n    chart.generateSankey(data);\r\n}\r\n\r\nfunction getEventData() {\r\n    return {};\r\n}\r\n\r\n/**\r\n * Generates a sankey chart with the given data\r\n * @param sankeyData\r\n */\r\nfunction generateSankey(sankeyData) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        color = chart._vars.color;\r\n\r\n    var width = chart.config.container.width;\r\n    var height = chart.config.container.height;\r\n\r\n    var formatNumber = d3.format(',.0f'),    //zero decimal places\r\n        format = function (d) { return formatNumber(d) + ' ' + 'Widgets'; },\r\n        color = d3.scaleOrdinal(d3.schemeCategory20);\r\n\r\n    var sankey = d3.sankey()\r\n        .nodeWidth(10)\r\n        .nodePadding(15)\r\n        .size([width, height]);\r\n\r\n    var path = sankey.link();\r\n\r\n    ////Adding zoom v4 behavior to sankey\r\n    d3.selectAll('svg')\r\n        .call(d3.zoom()\r\n            .scaleExtent([0.1, 10])\r\n            .on('zoom', zoom));//zoom event listener\r\n\r\n    sankey\r\n        .nodes(sankeyData.nodes)\r\n        .links(sankeyData.links)\r\n        .layout(32);\r\n\r\n    var link = svg.append('g').selectAll('.sankey-link')\r\n        .data(sankeyData.links)\r\n        .enter()\r\n        .append('path')\r\n        .filter(function (d) { return d.value > 0; })\r\n        .attr('class', 'sankey-link')\r\n        .attr('d', path)\r\n        .style('stroke-width', function (d) {\r\n            return Math.max(1, d.dy);\r\n        })\r\n        .sort(function (a, b) {\r\n            return b.dy - a.dy;\r\n        })\r\n        .on('mouseover', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                var tipData = chart.setTipData(d, i);\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                chart.tip.hideTip();\r\n            }\r\n        });\r\n\r\n    var node = svg.append('g').selectAll('.node')\r\n        .data(sankeyData.nodes)\r\n        .enter()\r\n        .append('g')\r\n        .filter(function (d) { return d.value > 0; })\r\n        .attr('class', 'node')\r\n        .attr('transform', function (d) {\r\n            return 'translate(' + d.x + ', ' + d.y + ')';\r\n        })\r\n        .call(d3.drag()\r\n            .subject(function (d) {\r\n                return d;\r\n            })\r\n            .on('start', function (d) {\r\n                d3.event.sourceEvent.stopPropagation();\r\n                this.parentNode.appendChild(this);\r\n            })\r\n            .on('drag', dragmove));\r\n\r\n    node.append('rect')\r\n        .attr('height', function (d) {\r\n            //return d.dy;\r\n            return Math.abs(d.dy);\r\n            //return Math.max(d.dy, 2);\r\n        })\r\n        .attr('width', sankey.nodeWidth())\r\n        .style('fill', function (d) {\r\n            return d.color = color(d.name);\r\n        })\r\n        .style('stroke', function (d) {\r\n            return d3.rgb(d.color).darker(2);\r\n        });\r\n\r\n    node.append('text')\r\n        .attr('x', -6)\r\n        .attr('y', function (d) {\r\n            return d.dy / 2;\r\n        })\r\n        .attr('dy', '.35em')\r\n        .attr('text-anchor', 'end')\r\n        .attr('transform', null)\r\n        .attr('transform', null)\r\n        .text(function (d) {\r\n            //Remove the the nodeGroup tag and hyphen from the end of the label\r\n            return d.name.slice(0, -2);\r\n        })\r\n        .filter(function (d) {\r\n            return d.x < width / 2;\r\n        })\r\n        .attr('x', 6 + sankey.nodeWidth())\r\n        .attr('text-anchor', 'start');\r\n\r\n    function dragmove(d) {\r\n        d3.select(this).attr('transform',\r\n            'translate(' + (\r\n                d.x = Math.max(0, Math.min(width - d.dx, d3.event.x))\r\n            ) + ',' + (\r\n                d.y = Math.max(0, Math.min(height - d.dy, d3.event.y))\r\n            ) + ')');\r\n        sankey.relayout();\r\n        link.attr('d', path);\r\n    }\r\n\r\n    function zoom() { //Implementing the v4 zooming feature\r\n        svg.attr('transform', d3.event.transform);\r\n    }\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvSankey.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.singleaxis = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData,\r\n    highlightFromEventData: highlightFromEventData\r\n};\r\n\r\njvCharts.prototype.getSingleAxisData = getSingleAxisData;\r\njvCharts.prototype.getSingleAxisZ = getSingleAxisZ;\r\njvCharts.prototype.generatePoints = generatePoints;\r\n\r\nfunction isEmpty(value) {\r\n    return typeof value === 'undefined' || value === null;\r\n}\r\n\r\n/************************************************ Single Axis Cluster functions ******************************************************/\r\n\r\nfunction setData() {\r\n    var chart = this;\r\n    chart.currentData = { chartData: chart.data.chartData, dataTable: chart.data.dataTable };\r\n\r\n    //Set the legend Data to the label from dataTable Keys\r\n    chart.currentData.legendData = [chart.currentData.dataTable.x];\r\n    chart.currentData.xAxisData = chart.getSingleAxisData(chart.currentData.chartData, chart.currentData.dataTable);\r\n\r\n    if (chart.currentData.dataTable.hasOwnProperty('size')) {\r\n        chart.currentData.zAxisData = chart.getSingleAxisZ(chart.currentData.chartData);\r\n    }\r\n\r\n    chart.currentData.color = 'red';//chart.setChartColors (chart._vars.color, chart.data.legendData, colors);\r\n}\r\n\r\nfunction getEventData(event) {\r\n    var chart = this;\r\n    if (event.target.classList.value.split('cell-')[1]) {\r\n        return {\r\n            data: {\r\n                [chart.currentData.dataTable.label]: [jvCharts.getRawForValue(event.target.classList.value.split('cell-')[1])]\r\n            },\r\n            node: event.target\r\n        };\r\n    } else if (event.target.classList.value.indexOf('editable-svg') > -1) {\r\n        return {\r\n            data: {}\r\n        };\r\n    }\r\n    return {\r\n        data: false\r\n    };\r\n}\r\n\r\nfunction highlightFromEventData(event) {\r\n    let chart = this,\r\n        label = event.data[chart.currentData.dataTable.label][0],\r\n        cssClass = '.highlight-class-' + jvCharts.getViewForValue(label),\r\n        node = chart.svg.selectAll(cssClass);\r\n\r\n    chart.svg.select('.singleaxis-container').selectAll('circle')\r\n        .attr('stroke', 0)\r\n        .attr('stroke-width', 0);\r\n    //highlight necessary circles\r\n    node\r\n        .attr('stroke', chart._vars.highlightBorderColor)\r\n        .attr('stroke-width', chart._vars.highlightBorderWidth);\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this,\r\n        splitData = {}, //If there is a split, the data that has been split\r\n        numVizzes, //If there is a split, the number of single axis clusters that are created\r\n        customSize = {}, //If there is a split, the svg needs to be a custom predefined height\r\n        margin = {\r\n            top: 50,\r\n            left: 100,\r\n            right: 100,\r\n            bottom: 50\r\n        };\r\n\r\n    //If there is a split on the viz, run through this logic\r\n    if (chart.data.dataTable.facet) {\r\n        let splitDataKeys = [],\r\n            splitOptionName = chart.data.dataTable.facet.replace(/_/g, ' ');\r\n\r\n        //Check to see how many vizzes need to be created because of the split\r\n        for (let ele of chart.currentData.chartData) {\r\n            let addToKeys = true;\r\n            for (let key of splitDataKeys) {\r\n                if (ele[splitOptionName] === key) {\r\n                    addToKeys = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (addToKeys) {\r\n                splitDataKeys.push(ele[splitOptionName]);\r\n            }\r\n        }\r\n\r\n        //Create Object with keys and assign each element of the data array to corresponding object\r\n        for (let key of splitDataKeys) {\r\n            splitData[key] = [];//Assign empty array to each location\r\n        }\r\n\r\n        //Assign Data elements to appropriate place in splitData object\r\n        for (let ele of chart.currentData.chartData) {\r\n            splitData[ele[splitOptionName]].push(ele);\r\n        }\r\n\r\n        numVizzes = splitDataKeys.length;\r\n        customSize.height = (numVizzes) * 300;\r\n\r\n        chart.generateSVG(chart.currentData.legendData, margin, customSize);\r\n        chart.generateXAxis(chart.currentData.xAxisData);\r\n        chart.drawGridlines(chart.currentData.xAxisData);\r\n\r\n        for (let i = 0; i < numVizzes; i++) {\r\n            chart.generatePoints(splitData[splitDataKeys[i]], i);\r\n        }\r\n    } else { //When there isn't a split, the base case\r\n        chart.generateSVG(chart.currentData.legendData, margin, customSize);\r\n        chart.generateXAxis(chart.currentData.xAxisData);\r\n        chart.drawGridlines(chart.currentData.xAxisData);\r\n        chart.generatePoints(chart.currentData.chartData);\r\n    }\r\n\r\n    if (typeof chart.currentData.xAxisScale.ticks === 'function') {\r\n        chart.formatXAxisLabels(chart.currentData.xAxisScale.ticks().length);\r\n    } else {\r\n        chart.formatXAxisLabels(chart.currentData.xAxisScale.domain().length);\r\n    }\r\n}\r\n\r\nfunction getSingleAxisZ(data) {\r\n    var chart = this,\r\n        size = chart.currentData.dataTable.size,\r\n        min = data[0][size],\r\n        max = data[0][size];\r\n    //Find min and max of the data\r\n    for (let i = 0; i < data.length; i++) {\r\n        let num = data[i][size];\r\n        if (num > max) {\r\n            max = num;\r\n        } else if (num < min) {\r\n            min = num;\r\n        }\r\n    }\r\n\r\n    return {\r\n        'min': min,\r\n        'max': max,\r\n        'label': size\r\n    };\r\n}\r\n\r\nfunction generatePoints(data, yLevel) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        width = chart.config.container.width,\r\n        height = chart.config.container.height,\r\n        dataTable = chart.currentData.dataTable,\r\n        xAxisData = chart.currentData.xAxisData,\r\n        zAxisData = chart.currentData.zAxisData,\r\n        container = chart.config.container,\r\n        pointColor = '#609cdb',\r\n        coloredPoint = '#e88a17',\r\n        x = jvCharts.getAxisScale('x', xAxisData, chart.config.container, chart._vars),\r\n        currentAxisHeight,\r\n        simulation,\r\n        cell;\r\n\r\n    const SPLIT_CLUSTER_HEIGHT = 300,\r\n        TRANSLATE_SPLIT_CLUSTER = 150;\r\n\r\n    //If there's a split, account for the multiple axes\r\n    if (!isEmpty(yLevel)) {\r\n        currentAxisHeight = (yLevel * SPLIT_CLUSTER_HEIGHT) + TRANSLATE_SPLIT_CLUSTER;//Each height is 100px\r\n    } else {\r\n        currentAxisHeight = height / 2;\r\n    }\r\n\r\n    if (!chart._vars.NODE_MIN_SIZE) {\r\n        chart._vars.NODE_MIN_SIZE = 4.5;\r\n    }\r\n    if (!chart._vars.NODE_MAX_SIZE) {\r\n        chart._vars.NODE_MAX_SIZE = 25;\r\n    }\r\n\r\n    chart.chartDiv.select('.container').attr('class', 'singleaxis-container');\r\n\r\n    //Add a path line through the height of the axis\r\n    if (!isEmpty(yLevel)) {\r\n        svg.append('line')\r\n            .attr('x1', 0)\r\n            .attr('x2', container.width)\r\n            .attr('y1', currentAxisHeight)\r\n            .attr('y2', currentAxisHeight)\r\n            .attr('stroke', 'white')\r\n            .attr('stroke-width', '20px')\r\n            .attr('transform', 'translate(0, ' + TRANSLATE_SPLIT_CLUSTER + ')');\r\n\r\n        svg.append('text')\r\n            .datum(data)\r\n            .attr('x', 0)\r\n            .attr('y', currentAxisHeight)\r\n            .text((d) => {\r\n                if (chart.data.dataTable.facet) {\r\n                    d[0][chart.data.dataTable.facet.replace(/_/g, ' ')];\r\n                }\r\n            })\r\n            .attr('transform', 'translate(-85, 0)');\r\n    }\r\n\r\n\r\n    simulation = d3.forceSimulation(data)\r\n        .alphaDecay(0.05)\r\n        .force('x', d3.forceX(d => x(d[dataTable.x]))\r\n            .strength(1))\r\n        .force('y', d3.forceY(currentAxisHeight))\r\n        .force('collide', d3.forceCollide(d => {\r\n            let norm,\r\n                val = chart._vars.NODE_MIN_SIZE;\r\n            //Set collision radius equal to the radius of the circle\r\n            if (dataTable.hasOwnProperty('size')) {\r\n                norm = (d[dataTable.size] - zAxisData.min) / (zAxisData.max - zAxisData.min);\r\n                val = (chart._vars.NODE_MAX_SIZE - chart._vars.NODE_MIN_SIZE) * norm + chart._vars.NODE_MIN_SIZE;\r\n            }\r\n            return val;\r\n        }).strength(1))\r\n        .force('charge', d3.forceManyBody().strength(-6))\r\n        .stop();\r\n\r\n    for (let i = 0; i < 120; ++i) simulation.tick();\r\n\r\n    cell = svg.append('g')\r\n        .attr('class', 'cells')\r\n        .selectAll('g')\r\n        .data(d3.voronoi()\r\n            .extent([[0, 0], [width, height]])\r\n            .x(d => d.x)\r\n            .y(d => d.y)\r\n            .polygons(data)\r\n        )\r\n        .enter()\r\n        .append('g');\r\n\r\n    cell\r\n        .append('circle')\r\n        .attr('class', d => {\r\n            return 'cell-' + jvCharts.getViewForValue(d.data[chart.currentData.dataTable.label]) + ' highlight-class-' + jvCharts.getViewForValue(d.data[chart.currentData.dataTable.label]);\r\n        })\r\n        .attr('r', d => {\r\n            let val = chart._vars.NODE_MIN_SIZE;//Default node size of 15\r\n            if (dataTable.hasOwnProperty('size') && !isEmpty(d) && d.hasOwnProperty('data')) {\r\n                var norm = (d.data[dataTable.size] - zAxisData.min) / (zAxisData.max - zAxisData.min);\r\n                if (!isNaN(norm)) {\r\n                    val = (chart._vars.NODE_MAX_SIZE - chart._vars.NODE_MIN_SIZE) * norm + chart._vars.NODE_MIN_SIZE;\r\n                } else {//If there is only 1 node on the chart\r\n                    val = chart._vars.NODE_MIN_SIZE;\r\n                }\r\n            } else if (isEmpty(d)) {\r\n                val = 0;//Don't display undefined nodes\r\n            }\r\n            return val;\r\n        })\r\n        .attr('cx', d => isEmpty(d) ? 0 : d.data.x)\r\n        .attr('cy', d => isEmpty(d) ? 0 : d.data.y)\r\n        .attr('fill', d => {\r\n            if (!isEmpty(d) && d.data[chart._vars.colorDataCategory] === chart._vars.colorDataInstance) {\r\n                return coloredPoint;\r\n            }\r\n            return pointColor;\r\n        })\r\n        .attr('opacity', 0.8)\r\n        .attr('stroke', 'black')\r\n        .attr('stroke-width', 1)\r\n        .on('mouseover', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                var tipData = chart.setTipData(d, i);\r\n                chart.tip.generateSimpleTip(tipData, dataTable);\r\n                d3.select(this)\r\n                    .attr('fill', chart._vars.singleAxisFillHoverColor);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            if (chart.showToolTip) {\r\n                chart.tip.hideTip();\r\n            }\r\n            d3.select(this)\r\n                .attr('fill', d => {\r\n                    if (!isEmpty(d) && d.data[chart._vars.colorDataCategory] === chart._vars.colorDataInstance) {\r\n                        return coloredPoint;\r\n                    }\r\n                    return pointColor;\r\n                });\r\n        });\r\n}\r\n\r\nfunction getSingleAxisData(data, dataTable) {\r\n    var chart = this,\r\n        label,\r\n        dataType,\r\n        min,\r\n        max,\r\n        values = [];\r\n\r\n    if (dataTable) {\r\n        if (dataTable.hasOwnProperty('x')) {\r\n            label = dataTable.x;\r\n        }\r\n    }\r\n\r\n    dataType = 'NUMBER';\r\n\r\n    for (let ele of data) {\r\n        values.push(ele[dataTable.x]);\r\n    }\r\n\r\n    min = Math.min.apply(null, values);\r\n    max = Math.max.apply(null, values);\r\n\r\n    //Add a 10% buffer to both sides\r\n    min = Math.floor(min - ((max - min) * 0.10));\r\n    max = Math.ceil(max + ((max - min) * 0.10));\r\n\r\n    //For axis min/max widget\r\n    if (chart._vars.hasOwnProperty('xMin') && chart._vars.xMin !== 'none') {\r\n        min = chart.options.xMin;\r\n    }\r\n    if (chart._vars.hasOwnProperty('xMax') && chart._vars.xMax !== 'none') {\r\n        max = chart._vars.xMax;\r\n    }\r\n\r\n    return {\r\n        'label': label,\r\n        'values': values,\r\n        'dataType': dataType,\r\n        'min': min,\r\n        'max': max\r\n    };\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvSingleAxis.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.sunburst = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData\r\n};\r\n\r\njvCharts.prototype.generateSunburst = generateSunburst;\r\n\r\n/************************************************ Sunburst functions ******************************************************/\r\n\r\n/**setSunburstChartData\r\n *  gets sunburst data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    if (!chart.data.chartData.hasOwnProperty('children')) {\r\n        chart.data.chartData = jvCharts.convertTableToTree(chart.data.chartData, chart.data.dataTable, true);\r\n    }\r\n\r\n    chart.data.color = chart.colors;\r\n}\r\n\r\nfunction getEventData() {\r\n    return {};\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this,\r\n        sunburstMargins = {\r\n            top: 15,\r\n            right: 15,\r\n            bottom: 15,\r\n            left: 15\r\n        };\r\n\r\n    chart._vars.color = chart.data.color;\r\n    chart.currentData = chart.data;\r\n\r\n    //Generate SVG-legend data is used to determine the size of the bottom margin (set to null for no legend)\r\n    chart.generateSVG(null, sunburstMargins);\r\n    //chart.generateLegend(chart.currentData.legendData, 'generateSunburst');\r\n    chart.generateSunburst();\r\n}\r\n\r\n/**generateSunburst\r\n *\r\n * paints the sunburst on the chart\r\n * @params sunburstData\r\n */\r\nfunction generateSunburst() {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        vis,\r\n        text,\r\n        container = chart.config.container,\r\n        width = container.width,\r\n        height = container.height,\r\n        radius = (Math.min(width, height) / 2) - 10,\r\n        x = d3.scaleLinear()\r\n            .range([0, 2 * Math.PI]),\r\n        y = d3.scaleSqrt()\r\n            .range([0, radius]),\r\n        color = d3.scaleOrdinal()\r\n            .range(chart.data.color\r\n                .map(c => {\r\n                    c = d3.rgb(c);\r\n                    c.opacity = 1;\r\n                    return c;\r\n                })),\r\n        partition = d3.partition(),\r\n        arc = d3.arc()\r\n            .startAngle(d => Math.max(0, Math.min(2 * Math.PI, x(d.x0))))\r\n            .endAngle(d => Math.max(0, Math.min(2 * Math.PI, x(d.x1))))\r\n            .innerRadius(d => Math.max(0, y(d.y0)))\r\n            .outerRadius(d => Math.max(0, y(d.y1))),\r\n\r\n        //assigns the data to a hierarchy using parent-child relationships\r\n        root = d3.hierarchy(chart.currentData.chartData, d => d.children);\r\n\r\n    root.sum(d => d.value);\r\n\r\n    vis = svg.append('g')\r\n        .attr('class', 'sunburst')\r\n        .attr('width', width)\r\n        .attr('height', height)\r\n        .attr('transform', 'translate(' + width / 2 + ',' + (height / 2) + ')');\r\n\r\n\r\n    vis.selectAll('path')\r\n        .data(partition(root).descendants())\r\n        .enter().append('g').attr('class', 'node');\r\n\r\n    vis.selectAll('.node')\r\n        .append('path')\r\n        .attr('stroke', 'white')\r\n        .attr('d', arc)\r\n        .style('fill', d => {\r\n            if (d.data.name === 'root') {\r\n                d.color = chart._vars.backgroundColor;\r\n                return chart._vars.backgroundColor;\r\n            }\r\n            d.color = color(d.data.name);\r\n            return color(d.data.name);\r\n        })\r\n        .on('mouseover', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                var tipData = chart.setTipData(d, i);\r\n\r\n                //Draw tip line\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('click', click)\r\n        .on('mouseout', function () {\r\n            chart.tip.hideTip();\r\n        });\r\n\r\n    if (chart._vars.displayValues) {\r\n        text = vis.selectAll('.node')\r\n            .append('text')\r\n            .attr('transform', d => `rotate(${computeTextRotation(d)})`)\r\n            .attr('x', d => y(d.y0))\r\n            .attr('dx', '6') //margin\r\n            .attr('dy', '.35em') //vertical-align\r\n            .text(d => {\r\n                if (Number(d.data.value) > 0) {\r\n                    return d.data.name === 'root' ? '' : d.data.name;\r\n                }\r\n                return '';\r\n            });\r\n    }\r\n\r\n\r\n    function click(d) {\r\n        //fade out all text elements\r\n        if (chart._vars.displayValues) {\r\n            text.transition().attr('opacity', 0);\r\n        }\r\n\r\n        vis.transition()\r\n            .duration(750)\r\n            .tween('scale', () => {\r\n                var xd = d3.interpolate(x.domain(), [d.x0, d.x1]),\r\n                    yd = d3.interpolate(y.domain(), [d.y0, 1]),\r\n                    yr = d3.interpolate(y.range(), [d.y0 ? 20 : 0, radius]);\r\n\r\n                return t => { x.domain(xd(t)); y.domain(yd(t)).range(yr(t)); };\r\n            })\r\n            .selectAll('path')\r\n            .attrTween('d', ele => () => arc(ele))\r\n            .on('end', function (e, i) {\r\n                if (chart._vars.displayValues) {\r\n                    //check if the animated element's data e lies within the visible angle span given in d\r\n                    if (e.x0 > d.x0 && e.x0 < d.x1) {\r\n                        //get a selection of the associated text element\r\n                        var arcText = d3.select(this.parentNode).select('text');\r\n                        //fade in the text element and recalculate positions\r\n                        arcText.transition().duration(750)\r\n                            .attr('opacity', 1)\r\n                            .attr('class', 'visible')\r\n                            .attr('transform', () => `rotate(${computeTextRotation(e)})`)\r\n                            .attr('x', ele => y(ele.y0))\r\n                            .text(ele => ele.data.name === 'root' ? '' : ele.data.name);\r\n                    }\r\n                }\r\n            });\r\n    }\r\n\r\n    function computeTextRotation(d) {\r\n        return (x((d.x0 + d.x1) / 2) - Math.PI / 2) / Math.PI * 180;\r\n    }\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvSunburst.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.treemap = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData\r\n};\r\n\r\njvCharts.prototype.generateTreeMap = generateTreeMap;\r\n/************************************************ TreeMap functions ******************************************************/\r\n\r\n/**setTreeMapData\r\n *  gets treemap data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    if (!chart.data.chartData.hasOwnProperty('children')) {\r\n        chart.data.chartData = jvCharts.convertTableToTreemap(chart.data.chartData, chart.data.dataTable);\r\n    }\r\n    chart.data.legendData = setTreeMapLegendData(chart.data);\r\n    //define color object for chartData\r\n    chart.data.color = jvCharts.setChartColors(chart._vars.color, chart.data.legendData, chart.colors);\r\n}\r\n\r\nfunction getEventData() {\r\n    return {};\r\n}\r\n\r\n/**setTreeMapLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend text\r\n */\r\nfunction setTreeMapLegendData(data) {\r\n    var legendArray = [],\r\n        series = data.dataTable.series;\r\n    for (let childEle of data.chartData.children) {\r\n        if (legendArray.indexOf(childEle[series]) === -1) {\r\n            legendArray.push((childEle[series]));\r\n        }\r\n    }\r\n    return legendArray;\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this,\r\n        treeMapMargins = {\r\n            top: 45,\r\n            right: 50,\r\n            left: 50,\r\n            bottom: 130\r\n        };\r\n    chart._vars.color = chart.data.color;\r\n    chart.currentData = chart.data;\r\n\r\n    //Generate SVG-legend data is used to determine the size of the bottom margin (set to null for no legend)\r\n    chart.generateSVG(null, treeMapMargins);\r\n    chart.generateLegend(chart.currentData.legendData, 'generateTreeMap');\r\n    chart.generateTreeMap(chart.currentData);\r\n}\r\n\r\n/**generateTreeMap\r\n *\r\n * paints the treemap on the chart\r\n * @params treeMapData\r\n */\r\nfunction generateTreeMap(treeMapData) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        colors = treeMapData.color,\r\n        container = chart.config.container,\r\n        relationMap = chart.data.dataTable,\r\n        data = chart.currentData.chartData,\r\n        dataHeaders,\r\n        legendElementToggleArray,\r\n        treeMapDataFiltered,\r\n        root,\r\n        treemapFunc,\r\n        node,\r\n        textNode;\r\n\r\n    if (!chart._vars.legendHeaders) {\r\n        chart._vars.legendHeaders = chart.currentData.legendData;\r\n    }\r\n\r\n    dataHeaders = chart._vars.legendHeaders;\r\n    legendElementToggleArray = jvCharts.getLegendElementToggleArray(dataHeaders, chart.data.legendData);\r\n\r\n    if (legendElementToggleArray) {\r\n        for (let childEle of data.children) {\r\n            for (let legendEle of legendElementToggleArray) {\r\n                if (legendEle.element === childEle[relationMap.series] && legendEle.toggle === false) {\r\n                    childEle.show = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    treeMapDataFiltered = {\r\n        Parent: 'Top Level',\r\n        children: []\r\n    };\r\n\r\n    for (let childEle of data.children) {\r\n        if (childEle.show !== false) {\r\n            treeMapDataFiltered.children.push(childEle);\r\n        }\r\n    }\r\n\r\n    //assigns the data to a hierarchy using parent-child relationships\r\n    root = d3.hierarchy(treeMapDataFiltered, d => d.children);\r\n\r\n    treemapFunc = d3.treemap()\r\n        .size([container.width, container.height])\r\n        .padding(2);\r\n\r\n    treemapFunc(root\r\n        .sum(d => d[relationMap.size])\r\n        .sort((a, b) => b.height - a.height || b.value - a.value))\r\n        .descendants();\r\n\r\n    //Remove existing bars from page\r\n    svg.selectAll('g.treemap').remove();\r\n    svg.append('g').attr('class', 'treemap');\r\n\r\n    node = svg.select('.treemap')\r\n        .selectAll('g')\r\n        .data(root.leaves())\r\n        .enter().append('g')\r\n        .attr('transform', 'translate(0,0)');\r\n\r\n    node.append('rect')\r\n        .attr('x', d => d.x0 + 'px')\r\n        .attr('y', d => d.y0 + 'px')\r\n        .attr('width', d => d.x1 - d.x0 + 'px')\r\n        .attr('height', d => d.y1 - d.y0 + 'px')\r\n        .attr('fill', (d, i) => jvCharts.getColors(colors, i, d.data[relationMap.series]))\r\n        .attr('fill-opacity', 0.8)\r\n        .attr('stroke', chart._vars.white)\r\n        .attr('stroke-width', chart._vars.strokeWidth)\r\n        .on('mouseover', function (d, i) {\r\n            //Get tip data\r\n            let tipData = chart.setTipData(d.data, i);\r\n            //Draw tip line\r\n            chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n            chart.tip.d = d;\r\n            chart.tip.i = i;\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    let tipData = chart.setTipData(d, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            chart.tip.hideTip();\r\n        });\r\n\r\n    node.append('text')\r\n        .attr('x', d => d.x0 + 'px')\r\n        .attr('y', d => d.y0 + 'px')\r\n        .attr('width', d => d.x1 - d.x0 + 'px')\r\n        .attr('height', d => d.y1 - d.y0 + 'px')\r\n        .attr('transform', 'translate(3, 18)')\r\n        .text(d => {\r\n            if (d.dy !== 0 && !d.children) {\r\n                return d.data[relationMap.label];\r\n            }\r\n            return null;\r\n        });\r\n\r\n    /*Don't display text if text is wider than rect */\r\n    textNode = node.selectAll('text');\r\n    textNode.attr('style', function (d) {\r\n        let bbox = this.getBBox();\r\n        if (bbox.width >= (d.x1 - d.x0) - 5 || bbox.height >= (d.y1 - d.y0) - 5) {\r\n            return 'display:none';\r\n        }\r\n        return '';\r\n    });\r\n}\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvTreemap.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.cloud = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData\r\n};\r\n\r\njvCharts.prototype.generateCloud = generateCloud;\r\n\r\n/************************************************ Cloud functions ******************************************************/\r\n\r\n/**setCloudData\r\n *  gets cloud data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    //define color object for chartData\r\n    chart.data.color = chart.colors;\r\n}\r\n\r\nfunction getEventData() {\r\n    return {};\r\n}\r\n\r\n/**setCloudLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend text\r\n */\r\nfunction setCloudLegendData(data) {\r\n    var legendArray = [];\r\n    for (var i = 0; i < data.chartData.children.length; i++) {\r\n        if (legendArray.indexOf(data.chartData.children[i][data.dataTable.series]) == -1) {\r\n            legendArray.push((data.chartData.children[i][data.dataTable.series]));\r\n        }\r\n    }\r\n    return legendArray;\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this;\r\n    if (!chart.smallerFontRepaint) {\r\n        chart._vars.fontSizeMax = 80;\r\n        chart.currentData = chart.data;\r\n    } else {\r\n        chart.currentData = JSON.parse(JSON.stringify(chart.data));\r\n    }\r\n\r\n    chart._vars.color = chart.data.color;\r\n\r\n    var cloudMargins = {\r\n        top: 15,\r\n        right: 15,\r\n        left: 15,\r\n        bottom: 15\r\n    };\r\n\r\n    //Generate SVG-legend data is used to determine the size of the bottom margin (set to null for no legend)\r\n    chart.generateSVG(null, cloudMargins);\r\n    // chart.generateLegend(chart.currentData.legendData, 'generateCloud');\r\n    chart.generateCloud(chart.currentData);\r\n};\r\n\r\n/** generateCloud\r\n *\r\n * paints the cloud  on the chart\r\n * @params cloud Data\r\n */\r\nfunction generateCloud(cloudData) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        container = chart.config.container,\r\n        allFilterList = [],\r\n        relationMap = chart.data.dataTable,\r\n        width = container.width,\r\n        height = container.height,\r\n        margin = chart.config.margin,\r\n        min,\r\n        max;\r\n\r\n    var categories = d3.keys(d3.nest().key(function (d) {\r\n        if (!min && !max) {\r\n            min = d[relationMap.value];\r\n            max = d[relationMap.value];\r\n        } else {\r\n            if (d[relationMap.value] > max) {\r\n                max = d[relationMap.value];\r\n            }\r\n            if (d[relationMap.value] < min) {\r\n                min = d[relationMap.value];\r\n            }\r\n        }\r\n\r\n        return d[relationMap.value];\r\n    }).map(cloudData.chartData));\r\n\r\n    if (!chart._vars.fontSizeMax) {\r\n        chart._vars.fontSizeMax = 80;\r\n    }\r\n\r\n    var color = d3.scaleOrdinal()\r\n        .range(chart.data.color\r\n            .map(function (c) { c = d3.rgb(c); c.opacity = 0.8; return c; }));\r\n\r\n    var fontSize = d3.scalePow().exponent(5).domain([0, 1]).range([10, chart._vars.fontSizeMax]);\r\n    chart.smallerFontRepaint = false;\r\n    var layout = d3.layout.cloud()\r\n        .timeInterval(10)\r\n        .size([width, height])\r\n        .words(cloudData.chartData)\r\n        .rotate(function (d) { return 0; })\r\n        .font('Roboto')\r\n        .fontSize(function (d, i) {\r\n            return fontSize(max - min !== 0 ? (d[relationMap.value] - min) / (max - min) : 0);\r\n        })\r\n        .repaintWithSmallerFont(function() {\r\n            if (chart._vars.fontSizeMax > 10) {\r\n                chart._vars.fontSizeMax -= 5;\r\n                chart.smallerFontRepaint = true;\r\n                paint(chart);\r\n            }\r\n        })\r\n        .text(function (d) { return d[relationMap.label]; })\r\n        .spiral(\"archimedean\")\r\n        .on(\"end\", draw)\r\n        .start();\r\n\r\n    var wordcloud = svg.append(\"g\")\r\n        .attr('class', 'wordcloud')\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\r\n\r\n    function draw(words) {\r\n        if (chart.smallerFontRepaint) {\r\n            return;\r\n        }\r\n        wordcloud.selectAll(\"text\")\r\n            .data(cloudData.chartData)\r\n            .enter().append(\"text\")\r\n            .attr('class', 'word')\r\n            .style(\"font-size\", function (d) {\r\n                return d.size + \"px\";\r\n            })\r\n            .style(\"font-family\", function (d) {\r\n                return d.font;\r\n            })\r\n            .style(\"fill\", function (d) {\r\n                return color(d[relationMap.value]);\r\n            })\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .text(function (d) { return d.text; })\r\n            .on(\"mouseover\", function (d, i) {\r\n                //Get tip data\r\n                var tipData = chart.setTipData(d, i);\r\n                tipData.color = color(d[relationMap.value]);\r\n\r\n                //Draw tip\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d;\r\n                chart.tip.i = i;\r\n            })\r\n            .on('mousemove', function (d, i) {\r\n                if (chart.showToolTip) {\r\n                    if (chart.tip.d === d && chart.tip.i === i) {\r\n                        chart.tip.showTip(d3.event);\r\n                    } else {\r\n                        //Get tip data\r\n                        var tipData = chart.setTipData(d, i);\r\n                        //Draw tip line\r\n                        chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                    }\r\n                }\r\n            })\r\n            .on(\"mouseout\", function (d) {\r\n                chart.tip.hideTip();\r\n            })\r\n            .transition().duration(\"1000\")\r\n            .attr(\"transform\", function (d) { return \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\"; });\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvWordCloud.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\nvar box;\r\njvCharts.prototype.boxwhisker = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData\r\n};\r\n\r\njvCharts.prototype.generateBoxes = generateBoxes;\r\n\r\n/**setBoxData\r\n *  gets cloud data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    chart.data.xAxisData = chart.setAxisData('x', chart.data, chart._vars);\r\n    chart.data.yAxisData = chart.setAxisData('y', chart.data, chart._vars);\r\n}\r\n\r\n/** paintBoxChart\r\n *\r\n *  @desc The initial starting point for bar chart, begins the drawing process. Must already have the data stored in the chart object\r\n */\r\nfunction paint(transitionTime) {\r\n    var chart = this,\r\n        dataObj,\r\n        axisData;\r\n\r\n    if (transitionTime || transitionTime === 0) {\r\n        chart._vars.transitionTime = transitionTime;\r\n    } else if (!chart._vars.transitionTime) {\r\n        chart._vars.transitionTime = 800;\r\n    }\r\n\r\n    dataObj = getBoxDataFromOptions(chart);\r\n    axisData = chart.getBarDataFromOptions();\r\n    //assign current data which is used by all bar chart operations\r\n    if (chart._vars.rotateAxis) {\r\n        chart.currentData = dataObj;\r\n    } else {\r\n        chart.currentData = axisData;\r\n    }\r\n    //Overwrite any pre-existing zoom\r\n    chart.config.zoomEvent = null;\r\n    //generate svg dynamically based on legend data\r\n    chart.generateSVG();\r\n    chart.generateXAxis(axisData.xAxisData);\r\n    chart.generateYAxis(axisData.yAxisData);\r\n\r\n    chart.generateBoxes(dataObj);\r\n}\r\n\r\nfunction getEventData() {\r\n    return {};\r\n}\r\n\r\n/** getBoxDataFromOptions\r\n *\r\n *  @desc Assigns the correct chart data to current data using the chart._vars\r\n */\r\nfunction getBoxDataFromOptions(chart) {\r\n    //creating these two data variables to avoid having to reference the chart object everytime\r\n    var csv = chart.data.chartData,\r\n        dataTable = chart.data.dataTable,\r\n        min = Infinity,\r\n        max = -Infinity,\r\n        yAxis = [],\r\n        dataObj = {},\r\n        data = {},\r\n        yAxisLabel = dataTable.label,\r\n        xAxisLabel = dataTable.value,\r\n        xAxisData,\r\n        yAxisData,\r\n\r\n        keys = csv.map(d => d[yAxisLabel]),\r\n        keys2 = csv.map(d => d[xAxisLabel]),\r\n        unique = keys.filter((item, i, ar) => ar.indexOf(item) === i),\r\n        temp = [];\r\n\r\n    for (let uniqueEle of unique) {\r\n        let tempData = csv.filter(d => d[yAxisLabel] === uniqueEle);\r\n        temp.push([uniqueEle, tempData.map(d => d[xAxisLabel])]);\r\n    }\r\n\r\n    max = Math.max.apply(Math, keys2);\r\n    min = Math.min.apply(Math, keys2);\r\n    yAxis.push(min);\r\n    yAxis.push(max);\r\n\r\n    xAxisData = { 'label': yAxisLabel, 'dataType': 'STRING', 'values': unique };\r\n    yAxisData = { 'label': xAxisLabel, 'dataType': 'NUMBER', 'values': yAxis };\r\n\r\n    dataObj.chartData = temp;\r\n    dataObj.dataTable = data.dataTable;\r\n    chart._vars.color = data.color;\r\n\r\n    dataObj.xAxisData = xAxisData;\r\n    dataObj.yAxisData = yAxisData;\r\n    data = {\r\n        yAxisData: dataObj.yAxisData,\r\n        xAxisData: dataObj.xAxisData\r\n    };\r\n\r\n    if (chart._vars.rotateAxis) {\r\n        dataObj.xAxisData = data.yAxisData;\r\n        dataObj.yAxisData = data.xAxisData;\r\n    } else {\r\n        dataObj.xAxisData = data.xAxisData;\r\n        dataObj.yAxisData = data.yAxisData;\r\n    }\r\n\r\n    return dataObj;\r\n}\r\n\r\n/** generateBars\r\n *\r\n * @desc Does the actual painting of bars on the bar chart\r\n * @params boxData\r\n */\r\nfunction generateBoxes(boxData) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        options = chart._vars,\r\n        container = chart.config.container,\r\n        height = container.height,\r\n        width = container.width,\r\n        x,\r\n        boxChart,\r\n        margin = { top: 0, right: 50, bottom: 70, left: 50 };\r\n\r\n    if (options.rotateAxis) {\r\n        x = d3.scaleBand()\r\n            .domain(boxData.chartData.map(d => d[0]))\r\n            .rangeRound([0, height])\r\n            .paddingInner(0.7)\r\n            .paddingOuter(0.3);\r\n        boxChart = box()\r\n            .whiskers(iqr(1.5))\r\n            .height(width)\r\n            .domain([boxData.xAxisData.values[0], boxData.xAxisData.values[1]])\r\n            .showLabels(options.displayValues)\r\n            .flipped(options.rotateAxis)\r\n            .duration(options.transitionTime)\r\n            .chart(chart);\r\n    } else {\r\n        x = d3.scaleBand()\r\n            .domain(boxData.chartData.map(d => d[0]))\r\n            .rangeRound([0, width])\r\n            .paddingInner(0.7)\r\n            .paddingOuter(0.3);\r\n        boxChart = box()\r\n            .whiskers(iqr(1.5))\r\n            .height(height)\r\n            .domain([boxData.yAxisData.values[0], boxData.yAxisData.values[1]])\r\n            .showLabels(options.displayValues)\r\n            .flipped(options.rotateAxis)\r\n            .duration(options.transitionTime)\r\n            .chart(chart);\r\n    }\r\n    //draw the boxplots\r\n    svg.attr('class', 'boxwhisker-container')\r\n        .selectAll('.box')\r\n        .data(boxData.chartData)\r\n        .enter()\r\n        .append('g')\r\n        .attr('class', 'box-container')\r\n        .attr('style', 'pointer-events: all;')\r\n        .attr('transform', d => options.rotateAxis ? `translate(${margin.top}, ${x(d[0])})` : `translate(${x(d[0])}, ${margin.top})`)\r\n        .call(boxChart.width(x.bandwidth()));\r\n\r\n    d3.selectAll('rect.box').attr('class', (d, i) =>`editable editable-box box-${i} highlight-class-${i}box`);\r\n    hideLabelsOnOverlap(x, width, svg);\r\n}\r\n\r\n/**\r\n * @name hideLabelsOnOverlap\r\n * @desc determines if text on graph should be displayed or not\r\n */\r\nfunction hideLabelsOnOverlap(x, width, svg) {\r\n    var numSpacesBetween = x.domain().length - 1,\r\n        totalBoxWidth = x.bandwidth() * x.domain().length,\r\n        widthOfSpaces = (width - totalBoxWidth) / numSpacesBetween,\r\n        xAxisLabelLengthLimit = x.bandwidth() + widthOfSpaces,\r\n        ticks = svg.selectAll('.xAxis text');\r\n\r\n    ticks.each(function () {\r\n        if (this.getBBox().width > xAxisLabelLengthLimit) {\r\n            svg.selectAll('.xAxis text')\r\n                .attr('style', 'display:none');\r\n            svg.selectAll('text.box')\r\n                .attr('style', 'display:none');\r\n            svg.selectAll('text.whisker')\r\n                .attr('style', 'display:none');\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * @name iqr\r\n * @desc Returns a function to compute the interquartile range.\r\n */\r\nfunction iqr(k) {\r\n    return function (d, i) {\r\n        var q1 = d.quartiles[0],\r\n            q3 = d.quartiles[2],\r\n            iqr = (q3 - q1) * k,\r\n            i = -1,\r\n            j = d.length;\r\n        while (d[++i] < q1 - iqr);\r\n        while (d[--j] > q3 + iqr);\r\n        return [i, j];\r\n    };\r\n}\r\n\r\n//Inspired by http://informationandvisualization.de/blog/box-plot\r\nbox = function () {\r\n    var width = 1,\r\n        height = 1,\r\n        duration = 0,\r\n        domain = null,\r\n        value = Number,\r\n        whiskers = boxWhiskers,\r\n        quartiles = boxQuartiles,\r\n        showLabels = true, //whether or not to show text labels\r\n        numBars = 4,\r\n        curBar = 1,\r\n        tickFormat = null,\r\n        chart = {},\r\n        flipped = false;\r\n\r\n    //For each small multiple\r\n    function box(g) {\r\n        g.each(function (data, i) {\r\n            var d = data[1].sort(d3.ascending),\r\n                g = d3.select(this),\r\n                n = d.length,\r\n                min = d[0],\r\n                max = d[n - 1],\r\n                outlierLabel = data[0];\r\n\r\n            //Compute quartiles. Must return exactly 3 elements.\r\n            var quartileData = d.quartiles = quartiles(d);\r\n\r\n            //Compute whiskers. Must return exactly 2 elements, or null.\r\n            var whiskerIndices = whiskers && whiskers.call(this, d, i),\r\n                whiskerData = whiskerIndices && whiskerIndices.map(function (i) { return d[i]; });\r\n\r\n            //Compute outliers. If no whiskers are specified, all data are 'outliers'.\r\n            //We compute the outliers as indices, so that we can join across transitions!\r\n            var outlierIndices = whiskerIndices\r\n                ? d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n))\r\n                : d3.range(n);\r\n\r\n            //Compute the new x-scale.\r\n            if (flipped) {\r\n                var x1 = d3.scaleLinear()\r\n                    .domain(domain && domain.call(this, d, i) || [min, max])\r\n                    .range([0, height]);\r\n            } else {\r\n                var x1 = d3.scaleLinear()\r\n                    .domain(domain && domain.call(this, d, i) || [min, max])\r\n                    .range([height, 0]);\r\n            }\r\n\r\n            //Retrieve the old x-scale, if this is an update.\r\n            var x0 = this.__chart__ || d3.scaleLinear()\r\n                .domain([0, Infinity])\r\n                //.domain([0, max])\r\n                .range(x1.range());\r\n\r\n            //Stash the new scale.\r\n            this.__chart__ = x1;\r\n\r\n            //Note: the box, median, and box tick elements are fixed in number,\r\n            //so we only have to handle enter and update. In contrast, the outliers\r\n            //and other elements are variable, so we need to exit them! Variable\r\n            //elements also fade in and out.\r\n\r\n            //Update outliers.\r\n            var outlier = g.selectAll('circle.outlier')\r\n                .data(outlierIndices, Number);\r\n\r\n            outlier = outlier.enter().append('g');\r\n\r\n            if (flipped) {\r\n                outlier.insert('circle', 'text')\r\n                    .attr('class', 'outlier')\r\n                    .attr('fill', 'white')\r\n                    .attr('r', function () {\r\n                        if (width > 10) {\r\n                            return 5;\r\n                        }\r\n\r\n                        return width / 2;\r\n                    })\r\n                    .attr('cy', width / 2)\r\n                    .attr('cx', function (i) { return x0(d[i]); })\r\n                    .style('opacity', 1e-6)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('cx', function (i) { return x1(d[i]); })\r\n                    .style('opacity', 1);\r\n\r\n                outlier.append('text').text(function (i) {\r\n                    return d[i];\r\n                })\r\n                    .attr('y', (width / 2) + 7)\r\n                    .attr('x', function (i) { return x1(d[i]) + 4; })\r\n                    .attr('class', 'outlier-label')\r\n                    .attr('font-size', '10px')\r\n                    .attr('style', function () {\r\n                        if (!showLabels) {\r\n                            return 'display:none;';\r\n                        }\r\n\r\n                        return '';\r\n                    });\r\n                outlier.exit().transition()\r\n                    .duration(duration)\r\n                    .attr('cx', function (i) { return x1(d[i]); })\r\n                    .style('opacity', 1e-6)\r\n                    .remove();\r\n            } else {\r\n                outlier.insert('circle', 'text')\r\n                    .attr('class', 'outlier')\r\n                    .attr('fill', 'white')\r\n                    .attr('r', function () {\r\n                        if (width > 10) {\r\n                            return 5;\r\n                        }\r\n\r\n                        return width / 2;\r\n                    })\r\n                    .attr('cx', width / 2)\r\n                    .attr('cy', function (i) { return x0(d[i]); })\r\n                    .style('opacity', 1e-6)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('cy', function (i) { return x1(d[i]); })\r\n                    .style('opacity', 1);\r\n\r\n                outlier.append('text').text(function (i) {\r\n                    return d[i];\r\n                })\r\n                    .attr('x', (width / 2) + 7)\r\n                    .attr('y', function (i) { return x1(d[i]) + 4; })\r\n                    .attr('class', 'outlier-label')\r\n                    .attr('font-size', '10px')\r\n                    .attr('style', function () {\r\n                        if (!showLabels) {\r\n                            return 'display:none;';\r\n                        }\r\n\r\n                        return '';\r\n                    });\r\n\r\n                outlier.transition()\r\n                    .duration(duration)\r\n                    .attr('cy', function (i) { return x1(d[i]); })\r\n                    .style('opacity', 1);\r\n\r\n                outlier.exit().transition()\r\n                    .duration(duration)\r\n                    .attr('cy', function (i) { return x1(d[i]); })\r\n                    .style('opacity', 1e-6)\r\n                    .remove();\r\n            }\r\n\r\n            outlier\r\n                .on('mouseover', function (i) {\r\n                    if (chart.showToolTip) {\r\n                        const outlier = [d[i]];\r\n                        const data = { Outlier: outlier, Label: outlierLabel };\r\n                        const tipData = chart.setTipData(data, i);\r\n\r\n                        chart.tip.generateSimpleTip(tipData, data);\r\n                        chart.tip.d = d.data;\r\n                        chart.tip.i = i;\r\n                    }\r\n                })\r\n                .on('mousemove', function (i) {\r\n                    if (chart.showToolTip) {\r\n                        const outlier = [d[i]];\r\n                        const data = { Outlier: outlier, Label: outlierLabel };\r\n                        const tipData = chart.setTipData(data, i);\r\n\r\n                        chart.tip.generateSimpleTip(tipData, data);\r\n                        chart.tip.d = d.data;\r\n                        chart.tip.i = i;\r\n                    }\r\n                })\r\n                .on('mouseout', function () {\r\n                    if (chart.showToolTip) {\r\n                        chart.tip.hideTip();\r\n                    }\r\n                });\r\n\r\n            //set separate tooltips for quartiles and whiskers\r\n            g = g.append('g').attr('class', 'inner-box-container')\r\n                .on('mouseover', function (label) {\r\n                    if (chart.showToolTip) {\r\n                        const data = {\r\n                            Quartiles: d.quartiles,\r\n                            Whiskers: whiskerData,\r\n                            Label: label[0]\r\n                        };\r\n                        const tipData = chart.setTipData(data, i);\r\n\r\n                        chart.tip.generateSimpleTip(tipData, data);\r\n                        chart.tip.d = d.data;\r\n                        chart.tip.i = i;\r\n                    }\r\n                })\r\n                .on('mousemove', function (label) {\r\n                    if (chart.showToolTip) {\r\n                        const data = {\r\n                            Quartiles: d.quartiles,\r\n                            Whiskers: whiskerData,\r\n                            Label: label[0]\r\n                        };\r\n                        const tipData = chart.setTipData(data, i);\r\n\r\n                        chart.tip.generateSimpleTip(tipData, data);\r\n                        chart.tip.d = d.data;\r\n                        chart.tip.i = i;\r\n                    }\r\n                })\r\n                .on('mouseleave', function () {\r\n                    if (chart.showToolTip) {\r\n                        chart.tip.hideTip();\r\n                    }\r\n                });\r\n\r\n\r\n            //Update center line: the vertical line spanning the whiskers.\r\n            var center = g.selectAll('line.center')\r\n                .data(whiskerData ? [whiskerData] : []);\r\n            //vertical line\r\n            if (flipped) {\r\n                center.enter().insert('line', 'rect')\r\n                    .attr('class', 'center')\r\n                    .attr('y1', width / 2)\r\n                    .attr('x1', function (d) { return x0(d[0]); })\r\n                    .attr('y2', width / 2)\r\n                    .attr('x2', function (d) { return x0(d[1]); })\r\n                    .style('opacity', 1e-6)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 1)\r\n                    .attr('x1', function (d) { return x1(d[0]); })\r\n                    .attr('x2', function (d) { return x1(d[1]); });\r\n\r\n                center.transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 1)\r\n                    .attr('x1', function (d) { return x1(d[0]); })\r\n                    .attr('x2', function (d) { return x1(d[1]); });\r\n\r\n                center.exit().transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 1e-6)\r\n                    .attr('x1', function (d) { return x1(d[0]); })\r\n                    .attr('x2', function (d) { return x1(d[1]); })\r\n                    .remove();\r\n            } else {\r\n                center.enter().insert('line', 'rect')\r\n                    .attr('class', 'center')\r\n                    .attr('x1', width / 2)\r\n                    .attr('y1', function (d) { return x0(d[0]); })\r\n                    .attr('x2', width / 2)\r\n                    .attr('y2', function (d) { return x0(d[1]); })\r\n                    .style('opacity', 1e-6)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 1)\r\n                    .attr('y1', function (d) { return x1(d[0]); })\r\n                    .attr('y2', function (d) { return x1(d[1]); });\r\n\r\n                center.transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 1)\r\n                    .attr('y1', function (d) { return x1(d[0]); })\r\n                    .attr('y2', function (d) { return x1(d[1]); });\r\n\r\n                center.exit().transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 1e-6)\r\n                    .attr('y1', function (d) { return x1(d[0]); })\r\n                    .attr('y2', function (d) { return x1(d[1]); })\r\n                    .remove();\r\n            }\r\n\r\n            var hoverArea = g.selectAll('line.hover-area')\r\n                .data(whiskerData ? [whiskerData] : []);\r\n            //vertical line\r\n            if (flipped) {\r\n                hoverArea.enter().insert('line', 'rect')\r\n                    .attr('class', 'hover-area')\r\n                    .attr('y1', width / 2)\r\n                    .attr('x1', function (d) { return x0(d[0]); })\r\n                    .attr('y2', width / 2)\r\n                    .attr('x2', function (d) { return x0(d[1]); })\r\n                    .style('opacity', 0)\r\n                    .style('stroke-width', width)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 0)\r\n                    .attr('x1', function (d) { return x1(d[0]); })\r\n                    .attr('x2', function (d) { return x1(d[1]); });\r\n\r\n                hoverArea.transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 0)\r\n                    .attr('x1', function (d) { return x1(d[0]); })\r\n                    .attr('x2', function (d) { return x1(d[1]); });\r\n\r\n                hoverArea.exit().transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 0)\r\n                    .attr('x1', function (d) { return x1(d[0]); })\r\n                    .attr('x2', function (d) { return x1(d[1]); })\r\n                    .remove();\r\n            } else {\r\n                hoverArea.enter().insert('line', 'rect')\r\n                    .attr('class', 'hover-area')\r\n                    .attr('x1', width / 2)\r\n                    .attr('y1', function (d) { return x0(d[0]); })\r\n                    .attr('x2', width / 2)\r\n                    .attr('y2', function (d) { return x0(d[1]); })\r\n                    .style('opacity', 0)\r\n                    .style('stroke-width', width)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 0)\r\n                    .attr('y1', function (d) { return x1(d[0]); })\r\n                    .attr('y2', function (d) { return x1(d[1]); });\r\n\r\n                hoverArea.transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 0)\r\n                    .attr('y1', function (d) { return x1(d[0]); })\r\n                    .attr('y2', function (d) { return x1(d[1]); });\r\n\r\n                hoverArea.exit().transition()\r\n                    .duration(duration)\r\n                    .style('opacity', 0)\r\n                    .attr('y1', function (d) { return x1(d[0]); })\r\n                    .attr('y2', function (d) { return x1(d[1]); })\r\n                    .remove();\r\n            }\r\n            //Update innerquartile box.\r\n            var box = g.selectAll('rect.box')\r\n                .data([quartileData]);\r\n            if (flipped) {\r\n                box.enter().append('rect')\r\n                    .attr('fill', 'steelblue')\r\n                    .attr('class', 'box')\r\n                    .attr('y', 0)\r\n                    .attr('x', function (d) { return x0(d[2]) - Math.abs(x0(d[0]) - x0(d[2])); })\r\n                    .attr('height', width)\r\n                    .attr('width', function (d) { return Math.abs(x0(d[0]) - x0(d[2])); })\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('x', function (d) { return x1(d[2]) - Math.abs(x1(d[0]) - x1(d[2])); })\r\n                    .attr('width', function (d) { return Math.abs(x1(d[0]) - x1(d[2])); });\r\n\r\n                box.transition()\r\n                    .duration(duration)\r\n                    .attr('x', function (d) { return x1(d[2]) - Math.abs(x1(d[0]) - x1(d[2])); })\r\n                    .attr('width', function (d) { return Math.abs(x1(d[0]) - x1(d[2])); });\r\n            } else {\r\n                box.enter().append('rect')\r\n                    .attr('fill', 'steelblue')\r\n                    .attr('class', 'box')\r\n                    .attr('x', 0)\r\n                    .attr('y', function (d) { return x0(d[2]); })\r\n                    .attr('width', width)\r\n                    .attr('height', function (d) { return x0(d[0]) - x0(d[2]); })\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('y', function (d) { return x1(d[2]); })\r\n                    .attr('height', function (d) { return x1(d[0]) - x1(d[2]); });\r\n\r\n                box.transition()\r\n                    .duration(duration)\r\n                    .attr('y', function (d) { return x1(d[2]); })\r\n                    .attr('height', function (d) { return x1(d[0]) - x1(d[2]); });\r\n            }\r\n            //Update median line.\r\n            var medianLine = g.selectAll('line.median')\r\n                .data([quartileData[1]]);\r\n            if (flipped) {\r\n                medianLine.enter().append('line')\r\n                    .attr('class', 'median')\r\n                    .attr('y1', 0)\r\n                    .attr('x1', x0)\r\n                    .attr('y2', width)\r\n                    .attr('x2', x0)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('x1', x1)\r\n                    .attr('x2', x1);\r\n\r\n                medianLine.transition()\r\n                    .duration(duration)\r\n                    .attr('x1', x1)\r\n                    .attr('x2', x1);\r\n            } else {\r\n                medianLine.enter().append('line')\r\n                    .attr('class', 'median')\r\n                    .attr('x1', 0)\r\n                    .attr('y1', x0)\r\n                    .attr('x2', width)\r\n                    .attr('y2', x0)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('y1', x1)\r\n                    .attr('y2', x1);\r\n\r\n                medianLine.transition()\r\n                    .duration(duration)\r\n                    .attr('y1', x1)\r\n                    .attr('y2', x1);\r\n            }\r\n            //Update whiskers.\r\n            var whisker = g.selectAll('line.whisker')\r\n                .data(whiskerData || []);\r\n            if (flipped) {\r\n                whisker.enter()\r\n                    .insert('line', 'circle, text')\r\n                    .attr('class', 'whisker')\r\n                    .attr('y1', 0)\r\n                    .attr('x1', x0)\r\n                    .attr('y2', 0 + width)\r\n                    .attr('x2', x0)\r\n                    .style('opacity', 1e-6)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('x1', x1)\r\n                    .attr('x2', x1)\r\n                    .style('opacity', 1);\r\n\r\n                whisker.transition()\r\n                    .duration(duration)\r\n                    .attr('x1', x1)\r\n                    .attr('x2', x1)\r\n                    .style('opacity', 1);\r\n\r\n                whisker.exit().transition()\r\n                    .duration(duration)\r\n                    .attr('x1', x1)\r\n                    .attr('x2', x1)\r\n                    .style('opacity', 1e-6)\r\n                    .remove();\r\n            } else {\r\n                whisker.enter()\r\n                    .insert('line', 'circle, text')\r\n                    .attr('class', 'whisker')\r\n                    .attr('x1', 0)\r\n                    .attr('y1', x0)\r\n                    .attr('x2', 0 + width)\r\n                    .attr('y2', x0)\r\n                    .style('opacity', 1e-6)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('y1', x1)\r\n                    .attr('y2', x1)\r\n                    .style('opacity', 1);\r\n\r\n                whisker.transition()\r\n                    .duration(duration)\r\n                    .attr('y1', x1)\r\n                    .attr('y2', x1)\r\n                    .style('opacity', 1);\r\n\r\n                whisker.exit().transition()\r\n                    .duration(duration)\r\n                    .attr('y1', x1)\r\n                    .attr('y2', x1)\r\n                    .style('opacity', 1e-6)\r\n                    .remove();\r\n            }\r\n            //Compute the tick format.\r\n            var format = tickFormat || x1.tickFormat(8);\r\n\r\n            //Update box ticks.\r\n            var boxTick = g.selectAll('text.box')\r\n                .data(quartileData);\r\n\r\n            if (flipped) {\r\n                boxTick.enter().append('text')\r\n                    .attr('class', 'box')\r\n                    .attr('dx', '.3em')\r\n                    .attr('dy', function (d, i) { return i & 1 ? 6 : -6 })\r\n                    .attr('y', function (d, i) { return i & 1 ? + width : 0 })\r\n                    .attr('x', x0)\r\n                    .attr('text-anchor', function (d, i) { return i & 1 ? 'start' : 'end'; })\r\n                    .attr('style', function () {\r\n                        if (!showLabels) {\r\n                            return 'display: none;';\r\n                        }\r\n                    })\r\n                    .text(format)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('x', x1);\r\n\r\n                boxTick.transition()\r\n                    .duration(duration)\r\n                    .text(format)\r\n                    .attr('x', x1);\r\n            } else {\r\n                boxTick.enter().append('text')\r\n                    .attr('class', 'box')\r\n                    .attr('dy', '.3em')\r\n                    .attr('dx', function (d, i) { return i & 1 ? 6 : -6 })\r\n                    .attr('x', function (d, i) { return i & 1 ? + width : 0 })\r\n                    .attr('y', x0)\r\n                    .attr('text-anchor', function (d, i) { return i & 1 ? 'start' : 'end'; })\r\n                    .attr('style', function () {\r\n                        if (!showLabels) {\r\n                            return 'display: none;';\r\n                        }\r\n                    })\r\n                    .text(format)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('y', x1);\r\n\r\n                boxTick.transition()\r\n                    .duration(duration)\r\n                    .text(format)\r\n                    .attr('y', x1);\r\n            }\r\n            //Update whisker ticks. These are handled separately from the box\r\n            //ticks because they may or may not exist, and we want don't want\r\n            //to join box ticks pre-transition with whisker ticks post-.\r\n            var whiskerTick = g.selectAll('text.whisker')\r\n                .data(whiskerData || []);\r\n\r\n            if (flipped) {\r\n                whiskerTick.enter().append('text')\r\n                    .attr('class', 'whisker')\r\n                    .attr('dx', '.3em')\r\n                    .attr('dy', 6)\r\n                    .attr('y', width)\r\n                    .attr('x', x0)\r\n                    .attr('style', function () {\r\n                        if (!showLabels) {\r\n                            return 'display:none;';\r\n                        }\r\n                    })\r\n                    .text(format)\r\n                    .style('opacity', 1e-6)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('x', x1)\r\n                    .style('opacity', 1);\r\n\r\n                whiskerTick.transition()\r\n                    .duration(duration)\r\n                    .text(format)\r\n                    .attr('x', x1)\r\n                    .style('opacity', 1);\r\n\r\n                whiskerTick.exit().transition()\r\n                    .duration(duration)\r\n                    .attr('x', x1)\r\n                    .style('opacity', 1e-6)\r\n                    .remove();\r\n            } else {\r\n                whiskerTick.enter().append('text')\r\n                    .attr('class', 'whisker')\r\n                    .attr('dy', '.3em')\r\n                    .attr('dx', 6)\r\n                    .attr('x', width)\r\n                    .attr('y', x0)\r\n                    .attr('style', function () {\r\n                        if (!showLabels) {\r\n                            return 'display:none;';\r\n                        }\r\n                    })\r\n                    .text(format)\r\n                    .style('opacity', 1e-6)\r\n                    .transition()\r\n                    .duration(duration)\r\n                    .attr('y', x1)\r\n                    .style('opacity', 1);\r\n\r\n                whiskerTick.transition()\r\n                    .duration(duration)\r\n                    .text(format)\r\n                    .attr('y', x1)\r\n                    .style('opacity', 1);\r\n\r\n                whiskerTick.exit().transition()\r\n                    .duration(duration)\r\n                    .attr('y', x1)\r\n                    .style('opacity', 1e-6)\r\n                    .remove();\r\n            }\r\n        });\r\n        //d3.timer.flush();\r\n        d3.timerFlush();\r\n    }\r\n\r\n    box.width = function (x) {\r\n        if (!arguments.length) return width;\r\n        width = x;\r\n        return box;\r\n    };\r\n\r\n    box.height = function (x) {\r\n        if (!arguments.length) return height;\r\n        height = x;\r\n        return box;\r\n    };\r\n\r\n    box.tickFormat = function (x) {\r\n        if (!arguments.length) return tickFormat;\r\n        tickFormat = x;\r\n        return box;\r\n    };\r\n\r\n    box.duration = function (x) {\r\n        if (!arguments.length) return duration;\r\n        duration = x;\r\n        return box;\r\n    };\r\n\r\n    function constant(x) {\r\n        return function () {\r\n            return x;\r\n        };\r\n    }\r\n    box.domain = function (x) {\r\n        if (!arguments.length) return domain;\r\n        //domain = x == null ? x : d3.functor(x);\r\n        domain = x == null ? x : constant(x);\r\n\r\n        return box;\r\n    };\r\n\r\n    box.value = function (x) {\r\n        if (!arguments.length) return value;\r\n        value = x;\r\n        return box;\r\n    };\r\n\r\n    box.whiskers = function (x) {\r\n        if (!arguments.length) return whiskers;\r\n        whiskers = x;\r\n        return box;\r\n    };\r\n\r\n    box.showLabels = function (x) {\r\n        if (!arguments.length) return showLabels;\r\n        showLabels = x;\r\n        return box;\r\n    };\r\n\r\n    box.flipped = function (x) {\r\n        if (!arguments.length) return flipped;\r\n        flipped = x;\r\n        return box;\r\n    };\r\n\r\n    box.chart = function (x) {\r\n        if (!arguments.length) return chart;\r\n        chart = x;\r\n        return box;\r\n    };\r\n\r\n    box.quartiles = function (x) {\r\n        if (!arguments.length) return quartiles;\r\n        quartiles = x;\r\n        return box;\r\n    };\r\n\r\n    return box;\r\n};\r\n\r\nfunction boxWhiskers(d) {\r\n    return [0, d.length - 1];\r\n}\r\n\r\nfunction boxQuartiles(d) {\r\n    return [\r\n        d3.quantile(d, 0.25),\r\n        d3.quantile(d, 0.5),\r\n        d3.quantile(d, 0.75)\r\n    ];\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvBoxWhisker.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.bubble = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: getEventData\r\n};\r\n\r\njvCharts.prototype.generateBubble = generateBubble;\r\n\r\n/************************************************ Bubble functions ******************************************************/\r\n\r\nfunction paint(transitionTime) {\r\n    var chart = this,\r\n        bubbleMargins = {\r\n            top: 15,\r\n            right: 15,\r\n            left: 15,\r\n            bottom: 15\r\n        };\r\n    if (transitionTime || transitionTime === 0) {\r\n        chart._vars.transitionTime = transitionTime;\r\n    } else if (!chart._vars.transitionTime) {\r\n        chart._vars.transitionTime = 800;\r\n    }\r\n    if (!chart.smallerFontRepaint) {\r\n        chart._vars.fontSizeMax = 80;\r\n        chart.currentData = chart.data;\r\n    } else {\r\n        chart.currentData = JSON.parse(JSON.stringify(chart.data));\r\n    }\r\n\r\n    chart._vars.color = chart.data.color;\r\n\r\n    //Generate SVG-legend data is used to determine the size of the bottom margin (set to null for no legend)\r\n    chart.generateSVG(null, bubbleMargins);\r\n    chart.generateVerticalLegend('generateBubble');\r\n    chart.generateBubble(chart.currentData);\r\n}\r\n\r\n/**setData\r\n *  gets Bubble data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this;\r\n    //define color object for chartData\r\n    chart.data.legendData = setBubbleLegendData(chart.data);\r\n    chart.data.color = jvCharts.setChartColors(chart._vars.color, chart.data.legendData, chart.colors);\r\n}\r\n\r\nfunction getEventData() {\r\n    return {};\r\n}\r\n\r\n/**setBubbleLegendData\r\n *  gets legend info from chart Data\r\n *\r\n * @params data, type\r\n * @returns [] of legend text\r\n */\r\nfunction setBubbleLegendData(data) {\r\n    var legendArray = [],\r\n        item = data.dataTable.label;\r\n\r\n    for (let value in data.chartData) {\r\n        if (data.chartData.hasOwnProperty(value)) {\r\n            let legendElement = data.chartData[value][item];\r\n            if (legendArray.indexOf(legendElement) === -1) {\r\n                legendArray.push(legendElement);\r\n            }\r\n        }\r\n    }\r\n\r\n    return legendArray;\r\n}\r\n\r\n\r\n/** generateBubble\r\n *\r\n * paints the bubble  on the chart\r\n * @params bubble Data\r\n */\r\nfunction generateBubble(bubbleData) {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        container = chart.config.container,\r\n        width = container.width,\r\n        height = container.height,\r\n        pack = d3.pack().size([width, height]).padding(1.5),\r\n        legendData = chart.data.legendData,\r\n        valueKey = chart.data.dataTable.value,\r\n        labelKey = chart.data.dataTable.label,\r\n        colors = chart._vars.color,\r\n        dataHeaders,\r\n        bubbleDataNew,\r\n        legendElementToggleArray,\r\n        root,\r\n        bubble;\r\n\r\n    if (!chart._vars.legendHeaders) {\r\n        chart._vars.legendHeaders = legendData;\r\n    }\r\n    dataHeaders = chart._vars.legendHeaders;\r\n    if (!chart._vars.legendHeaders) {\r\n        chart._vars.legendHeaders = legendData;\r\n    }\r\n    bubbleDataNew = jvCharts.getToggledData(bubbleData, dataHeaders);\r\n    legendElementToggleArray = jvCharts.getLegendElementToggleArray(dataHeaders, legendData);\r\n\r\n    if (legendElementToggleArray) {\r\n        for (let j = 0; j < bubbleDataNew.length; j++) {\r\n            for (let legendEle of legendElementToggleArray) {\r\n                if (legendEle.element === bubbleDataNew[j][labelKey] && legendEle.toggle === false) {\r\n                    bubbleDataNew.splice(j, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    svg.selectAll('.bubble').remove();\r\n    //assigns the data to a hierarchy using parent-child relationships\r\n    root = d3.hierarchy({ children: bubbleDataNew })\r\n        .sum(d => d[valueKey]);\r\n\r\n    bubble = svg.selectAll('.bubble')\r\n        .data(pack(root).leaves())\r\n        .enter().append('g')\r\n        .attr('class', 'bubble')\r\n        .attr('transform', d => `translate(${d.x},${d.y})`);\r\n\r\n    bubble.append('circle')\r\n        .attr('fill', d => jvCharts.getColors(colors, legendData.indexOf(d.data[labelKey]), d.data[labelKey]))\r\n        .attr('class', (d, i) => `editable editable-bubble bubble-${i} highlight-class-${i}`)\r\n        .attr('r', d => d.r)\r\n        .on('mouseover', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                //Get tip data\r\n                var tipData = chart.setTipData(d.data, i);\r\n                //Draw tip line\r\n                tipData.data.color = jvCharts.getColors(colors, tipData.index, d.data[labelKey]);\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d.data;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(0);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d.data, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function (d) {\r\n            if (chart.showToolTip) {\r\n                chart.tip.hideTip();\r\n            }\r\n        });\r\n\r\n    bubble.append('text')\r\n        .attr('class', 'bubble-text')\r\n        .text(d => d.data[labelKey])\r\n        .attr('fill', 'white')\r\n        //hide text if its too wide\r\n        .attr('style', function (d) {\r\n            if (this.clientWidth > d.r * 2) {\r\n                return 'display: none';\r\n            }\r\n            return '';\r\n        })\r\n        //center the text on the bubble\r\n        .attr('transform', function (d) {\r\n            var diameter = d.r * 2,\r\n                textWidth = this.clientWidth,\r\n                emptySpace = diameter - textWidth;\r\n\r\n            if (emptySpace < 0) {\r\n                return '';\r\n            }\r\n            return `translate(-${d.r - (emptySpace / 2)}, 0)`;\r\n        })\r\n        .on('mouseover', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                //Get tip data\r\n                var tipData = chart.setTipData(d.data, i);\r\n\r\n                //Draw tip line\r\n                tipData.data.color = jvCharts.getColors(colors, tipData.index, d.data[labelKey]);\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d.data;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(0);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d.data, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            if (chart.showToolTip) {\r\n                chart.tip.hideTip();\r\n            }\r\n        });\r\n\r\n    bubble.append('text')\r\n        .text(d => d.data[valueKey])\r\n        .attr('fill', 'white')\r\n        //hide text if its too wide\r\n        .attr('style', function (d) {\r\n            if (this.clientWidth > d.r * 2) {\r\n                return 'display: none';\r\n            }\r\n            return '';\r\n        })\r\n        //center the text on the bubble\r\n        .attr('transform', function (d) {\r\n            var diameter = d.r * 2,\r\n                textWidth = this.clientWidth,\r\n                emptySpace = diameter - textWidth;\r\n\r\n            if (emptySpace < 0) {\r\n                return '';\r\n            }\r\n            return `translate(-${d.r - (emptySpace / 2)}, 15)`;\r\n        })\r\n        .on('mouseover', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                //Get tip data\r\n                var tipData = chart.setTipData(d.data, i);\r\n\r\n                //Draw tip line\r\n                tipData.data.color = jvCharts.getColors(colors, tipData.index, d.data[labelKey]);\r\n                chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                chart.tip.d = d.data;\r\n                chart.tip.i = i;\r\n            }\r\n        })\r\n        .on('mousemove', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(0);\r\n                } else {\r\n                    //Get tip data\r\n                    var tipData = chart.setTipData(d.data, i);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            if (chart.showToolTip) {\r\n                chart.tip.hideTip();\r\n            }\r\n        });\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvBubble.js","'use strict';\r\nimport jvCharts from 'jvCharts.js';\r\n\r\njvCharts.prototype.clustergram = {\r\n    paint: paint,\r\n    setData: setData,\r\n    getEventData: () => {}\r\n};\r\n\r\njvCharts.prototype.generateClustergram = generateClustergram;\r\n\r\n/************************************************ Clustergram functions ******************************************************/\r\n\r\n/**setClustergramData\r\n *  gets heatmap data and adds it to the chart object\r\n *\r\n * @params data, dataTable, colors\r\n */\r\nfunction setData() {\r\n    var chart = this,\r\n        leftTreeData = chart.data.chartData[0],\r\n        rightTreeData = chart.data.chartData[1];\r\n\r\n    chart.leftLabels = {};\r\n    chart.leftLabels.values = [];\r\n    for (let leftEle of leftTreeData.children) {\r\n        if (leftEle.name) {\r\n            chart.leftLabels.values.push(leftEle.name);\r\n        }\r\n    }\r\n\r\n    chart.rightLabels = {};\r\n    chart.rightLabels.values = [];\r\n    for (let rightEle of rightTreeData.children) {\r\n        if (rightEle.name) {\r\n            chart.rightLabels.values.push(rightEle.name);\r\n        }\r\n    }\r\n\r\n    chart.leftLeaves = getLeafNodes([leftTreeData]);\r\n    chart.rightLeaves = getLeafNodes([rightTreeData]);\r\n}\r\n\r\nfunction getLeafNodes(nodes, result = []) {\r\n    let returnData = result;\r\n    for (let node of nodes) {\r\n        if (node.children.length === 0) {\r\n            returnData.push(node.name);\r\n        } else {\r\n            returnData = getLeafNodes(node.children, returnData);\r\n        }\r\n    }\r\n    return returnData;\r\n}\r\n\r\nfunction paint() {\r\n    var chart = this,\r\n        customMargin = {\r\n            top: 20,\r\n            right: 40,\r\n            left: 0,\r\n            bottom: 20\r\n        };\r\n    chart._vars.color = chart.data.color;\r\n    chart.currentData = chart.data;//Might have to move into method bc of reference/value relationship\r\n\r\n    //Generate SVG-legend data is used to determine the size of the bottom margin (set to null for no legend)\r\n    chart.generateSVG(null, customMargin);\r\n    //chart.generateLegend(chart.currentData.legendData, 'generateClustergram');\r\n    chart.generateClustergram();\r\n}\r\n\r\n/**generateClustergram\r\n *\r\n * paints the Clustergram on the chart\r\n * @params ClustergramData\r\n */\r\nfunction generateClustergram() {\r\n    var chart = this,\r\n        svg = chart.svg,\r\n        container = chart.config.container,\r\n        leftTreeData = chart.data.chartData[0],\r\n        rightTreeData = chart.data.chartData[1],\r\n        gridData = chart.data.chartData[2],\r\n        sizeWidth = chart.rightLeaves.length * 20,\r\n        sizeHeight = chart.leftLeaves.length * 20,\r\n        vis,\r\n        leftG,\r\n        bottomG,\r\n        heatG,\r\n        newWidth,\r\n        newHeight,\r\n        leftChildCount,\r\n        rightChildCount;\r\n\r\n    chart.data.yAxisData = [];\r\n    chart.data.xAxisData = [];\r\n\r\n    if (sizeWidth < container.width) {\r\n        sizeWidth = container.width;\r\n    }\r\n\r\n    if (sizeHeight < container.height) {\r\n        sizeHeight = container.height;\r\n    }\r\n\r\n    //remove svg elements\r\n    svg.selectAll('*').remove();\r\n\r\n    vis = svg.append('g').attr('transform', 'translate(0, 0)').attr('class', 'heatmap');\r\n    leftG = vis.append('g').attr('id', 'left-tree');\r\n    bottomG = vis.append('g').attr('id', 'bottom-tree');\r\n    heatG = vis.append('g').attr('class', 'clustergram-container').attr('id', 'heat');\r\n\r\n    d3.select('body').append('div')\r\n        .attr('class', 'tooltip')\r\n        .style('opacity', 0);\r\n    //calc new width and height\r\n    newWidth = sizeWidth / 2;\r\n    newHeight = sizeHeight / 2;\r\n\r\n    leftChildCount = buildTree(leftTreeData, chart.data.yAxisData, leftG, newHeight, newWidth, 'left');\r\n    rightChildCount = buildTree(rightTreeData, chart.data.xAxisData, bottomG, newHeight, newWidth, 'right');\r\n    buildHeat(chart, gridData, heatG, newHeight, newWidth, leftChildCount, rightChildCount);\r\n\r\n    chart.zoomed = () => svg.attr('transform', d3.event.transform);\r\n    chart.chartDiv.select('.editable-svg').call(d3.zoom()\r\n        .on('zoom', chart.zoomed));\r\n\r\n    //align G tags\r\n    chart._vars.leftTreeWidth = leftG.node().getBBox().width;\r\n    chart._vars.topTreeHeight = bottomG.node().getBBox().height;\r\n    leftG.attr('transform', 'translate(' + 0 + ',' + (chart._vars.topTreeHeight) + ')');\r\n    bottomG.attr('transform', 'translate(' + (chart._vars.leftTreeWidth) + ',' + 0 + ')');\r\n    heatG.attr('transform', 'translate(' + chart._vars.leftTreeWidth + ',' + (chart._vars.topTreeHeight) + ')');\r\n\r\n    chart.config.container.height = heatG.node().getBBox().height;\r\n    chart.config.container.width = heatG.node().getBBox().width;\r\n}\r\n\r\nfunction findPath(child) {\r\n    var str = '';\r\n    let childNode = child;\r\n    while (childNode.parent) {\r\n        str += childNode.data.name + '.';\r\n        childNode = childNode.parent;\r\n    }\r\n    return str.slice(0, -1);\r\n}\r\n\r\nfunction buildTree(data, axisData, gEle, newHeight, newWidth, sideOfTree) {\r\n    var makeTree,\r\n        root,\r\n        childCount = 0;\r\n\r\n    makeTree = d3.cluster()\r\n        .size(sideOfTree === 'left' ? [newHeight, newWidth] : [newWidth, newHeight]);\r\n\r\n    root = d3.hierarchy(data);\r\n    makeTree(root);\r\n\r\n    gEle.selectAll('.cluster-link')\r\n        .data(root.descendants().slice(1))\r\n        .enter().append('path')\r\n        .attr('class', 'cluster-link')\r\n        .style('fill', 'none')\r\n        .style('stroke', 'black')\r\n        .attr('d', d => {\r\n            if (sideOfTree === 'left') {\r\n                return 'M' + d.y / 8 + ',' + d.x + 'V' + d.parent.x + 'H' + d.parent.y / 8;\r\n            }\r\n            return 'M' + d.x + ',' + d.y / 8 + 'V' + d.parent.y / 8 + 'H' + d.parent.x;\r\n        });\r\n\r\n    gEle.selectAll('.cluster-node')\r\n        .data(root.descendants())\r\n        .enter().append('g')\r\n        .attr('class', d => `cluster-node ${(d.children ? 'cluster-node--internal' : 'cluster-node--leaf')}`)\r\n        .attr('transform', d => {\r\n            if (sideOfTree === 'left') {\r\n                return `translate(${d.y / 8}, ${d.x})`;\r\n            }\r\n            return `translate(${d.x}, ${d.y / 8})rotate(15)`;\r\n        });\r\n\r\n    if (sideOfTree === 'left') {\r\n        gEle.selectAll('.cluster-node').append('text')\r\n            .attr('dy', 3)\r\n            .attr('x', d => d.children ? -8 : 0)\r\n            .style('text-anchor', 'end')\r\n            .text(d => {\r\n                if (!d.children) {\r\n                    childCount++;\r\n                    axisData.push(findPath(d));\r\n                }\r\n                //return d.data.name;\r\n                if (d.data.name === 'root') {\r\n                    return '';\r\n                }\r\n                return d.children ? d.data.name.replace(/_/g, ' ') : '';\r\n            });\r\n        gEle.selectAll('.cluster-node').append('line')\r\n            .style('stroke', 'black')\r\n            .attr('x1', d => d.children ? 0 : 0)\r\n            .attr('x2', d => d.children ? 0 : 15);\r\n    } else if (sideOfTree === 'right') {\r\n        gEle.selectAll('.cluster-node').append('text')\r\n            .attr('dy', 8)\r\n            .style('text-anchor', d => d.children ? 'end' : 'start')\r\n            .attr('y', d => d.children ? -8 : 8)\r\n            .text(d => {\r\n                if (!d.children) {\r\n                    childCount++;\r\n                    axisData.push(findPath(d));\r\n                }\r\n                if (d.data.name === 'root') {\r\n                    return '';\r\n                }\r\n                return d.children ? d.data.name.replace(/_/g, ' ') : '';\r\n            });\r\n    }\r\n    return childCount;\r\n}\r\n\r\nfunction buildHeat(chart, gridData, heatG, newHeight, newWidth, leftChildCount, rightChildCount) {\r\n    var heatScores = [],\r\n        gridHeight,\r\n        gridWidth,\r\n        color;\r\n\r\n    for (let i = 0; i < gridData.length; i++) {\r\n        let cell = gridData[i];\r\n        heatScores.push(cell.value);\r\n    }\r\n\r\n    //heat variables\r\n    color = d3.scaleThreshold()\r\n        .domain(heatScores)\r\n        .range(['#fbf2d2', '#fee7a0', '#ffc665', '#fea743', '#fd8c3c', '#fb4b29', '#ea241e', '#d60b20', '#b10026', '#620023']);\r\n\r\n    gridHeight = newHeight / leftChildCount;\r\n    gridWidth = newWidth / rightChildCount;\r\n\r\n    chart._vars.clustergramGridWidth = gridWidth;\r\n    chart._vars.clustergramGridHeight = gridHeight;\r\n\r\n    //grid\r\n    heatG.selectAll('.heat')\r\n        .data(gridData)\r\n        .enter().append('rect')\r\n        .attr('class', 'cluster-rect')\r\n        .attr('x', d => d.x_index * gridWidth)\r\n        .attr('y', d => d.y_index * gridHeight)\r\n        .attr('width', () => gridWidth)\r\n        .attr('height', () => gridHeight)\r\n        .attr('stroke', '#E6E6E6')\r\n        .attr('stroke-width', '1px')\r\n        .style('fill', d => color(d.value))\r\n        .on('mouseover', function (d, i) {\r\n            if (chart.showToolTip) {\r\n                if (chart.tip.d === d && chart.tip.i === i) {\r\n                    chart.tip.showTip(d3.event);\r\n                } else {\r\n                    //Get tip data\r\n                    let tipData = chart.setTipData(d, i);\r\n                    tipData.color = color(d.value);\r\n                    //Draw tip line\r\n                    chart.tip.generateSimpleTip(tipData, chart.data.dataTable, d3.event);\r\n                }\r\n            }\r\n        })\r\n        .on('mouseout', function () {\r\n            chart.tip.hideTip();\r\n        });\r\n}\r\n\r\nmodule.exports = jvCharts;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/visuals/jvClustergram.js","/***  jvEdit ***/\r\nfunction jvSelect(configObj) {\r\n    'use strict';\r\n    var selectObj = this;\r\n    selectObj.chartDiv = configObj.chartDiv;\r\n    selectObj.jvChart = configObj.jvChart;\r\n    selectObj.singleClickCallback = configObj.singleClickCallback;\r\n    selectObj.doubleClickCallback = configObj.doubleClickCallback;\r\n\r\n}\r\n\r\nfunction singleClick(selectObj, event) {\r\n    if (typeof selectObj.singleClickCallback === 'function') {\r\n        selectObj.singleClickCallback(event);\r\n    }\r\n}\r\nfunction dblclick(selectObj, event) {\r\n    if (typeof selectObj.doubleClickCallback === 'function') {\r\n        selectObj.doubleClickCallback(event);\r\n    }\r\n}\r\n\r\n/********************************************* Select Mode Functions **************************************************/\r\n\r\n\r\nexport default jvSelect;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/jvSelect.js"],"sourceRoot":""}